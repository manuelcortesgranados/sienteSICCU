<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="/facelets/template_main.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:a4j="http://richfaces.org/a4j" 
                xmlns:interkont="http://www.interkont.com/jsf"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:rich="http://richfaces.org/rich"
                xmlns:ui="http://java.sun.com/jsf/facelets">


    <ui:define name="head">
        <title>Solicitud Obra</title>
        <h:outputScript name="script_supervisor.js"/>
    </ui:define>
    <ui:define name="title">
        <h:outputText  styleClass="ikont- hot-"   value="#{var.gestionarsolicitudobra}"/>
    </ui:define>
    <ui:define name="menu">
        <!--<ui:include src="/facelets/menu_soliobra.xhtml"/>-->
    </ui:define>
    <ui:define name="menu_lateral">
        <!--<ui:include src="/facelets/menu_lateral_soliobra.xhtml"/>-->
    </ui:define>
    <ui:define name="body">
        <h:form>
            <rich:panel header="#{var.consultasol}">

                <interkont:spacer height="3"/>

                <rich:collapsiblePanel header="1. #{var.datossol}" switchType="ajax" id="datossol" >
                    <center>
                        <h:panelGroup>

                            <h:panelGrid columns="5" cellspacing="15">
                                <h:outputText  styleClass="ikont- hot-"   value="#{var.entidad}"/>                                        
                                <a4j:commandButton id="entidadbutton" value="#{var.ver}" immediate="true"
                                                   oncomplete="#{rich:component('panelInformacionEntidad')}.show()"
                                                   /> 

                                <interkont:spacer width="20"/>

                                <h:outputText  styleClass="ikont- hot-"   value="#{var.contacto}"/>                                        
                                <h:outputText  styleClass="ikont- hot-"   id="strcontactoLogueo"
                                              value="#{SessionBeanCobra.usuarioObra.tercero.stremail}"
                                              rendered="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 5}"/>
                                <h:outputText  styleClass="ikont- hot-"   id="strcontacto"
                                              value="#{SessionBeanCobra.solicitudService.solicitudObrach.strcontacto}"
                                              rendered="#{SolicitudObra$GestionarSolicitudObra.valuegrupo != 5}"/>

                                <h:outputText  styleClass="ikont- hot-"   value="#{var.nombreContratista}:"/>
                                <h:outputText  styleClass="ikont- hot-"   id="nombreLogueo"
                                              value="#{SessionBeanCobra.usuarioObra.tercero.strnombre}
                                              #{SessionBeanCobra.usuarioObra.tercero.strapellido1}
                                              #{SessionBeanCobra.usuarioObra.tercero.strapellido2}"
                                              rendered="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 5}"/>
                                <h:outputText  styleClass="ikont- hot-"   id="nombreSolicitante"
                                              value="#{SessionBeanCobra.solicitudService.solicitudObrach.tercero.strnombre}
                                              #{SessionBeanCobra.solicitudService.solicitudObrach.tercero.strapellido1}
                                              #{SessionBeanCobra.solicitudService.solicitudObrach.tercero.strapellido2}"
                                              rendered="#{SolicitudObra$GestionarSolicitudObra.valuegrupo != 5}"/>
                            </h:panelGrid>

                        </h:panelGroup>
                    </center>

                </rich:collapsiblePanel>
                <interkont:spacer height="3"/>
                <rich:collapsiblePanel header="2. #{var.datosgenerales}" switchType="ajax" id="datosgenerales" >
                    <center>
                        <h:panelGroup>
                            <center> 
                                <h:outputText  styleClass="ikont- hot-"   value="#{var.textdatosgenerales}"/>
                            </center>
                            <h:panelGrid columns="2" cellspacing="15" >
                                <h:outputText  styleClass="ikont- hot-"   value="#{var.usuario}" rendered="#{!SolicitudObra$GestionarSolicitudObra.deshabilitardepartamentos}"/>
                                <h:outputLabel  styleClass="ikont-hol- "   value="#{SessionBeanCobra.usuarioService.usuarioObra.tercero.tipoOrigen.strnombre}"
                                               rendered="#{!SolicitudObra$GestionarSolicitudObra.deshabilitardepartamentos}"/>

                                <h:outputText  styleClass="ikont- hot-"   value="#{var.departamento}:" rendered="#{SolicitudObra$GestionarSolicitudObra.verdepartamento}"/>
                                <h:selectOneMenu id="combodepto" value="#{SolicitudObra$GestionarSolicitudObra.codDepartamento}"
                                                 disabled="#{SolicitudObra$GestionarSolicitudObra.deshabilitardepartamentos}"
                                                 rendered="#{SolicitudObra$GestionarSolicitudObra.verdepartamento}">
                                    <f:selectItems value="#{SolicitudObra$GestionarSolicitudObra.departamento}" />
                                    <a4j:ajax event="change" render="gpmunicipio" listener="#{SolicitudObra$GestionarSolicitudObra.llenarMunicipios}" execute="@this"/>
                                </h:selectOneMenu>

                                <h:outputText  styleClass="ikont- hot-"   value="#{var.municipio}:"/>
                                <h:panelGroup id="gpmunicipio">
                                    <h:outputLabel  styleClass="ikont-hol- "   value="#{SolicitudObra$GestionarSolicitudObra.codMunicipio}" rendered="#{!SolicitudObra$GestionarSolicitudObra.verdepartamento}"/>
                                    <h:selectOneMenu id="munidiana" value="#{SessionBeanCobra.solicitudService.solicitudObrach.localidad.strcodigolocalidad}"
                                                     disabled="#{SolicitudObra$GestionarSolicitudObra.consul ||
                                                                 SolicitudObra$GestionarSolicitudObra.valuegrupo == 6 ||
                                                                 SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                                 SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                                 SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"
                                                     rendered="#{SolicitudObra$GestionarSolicitudObra.verdepartamento}">
                                        <f:selectItems value="#{SolicitudObra$GestionarSolicitudObra.municipio}"/>
                                    </h:selectOneMenu>                                            
                                </h:panelGroup>


                                <h:outputText  styleClass="ikont- hot-"   value="#{var.consecutivo}:" />
                                <h:inputText size="8" id="consecutivo" disabled="true"
                                             value="#{SessionBeanCobra.solicitudService.solicitudObrach.strconsecutivo}"
                                             rendered="#{!SolicitudObra$GestionarSolicitudObra.consul}" />
                                <h:outputText  styleClass="ikont- hot-"   value="#{SessionBeanCobra.solicitudService.solicitudObrach.strconsecutivo}"
                                              rendered="#{SolicitudObra$GestionarSolicitudObra.consul}"/>


                                <h:outputText  styleClass="ikont- hot-"   value="#{var.evento}:"/>
                                <h:selectOneMenu id="selectevnto" value="#{SolicitudObra$GestionarSolicitudObra.eventovalue}"
                                                 disabled="#{SolicitudObra$GestionarSolicitudObra.consul ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 6 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}">
                                    <f:selectItems value="#{SolicitudObra$GestionarSolicitudObra.evento}"/>
                                    <a4j:ajax event="change" render="pgperiodoevento" listener="#{SolicitudObra$GestionarSolicitudObra.llenarPeriodoEvento}"
                                              execute="@this"/>
                                </h:selectOneMenu>

                                <h:outputText  styleClass="ikont- hot-"   value="#{var.periodo}:"/>
                                <h:panelGroup id="pgperiodoevento">
                                    <h:selectOneMenu id="selectperiodoevento"
                                                     disabled="#{SolicitudObra$GestionarSolicitudObra.consul ||
                                                                 SolicitudObra$GestionarSolicitudObra.valuegrupo == 6 ||
                                                                 SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                                 SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                                 SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}">
                                        <f:selectItems value="#{SolicitudObra$GestionarSolicitudObra.periodoevento}"/>
                                    </h:selectOneMenu>
                                </h:panelGroup>

                                <h:outputText  styleClass="ikont- hot-"   value="#{var.fechasol}:"/>
                                <rich:calendar locale="#{var.rcalendarlocale}"
                                               datePattern="yyyy-MM-dd" rendered="#{!SolicitudObra$GestionarSolicitudObra.consul}"
                                               disabled="#{SolicitudObra$GestionarSolicitudObra.consul ||
                                                           SolicitudObra$GestionarSolicitudObra.valuegrupo == 6 ||
                                                           SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                           SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                           SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"
                                               direction="topRight" id="date_sol"
                                               value="#{SessionBeanCobra.solicitudService.solicitudObrach.datefecharecibido}"
                                               inputSize="10">
                                </rich:calendar>
                                <h:outputText  styleClass="ikont- hot-"   rendered="#{SolicitudObra$GestionarSolicitudObra.consul}"
                                              value="#{SessionBeanCobra.solicitudService.solicitudObrach.datefecharecibido}">
                                </h:outputText>

                                <h:outputText  styleClass="ikont- hot-"   value="#{var.nomsol}"/>
                                <h:inputTextarea id="nomsol" cols="30" rows="3"
                                                 value="#{SessionBeanCobra.solicitudService.solicitudObrach.strnombresolicitud}"
                                                 disabled="#{SolicitudObra$GestionarSolicitudObra.consul ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 6 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"
                                                 rendered="#{!SolicitudObra$GestionarSolicitudObra.consul}" />
                                <h:outputText  styleClass="ikont- hot-"   value="#{SessionBeanCobra.solicitudService.solicitudObrach.strnombresolicitud}"
                                              rendered="#{SolicitudObra$GestionarSolicitudObra.consul}"/>

                                <h:outputText  styleClass="ikont- hot-"   value="#{var.tiposol}:"/>
                                <h:selectOneMenu id="selecttiposolicitudobra" rendered="#{!SolicitudObra$GestionarSolicitudObra.consul}"
                                                 disabled="#{SolicitudObra$GestionarSolicitudObra.consul ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 6 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"
                                                 value="#{SessionBeanCobra.solicitudService.solicitudObrach.tiposolicitudobra.inttiposolicitud}">
                                    <f:selectItems value="#{SolicitudObra$GestionarSolicitudObra.tiposolicitudobra}"/>
                                    <a4j:ajax event="change" render="panelvalorclase" listener="#{SolicitudObra$GestionarSolicitudObra.validarclaseobra}"/>
                                </h:selectOneMenu>
                                <h:outputText  styleClass="ikont- hot-"   rendered="#{SolicitudObra$GestionarSolicitudObra.consul}"
                                              value="#{SessionBeanCobra.solicitudService.solicitudObrach.tiposolicitudobra.strdescripcion}">
                                </h:outputText>

                                <h:outputText  styleClass="ikont- hot-"   value="#{var.tipoobra}:"/>
                                <h:selectOneMenu id="selecttipoobra" rendered="#{!SolicitudObra$GestionarSolicitudObra.consul}"
                                                 disabled="#{SolicitudObra$GestionarSolicitudObra.consul ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 6 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"
                                                 value="#{SessionBeanCobra.solicitudService.solicitudObrach.tipoobra.inttipoobra}">
                                    <f:selectItems value="#{SolicitudObra$GestionarSolicitudObra.tipoobra}"/>
                                </h:selectOneMenu>
                                <h:outputText  styleClass="ikont- hot-"   rendered="#{SolicitudObra$GestionarSolicitudObra.consul}"
                                              value="#{SessionBeanCobra.solicitudService.solicitudObrach.tipoobra.strdesctipoobra}">
                                </h:outputText>

                                <h:outputText  styleClass="ikont- hot-"   value="#{var.incluyeint}:"/>
                                <h:selectOneMenu id="incluyeinterventoria"
                                                 disabled="#{SolicitudObra$GestionarSolicitudObra.consul ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 6 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"
                                                 value="#{SessionBeanCobra.solicitudService.solicitudObrach.boolincluyeinterventoria}">
                                    <f:selectItem itemValue="true" itemLabel="Si"/>
                                    <f:selectItem itemValue="false" itemLabel="No"/>
                                </h:selectOneMenu>

                                <h:outputText  styleClass="ikont- hot-"   value="#{var.objetosolicitud}:"/>
                                <h:panelGroup>
                                    <h:inputTextarea id="txtobjetosolicitud" cols="30" rows="3"
                                                     disabled="#{SolicitudObra$GestionarSolicitudObra.consul ||
                                                                 SolicitudObra$GestionarSolicitudObra.valuegrupo == 6 ||
                                                                 SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                                 SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                                 SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"
                                                     value="#{SessionBeanCobra.solicitudService.solicitudObrach.textobservaciones}"
                                                     rendered="#{!SolicitudObra$GestionarSolicitudObra.consul}"/>
                                    <rich:message styleClass="ikont-"   for="txtobjetosolicitud"/>
                                </h:panelGroup>
                                <h:outputText  styleClass="ikont- hot-"   rendered="#{SolicitudObra$GestionarSolicitudObra.consul}"
                                              value="#{SessionBeanCobra.solicitudService.solicitudObrach.textobservaciones}">
                                </h:outputText>

                                <h:outputText  styleClass="ikont- hot-"   value="#{var.vlrsolicittud}:"/>
                                <h:panelGroup id="panelvalorclase">
                                    <rich:inputNumberSpinner minValue="0" maxValue="#{SolicitudObra$GestionarSolicitudObra.validarclaseobra}" inputSize="10"
                                                             disabled="#{SolicitudObra$GestionarSolicitudObra.consul ||
                                                                         SolicitudObra$GestionarSolicitudObra.valuegrupo == 6 ||
                                                                         SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                                         SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                                         SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"
                                                             value="#{SessionBeanCobra.solicitudService.solicitudObrach.doublevalorsolicitado}"
                                                             rendered="#{!SolicitudObra$GestionarSolicitudObra.consul}"/>
                                    <h:outputText  styleClass="ikont- hot-"   styleClass="ikont-"   rendered="#{SolicitudObra$GestionarSolicitudObra.consul}"
                                                  value="#{SessionBeanCobra.solicitudService.solicitudObrach.doublevalorsolicitado}">
                                        <f:convertNumber pattern="$ ###,###"/>
                                    </h:outputText>
                                </h:panelGroup>
                                <h:outputText  styleClass="ikont- hot-"   value="#{var.defprioridad}:"/>
                                <h:selectOneMenu id="selecprioridad"
                                                 rendered="#{!SolicitudObra$GestionarSolicitudObra.consul}"
                                                 disabled="#{SolicitudObra$GestionarSolicitudObra.consul ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 6 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}" 
                                                 value="#{SessionBeanCobra.solicitudService.solicitudObrach.intordenprioridad}">
                                    <f:selectItem itemValue="1" itemLabel="1"/>
                                    <f:selectItem itemValue="2" itemLabel="2"/>
                                    <f:selectItem itemValue="3" itemLabel="3"/>
                                    <f:selectItem itemValue="4" itemLabel="4"/>
                                    <f:selectItem itemValue="5" itemLabel="5"/>
                                    <f:selectItem itemValue="6" itemLabel="6"/>
                                    <f:selectItem itemValue="7" itemLabel="7"/>
                                    <f:selectItem itemValue="8" itemLabel="8"/>
                                    <f:selectItem itemValue="9" itemLabel="9"/>
                                    <f:selectItem itemValue="10" itemLabel="10"/>
                                </h:selectOneMenu>
                                <h:outputText  styleClass="ikont- hot-"   rendered="#{SolicitudObra$GestionarSolicitudObra.consul}"
                                              value="#{SessionBeanCobra.solicitudService.solicitudObrach.intordenprioridad}">
                                </h:outputText>
                            </h:panelGrid>

                        </h:panelGroup>
                    </center>

                </rich:collapsiblePanel>

                <rich:collapsiblePanel header="3. #{var.imagenes}" switchType="ajax" id="gpDatosBasicos"  expanded="#{!SolicitudObra$GestionarSolicitudObra.consul}">
                    <center>
                        <h:outputText  styleClass="ikont- hot-"   value="#{var.textsubirimagen}"/>
                        <interkont:spacer height="3"/>
                        <h:panelGrid id="panel_subirImagen"  columns="6" columnClasses=",,,,buttonsmall">

                            <a4j:commandButton id="adjuntarImagen" styleClass="ikont-"   value="#{var.examinar}" immediate="true"
                                               onclick="#{rich:component('panelUploadImagenSolicitud')}.show();">
                            </a4j:commandButton>
                            <interkont:spacer height="3"/>
                            <h:outputText  styleClass="ikont- hot-"   id="ImagenAtencion" value="#{var.descripcionImagen}:"/>
                            <h:inputText id="inputNombre" value="#{SessionBeanCobra.solicitudService.imagensolicitud.strdescripcion}"/>
                            <a4j:commandLink id="bt_agregarImagen" styleClass="ikont-"   title="#{var.agregar}"
                                             action="#{SolicitudObra$GestionarSolicitudObra.subirImagenaLista}" 
                                             render="tablaImagenes,gpDatosBasicos,panelUploadImagenSolicitud"/>
                            <rich:dataGrid columns="1" rowKeyVar="row" value="#{SolicitudObra$GestionarSolicitudObra.subirImagenSolicitud.archivos}" var="file" >
                                <h:outputText  styleClass="ikont- hot-"   id="otxt_nombreImagen" value=" #{file.nombre}"/>
                            </rich:dataGrid>
                        </h:panelGrid>

                        <h:panelGroup>
                            <rich:dataTable id="tablaImagenes" value="#{SessionBeanCobra.solicitudService.imagensolicituds}"
                                            rowKeyVar="filaSeleccionada" var="currentRow"  rows="3" >
                                <f:facet name="header">
                                    <h:outputText  styleClass="ikont- hot-"   value="#{var.imgseleccionadas}"/>
                                </f:facet>
                                <rich:column breakRowBefore="true"  width="100px">
                                    <f:facet name="header" >
                                        <h:outputText  styleClass="ikont- hot-"   value="#{var.descripcionImagen}"/>
                                    </f:facet>
                                    <h:outputText  styleClass="ikont- hot-"   value="#{currentRow.strdescripcion}"/>
                                </rich:column>
                                <rich:column  width="100px">
                                    <f:facet name="header">
                                        <h:outputText  styleClass="ikont- hot-"   value="#{var.imagen}"/>
                                    </f:facet>
                                    <center>
                                        <h:graphicImage  styleClass="ikont- "   value="#{currentRow.strurlimagen}" width="100" height="100"  />
                                        <rich:jQuery selector="#Imagen img" query="addClass('pic-normal')"/>
                                        <rich:jQuery selector="#Imagen img" query="wrap('&lt;div class=\'wrap1\'&gt;&lt;/div&gt;')" />
                                        <rich:jQuery selector="#Imagen img" event="mouseover" query="jQuery(this).stop().animate({width:'150px', height:'150px'})"/>
                                        <rich:jQuery selector="#Imagen img" event="mouseout" query="jQuery(this).stop().animate({width:'120px', height:'120px'})"/>
                                    </center>
                                </rich:column>
                                <rich:column  width="60px">
                                    <f:facet name="header">
                                        <h:outputText  styleClass="ikont- hot-"   value="#{var.eliminar}"/>
                                    </f:facet>
                                    <a4j:commandButton id="eliminar" value="#{var.eliminar}" render="tablaImagenes" execute="@this"
                                                       action="#{SolicitudObra$GestionarSolicitudObra.eliminarImagenLista(filaSeleccionada)}"/>
                                </rich:column>
                                <f:facet name="footer">
                                    <rich:dataScroller renderIfSinglePage="false" />
                                </f:facet>
                            </rich:dataTable>
                        </h:panelGroup>

                    </center>

                </rich:collapsiblePanel>

                <rich:collapsiblePanel header="4. #{var.nombredoc}" switchType="ajax" id="gpDatosBasicos1"  expanded="#{!SolicitudObra$GestionarSolicitudObra.consul}">
                    <center>
                        <h:outputText  styleClass="ikont- hot-"   value="#{var.textsubirdoc}"/>
                        <interkont:spacer height="3"/>
                        <h:panelGrid id="panel_subir"  columns="6" columnClasses=",,,,,buttonsmall">

                            <a4j:commandButton id="adjuntarDocumento" styleClass="ikont-"   value="#{var.examinar}" immediate="true" 
                                               onclick="#{rich:component('panelUploadDocumento')}.show();">
                            </a4j:commandButton>
                            <h:outputText  styleClass="ikont- hot-"   id="Documento" value="#{var.descipcionDocumento}"/>
                            <h:inputText id="inputDescDocument" value="#{SessionBeanCobra.solicitudService.documentosolicitud.strdescripcion}"/>
                            <h:outputText  styleClass="ikont- hot-"    id="tiposol"  value="#{var.tipoDocumento}"/>
                            <h:selectOneMenu id="selecttipodocumento" value="#{SolicitudObra$GestionarSolicitudObra.tipodoc}">
                                <f:selectItems value="#{SolicitudObra$GestionarSolicitudObra.tipodocumento}"/>
                            </h:selectOneMenu>                                   
                            <a4j:commandLink id="bt_agregar" styleClass="ikont-"   title="#{var.agregar}" execute="panel_subir"
                                             action="#{SolicitudObra$GestionarSolicitudObra.subirDocumentoaLista}"
                                             render="tablaDocumentos,gpDatosBasicos1,panelUploadDocumento">

                            </a4j:commandLink>

                            <rich:dataGrid columns="1" rowKeyVar="row" value="#{SolicitudObra$GestionarSolicitudObra.subirDocumentoSolicitud.archivos}" var="file" >
                                <h:outputText  styleClass="ikont- hot-"   id="otxt_nombrearchivo" value="#{file.nombre}"/>
                            </rich:dataGrid>

                        </h:panelGrid>

                        <rich:dataTable id="tablaDocumentos"  sortMode="single"   var="currentRow" 
                                        rowKeyVar="filaSeleccionada" rows="7"
                                        value="#{SessionBeanCobra.solicitudService.documentosolicituds}">
                            <f:facet name="header" >
                                <rich:columnGroup >
                                    <rich:column colspan="5">
                                        <h:outputText  styleClass="ikont- hot-"   value="#{var.docseleccionados}"/>
                                    </rich:column>
                                    <rich:column breakRowBefore="true">
                                        <h:outputText  styleClass="ikont- hot-"   value="#{var.tipoDocumento}"/>
                                    </rich:column>
                                    <rich:column>
                                        <h:outputText  styleClass="ikont- hot-"   value="#{var.descipcionDocumento}"/>
                                    </rich:column>
                                    <rich:column>
                                        <h:outputText  styleClass="ikont- hot-"   value="#{var.eliminar}"/>
                                    </rich:column>
                                </rich:columnGroup>
                            </f:facet>
                            <rich:column>
                                <h:outputText  styleClass="ikont- hot-"   value="#{currentRow.tipodocumentosolicitud.strdesctipodocsol}" />
                            </rich:column>
                            <rich:column>
                                <h:outputText  styleClass="ikont- hot-"   value="#{currentRow.strdescripcion}"/>
                            </rich:column>
                            <rich:column >
                                <a4j:commandButton id="eliminardoc" value="#{var.eliminar}" render="tablaDocumentos" execute="@this"
                                                   action="#{SolicitudObra$GestionarSolicitudObra.eliminarDocumentoLista(filaSeleccionada)}">
                                </a4j:commandButton>
                            </rich:column>
                            <f:facet name="footer">
                                <rich:columnGroup>
                                    <rich:column colspan="4" breakRowBefore="true" >
                                        <rich:dataScroller id="scrolltablaDocumentos" for="tablaDocumentos" render="tablaDocumentos"/>
                                    </rich:column>
                                </rich:columnGroup>
                            </f:facet>
                        </rich:dataTable>
                    </center>
                </rich:collapsiblePanel>
                <interkont:spacer height="3"/>
                <rich:collapsiblePanel header="5. #{var.nombrevideo}" switchType="ajax" id="gpDatosBasicos2" >
                    <center>
                        <h:outputText  styleClass="ikont- hot-"   value="#{var.textsubirvideo}"/>
                        <interkont:spacer height="3"/>
                        <h:panelGrid columns="5" columnClasses=",,,buttonsmall,,">
                            <a4j:commandButton id="examinarvideo" value="#{var.examinar}"/>
                            <h:outputText  styleClass="ikont- hot-"   value="#{var.nombrevideo}"/>
                            <h:inputText size="10" id="nombrevideo" disabled="true"/>
                            <a4j:commandLink styleClass="ikont-"  />
                        </h:panelGrid>                            
                    </center>

                </rich:collapsiblePanel>
                <h:panelGroup>
                    <center>
                        <a4j:commandButton value="#{var.guardar}"
                                           rendered="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 5}"
                                           action="#{SolicitudObra$GestionarSolicitudObra.validargurdado}">
                            <a4j:ajax event="complete"  render="layoutGuardar" oncomplete="#{rich:component('panelValidarSolicitud')}.show();"/>
                        </a4j:commandButton>
                        <a4j:commandButton value="#{var.cancelar}"
                                           rendered="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 5}"
                                           action="cancelarSolicitud" immediate="true"/>
                    </center>
                </h:panelGroup>
                <interkont:spacer height="3"/>
                <rich:collapsiblePanel header="6. #{var.aprobaciondelfuncionario}" id="AprobacionInfraestructura"  switchType="ajax"
                                       rendered="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 6 ||
                                                   SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                   SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                   SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}">
                    <interkont:spacer height="3"/>
                    <center>
                        <h:panelGrid id="validardocumentacion" columns="3" >
                            <h:panelGrid>
                                <rich:panel header="#{var.resumendocumentosdili}" bodyClass="tool" >
                                    <h:panelGrid id="resuDocu" columns="1">
                                        <h:outputText  styleClass="ikont- hot-"   rendered="#{!SessionBeanCobra.solicitudService.solicitudObrach.boolcartaasumiradicionales}" value="#{var.cartaasumiradicionales}"/>

                                        <h:outputText  styleClass="ikont- hot-"   rendered="#{!SessionBeanCobra.solicitudService.solicitudObrach.booldeclaracionnosolicitudotraentidad}" value="#{var.declaracionnosolicitudotraentidad}"/>

                                        <h:outputText  styleClass="ikont- hot-"   rendered="#{!SessionBeanCobra.solicitudService.solicitudObrach.boolpresupuesto}" value="#{var.presupuesto}"/>

                                        <h:outputText  styleClass="ikont- hot-"   rendered="#{!SessionBeanCobra.solicitudService.solicitudObrach.boolviabilidadalasolicitud}" value="#{var.viabilidaddelasolicitud}"/>

                                        <h:outputText  styleClass="ikont- hot-"   rendered="#{!SessionBeanCobra.solicitudService.solicitudObrach.boolanexaactaclopadocrepad}" value="#{var.anexaactaclopadocrepad}"/>

                                        <h:outputText  styleClass="ikont- hot-"   rendered="#{!SessionBeanCobra.solicitudService.solicitudObrach.boolcartafirmada}" value="#{var.cartafirmada}"/>

                                        <h:outputText  styleClass="ikont- hot-"   rendered="#{SessionBeanCobra.solicitudService.solicitudObrach.boolcartafirmada and
                                                                  SessionBeanCobra.solicitudService.solicitudObrach.boolanexaactaclopadocrepad and
                                                                  SessionBeanCobra.solicitudService.solicitudObrach.boolviabilidadalasolicitud and
                                                                  SessionBeanCobra.solicitudService.solicitudObrach.boolpresupuesto and
                                                                  SessionBeanCobra.solicitudService.solicitudObrach.booldeclaracionnosolicitudotraentidad and
                                                                  SessionBeanCobra.solicitudService.solicitudObrach.boolcartaasumiradicionales}" value="#{var.totalidaddocumentos}"/>
                                    </h:panelGrid>
                                </rich:panel>
                            </h:panelGrid>
                            <h:panelGrid id="gestionaraprobacionjunta" columns="2" columnClasses="panelizquierda, panelizquierda" >

                                <h:outputText  styleClass="ikont- hot-"   value="#{var.definirestadodocumentacion}"/>
                                <h:panelGroup id="docucomple">
                                    <h:selectOneMenu id="selectestadodocumentacion"
                                                     disabled="true"
                                                     value="#{SessionBeanCobra.solicitudService.solicitudObrach.estadodocumentacion.intestadodocumentacion}">
                                        <f:selectItems value="#{SolicitudObra$GestionarSolicitudObra.estadodocumentacion}"/>
                                    </h:selectOneMenu>
                                </h:panelGroup>

                                <h:outputText  styleClass="ikont- hot-"   value="#{var.lasolicitudesviable}?"/>
                                <h:selectOneMenu id="solicitudviable"
                                                 disabled="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"
                                                 value="#{SessionBeanCobra.solicitudService.solicitudObrach.boolviabilidadalasolicitud}">
                                    <f:selectItem itemValue="true" itemLabel="Si"/>
                                    <f:selectItem itemValue="false" itemLabel="No"/>
                                </h:selectOneMenu>

                                <h:outputText  styleClass="ikont- hot-"   value="#{var.estadosolicitud}"/>
                                <h:panelGroup id="panelEstado" >
                                    <h:selectOneMenu id="comboestadosoli" value="#{SolicitudObra$GestionarSolicitudObra.valueestadosolich}"
                                                     disabled="true">
                                        <f:selectItems value="#{SolicitudObra$GestionarSolicitudObra.estadosolicitudch}" />
                                        <a4j:ajax event="change" render="gpsubestadosoli" listener="#{SolicitudObra$GestionarSolicitudObra.llenarSubestadosolicitud}" execute="@this"/>
                                    </h:selectOneMenu>
                                </h:panelGroup>
                                <h:outputText  styleClass="ikont- hot-"   value="#{var.subestadosolici}"/>
                                <h:panelGroup id="gpsubestadosoli">
                                    <h:selectOneMenu id="subestadosolicitud"
                                                     disabled="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                                 SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                                 SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"
                                                     value="#{SessionBeanCobra.solicitudService.solicitudObrach.subestadosolicitudch.intoidsubestadosolicitud}">
                                        <f:selectItems value="#{SolicitudObra$GestionarSolicitudObra.subestadosolicitudch}"/>
                                    </h:selectOneMenu>
                                </h:panelGroup>

                                <h:outputText  styleClass="ikont- hot-"   value="#{var.valoraprobado}"/>
                                <rich:inputNumberSpinner 
                                    minValue="0" disabled="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"
                                    maxValue="#{SessionBeanCobra.solicitudService.solicitudObrach.doublevalorsolicitado}" inputSize="10"
                                    value="#{SessionBeanCobra.solicitudService.solicitudObrach.doublevaloraprobado}">
                                </rich:inputNumberSpinner>

                                <h:outputText  styleClass="ikont- hot-"   value="#{var.estaenvisor}?"/>
                                <h:selectOneMenu id="estaenvisor"
                                                 disabled="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"
                                                 value="#{SessionBeanCobra.solicitudService.solicitudObrach.boolestaenvisor}">
                                    <f:selectItem itemValue="true" itemLabel="Si"/>
                                    <f:selectItem itemValue="false" itemLabel="No"/>
                                </h:selectOneMenu>

                                <h:outputText  styleClass="ikont- hot-"   value="#{var.observaciones}"/>
                                <h:inputTextarea disabled="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"
                                                 id="valoraprobado" rows="3"
                                                 value="#{SessionBeanCobra.solicitudService.solicitudObrach.textjustifica}"
                                                 cols="20" />

                                <h:outputText  styleClass="ikont- hot-"    value="#{var.fechajuntadirectiva}"/>
                                <rich:calendar locale="#{var.rcalendarlocale}" datePattern="yyyy-MM-dd"
                                               disabled="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                           SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                           SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"
                                               direction="topRight" id="fecjunta" inputSize="10" immediate="true"
                                               value="#{SessionBeanCobra.solicitudService.solicitudObrach.datefechajunta}">
                                </rich:calendar>


                                <h:outputText  styleClass="ikont- hot-"    value="#{var.actajuntadirectiva}"/>

                                <h:panelGrid id="panel_subirActa"  columns="6">

                                    <a4j:commandButton id="adjuntarActa" styleClass="ikont-"   value="#{var.examinar}" immediate="true" 
                                                       onclick="#{rich:component('panelUploadActa')}.show();">
                                    </a4j:commandButton>
                                    <h:outputText  styleClass="ikont- hot-"   id="txtActaRuta" value="#{var.rutadocumento}" />
                                    <h:inputText id="inputDescActa"
                                                 disabled="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"/>
                                    <a4j:commandLink id="bt_agregarActa" styleClass="ikont-"   title="#{var.agregar}"
                                                     render="panelAprobacionFuncionario,panelUploadActa"/>

                                </h:panelGrid>

                            </h:panelGrid>
                            <interkont:spacer width="20" />
                        </h:panelGrid>
                    </center>
                    <center>
                        <h:panelGrid columns="2">
                            <a4j:commandButton id="GuardaraprobacionL"
                                               oncomplete="#{rich:component('panelValidarSolicitud')}.show()" render="layoutGuardar"
                                               action="#{SolicitudObra$GestionarSolicitudObra.validaraprobacion}"
                                               value="#{var.guardar}" >
                            </a4j:commandButton>
                            <a4j:commandButton id="Cancelaraprobacioninfra" value="#{var.cancelar}"
                                               rendered="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 6}"
                                               action="cancelarSolicitud"/>
                        </h:panelGrid>
                    </center>
                </rich:collapsiblePanel>
                <interkont:spacer height="3"/>
                <rich:collapsiblePanel header="7. #{var.aprobaciondeldirector}" id="AprobacionDirector"  switchType="ajax" rendered="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                    SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                    SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}">

                    <interkont:spacer height="20"/>

                    <center>
                        <h:panelGrid id="panelAprobacion" columns="2" columnClasses="panelderecha, panelizquierda" >
                            <h:outputText  styleClass="ikont- hot-"   value="#{var.aprobar}"/>
                            <h:selectOneMenu id="aprobardirector"
                                             disabled="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                         SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"
                                             value="#{SessionBeanCobra.solicitudService.solicitudObrach.boolaprobado}">
                                <f:selectItem itemValue="true" itemLabel="Si"/>
                                <f:selectItem itemValue="false" itemLabel="No"/>
                            </h:selectOneMenu>

                            <h:outputText  styleClass="ikont- hot-"   value="#{var.observaciones}"/>
                            <h:inputTextarea id="observacionesaprobacion" rows="3" cols="43"
                                             value="#{SessionBeanCobra.solicitudService.solicitudObrach.textobservaciondeavance}"/>
                        </h:panelGrid>

                        <h:panelGrid id="pagos" columns="4">
                            <h:outputText  styleClass="ikont- hot-"   value="#{var.anticipopago} #{var.pago} 1"/>
                            <rich:inputNumberSpinner minValue="0" maxValue="100"
                                                     value="#{SolicitudObra$GestionarSolicitudObra.porpago1}" inputSize="3">
                                <a4j:ajax event="change" render="pagos" />
                            </rich:inputNumberSpinner>
                            <h:outputText  styleClass="ikont- hot-"   value="%"/>
                            <h:inputText size="20" disabled="true" maxlength="10"
                                         value="#{SolicitudObra$GestionarSolicitudObra.valorpago1}"/>

                            <h:outputText  styleClass="ikont- hot-"   value="#{var.pago} 2"/>
                            <rich:inputNumberSpinner minValue="0" maxValue="100"
                                                     value="#{SolicitudObra$GestionarSolicitudObra.porpago2}" inputSize="3">
                                <a4j:ajax event="change" render="pagos" />
                            </rich:inputNumberSpinner>
                            <h:outputText  styleClass="ikont- hot-"   value="%"/>
                            <h:inputText size="20" disabled="true" maxlength="10"
                                         value="#{SolicitudObra$GestionarSolicitudObra.valorpago2}"/>

                            <h:outputText  styleClass="ikont- hot-"   value="#{var.pago} 3"/>
                            <rich:inputNumberSpinner minValue="0" maxValue="100"
                                                     value="#{SolicitudObra$GestionarSolicitudObra.porpago3}" inputSize="3">
                                <a4j:ajax event="change" render="pagos" />
                            </rich:inputNumberSpinner>
                            <h:outputText  styleClass="ikont- hot-"   value="%"/>
                            <h:inputText size="20" disabled="true" maxlength="10"
                                         value="#{SolicitudObra$GestionarSolicitudObra.valorpago3}"/>
                        </h:panelGrid>
                    </center>
                    <center>
                        <h:panelGrid columns="2">
                            <a4j:commandButton id="guardadirect"
                                               rendered="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 7}"
                                               action="#{SolicitudObra$GestionarSolicitudObra.validardirectinfra}"
                                               value="#{var.guardar}">
                                <a4j:ajax event="complete" render="layoutGuardar" oncomplete="#{rich:component('panelValidarSolicitud')}.show()"/>
                            </a4j:commandButton>
                            <a4j:commandButton styleClass="ikont-"   value="#{var.cancelar}"
                                               rendered="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 7}"/>
                        </h:panelGrid>
                    </center>
                </rich:collapsiblePanel>
                <interkont:spacer height="3"/>
                <rich:collapsiblePanel header="8. #{var.gestionarordenpago}" id="GestionarOrdenPago"  switchType="ajax" rendered="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                    SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}">

                    <interkont:spacer height="3"/>
                    <center>

                        <h:panelGrid id="panelGestionarOrden" columns="3" columnClasses="panelizquierda, panelizquierda" >

                            <h:outputLabel  styleClass="ikont-hol- "   id="lblCarta"  value="#{var.anexarcarta}" for="txtCarta"/>
                            <h:inputText size="40" id="txtCarta" readonly="true"  />
                            <a4j:commandButton id="btOrden" value="#{var.examinar}" immediate="true"
                                               />

                            <h:outputText  styleClass="ikont- hot-"    value="#{var.fechadecarta}"/>
                            <interkont:spacer width="95"/>
                            <rich:calendar locale="#{var.rcalendarlocale}" datePattern="yyyy-MM-dd" 
                                           direction="topRight" id="fecorden" inputSize="10"
                                           value="#{SessionBeanCobra.solicitudService.ordendepago.datefechaordenpago}"
                                           immediate="true">
                            </rich:calendar>

                            <h:outputText  styleClass="ikont- hot-"   value="#{var.observaciones}"/>
                            <interkont:spacer width="95"/>
                            <h:inputTextarea id="observacionesOrden" rows="3" cols="43" value="#{SessionBeanCobra.solicitudService.ordendepago.strdescripcionordenpago}" />

                        </h:panelGrid>
                    </center>
                    <center>
                        <h:panelGrid columns="2">
                            <a4j:commandButton id="guardaorden"                                                                          
                                               action="#{SolicitudObra$GestionarSolicitudObra.guardarOrdenPago}"
                                               value="#{var.guardar}">
                                <a4j:ajax event="complete" render="layoutGuardar" oncomplete="#{rich:component('panelValidarSolicitud')}.show();"/>
                            </a4j:commandButton>
                            <a4j:commandButton id="CancelarOrden" styleClass="ikont-"   value="#{var.cancelar}"/>
                        </h:panelGrid>
                    </center>
                </rich:collapsiblePanel>
                <interkont:spacer height="3"/>
                <rich:collapsiblePanel header="9. #{var.aprobacionfinanciera}" id="AprobacionFinanciera"  switchType="ajax" rendered="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}">

                    <interkont:spacer height="3"/>

                    <center>
                        <h:panelGrid id="panelAprobacionFinanciera" columns="2" columnClasses="panelizquierda, panelizquierda" >

                            <h:outputText  styleClass="ikont- hot-"    value="#{var.fechaapertura}"/>
                            <rich:calendar locale="#{var.rcalendarlocale}" datePattern="yyyy-MM-dd" direction="topRight" id="fecInfo" inputSize="10" immediate="true">
                                <a4j:ajax  event="changed" onbeforesubmit="#{rich:component('panelCargando')}.show();">
                                    <a4j:ajax event="complete" onbeforesubmit="#{rich:component('panelCargando')}.hide();"/>
                                </a4j:ajax>
                            </rich:calendar>

                            <h:outputLabel  styleClass="ikont-hol- "   id="lblEncargo"  value="#{var.encargofiduciario}" for="txtEncargo"/>
                            <h:panelGroup>
                                <h:inputText size="10" id="txtEncargo" readonly="true"  />

                                <a4j:commandButton id="btCarta" value="#{var.crear}" immediate="true"
                                                   oncomplete="#{rich:component('panelCrearEncargo')}.show();"
                                                   />
                            </h:panelGroup>

                            <h:outputText  styleClass="ikont- hot-"   value="#{var.numeroencargo}"/>
                            <h:inputText id="numeroencargo" size="10"/>

                            <h:outputText  styleClass="ikont- hot-"   value="#{var.valorordendepago}"/>
                            <h:inputText id="valorordenpago" size="10"/>
                        </h:panelGrid>

                        <h:panelGrid columns="3" columnClasses="panelderecha, panelizquierda">
                            <h:outputText  styleClass="ikont- hot-"   value="#{var.observaciones}"/>
                            <interkont:spacer width="50"/>
                            <h:inputTextarea id="observaciones" rows="3" cols="25" />
                        </h:panelGrid>
                    </center>
                    <center>
                        <h:panelGrid columns="2">
                            <a4j:commandButton id="registraraprobacionAH" styleClass="ikont-"   value="#{var.registraraprobacion}"/>
                            <a4j:commandButton id="CancelaraprobacionAH" styleClass="ikont-"   value="#{var.cancelar}"/>

                        </h:panelGrid>
                    </center>


                </rich:collapsiblePanel>
            </rich:panel>
            <ui:include src="/modal/modalsolicitudobra/validarsolicitud.xhtml"/>
        </h:form>
        <ui:include src="/modal/modalsolicitudobra/enviarsolicitud.xhtml"/>
        <ui:include src="/modal/modalsolicitudobra/busquedaavanzada.xhtml"/>
        <ui:include src="/modal/modalsolicitudobra/subirImagenSolicitud.xhtml"/>
        <ui:include src="/modal/modalsolicitudobra/subirActaJuntaSolicitud.xhtml"/>
        <ui:include src="/modal/modalsolicitudobra/panelUploadDocumentoSolicitud.xhtml"/>
        <ui:include src="/modal/modalsolicitudobra/informacionentidadsolicitud.xhtml"/>

    </ui:define>
</ui:composition>





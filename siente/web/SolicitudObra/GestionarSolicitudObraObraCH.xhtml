<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="/facelets/template_main.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:a4j="http://richfaces.org/a4j"
                xmlns:interkont="http://www.interkont.com/jsf"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:rich="http://richfaces.org/rich"
                xmlns:ui="http://java.sun.com/jsf/facelets">

    <ui:define name="head">
        <title>Solicitud Obra</title>
        <h:outputScript name="script_supervisor.js"/>
    </ui:define>
    <ui:define name="title">
        <h:outputText value="#{var.gestionarsolicitudobra}"/>
    </ui:define>
    <ui:define name="menu">
        <ui:include src="/facelets/menu_soliobra.xhtml"/>
    </ui:define>
    <ui:define name="menu_lateral">
        <ui:include src="/facelets/menu_lateral_soliobra.xhtml"/>
    </ui:define>
    <ui:define name="body">
        <h:form>
            <rich:panel header="#{var.consultasol}">

                <interkont:spacer height="3"/>

                <rich:collapsiblePanel switchType="ajax" id="datossol" style="width:100%;">
                    <f:facet name="header">
                        <h:outputText value="1. #{var.datossol}"/>
                    </f:facet>

                    <center>
                        <h:panelGroup>

                            <h:panelGrid columns="5" cellspacing="15">
                                <h:outputText value="#{var.entidad}"/>
                                <a4j:commandButton id="entidadbutton" value="#{var.ver}" immediate="true"
                                                   oncomplete="#{rich:component('panelInformacionEntidad')}.show();"
                                                   style="font-size:12px;"/>

                                <interkont:spacer width="20"/>

                                <h:outputText value="#{var.contacto}"/>
                                <a4j:commandButton id="contactobutton" value="#{var.ver}" immediate="true"
                                                   oncomplete="#{rich:component('panelinformacioncontacto')}.hide();"
                                                   style="font-size:12px;"/>

                                <h:outputText value="#{var.nombreContratista}:"/>
                                <h:outputText id="nombre" value="#{SessionBeanCobra.usuarioObra.tercero.strnombre} #{SessionBeanCobra.usuarioObra.tercero.strapellido1} #{SessionBeanCobra.usuarioObra.tercero.strapellido2}"/>
                            </h:panelGrid>

                        </h:panelGroup>
                    </center>

                </rich:collapsiblePanel>
                <interkont:spacer height="3"/>
                <rich:collapsiblePanel switchType="ajax" id="datosgenerales" style="width:100%;">
                    <f:facet name="header">
                        <h:outputText value="2. #{var.datosgenerales}"/>
                    </f:facet>
                    <center>
                        <h:panelGroup>
                            <center>
                                <h:outputText value="#{var.textdatosgenerales}"/>
                            </center>
                            <h:panelGrid columns="2" cellspacing="15" >
                                <interkont:spacer width="1" rendered="#{!SolicitudObra$GestionarSolicitudObra.deshabilitardepartamentos}"/>
                                <h:outputLabel value="#{SessionBeanCobra.usuarioService.usuarioObra.tercero.tipoOrigen.strnombre}" rendered="#{!SolicitudObra$GestionarSolicitudObra.deshabilitardepartamentos}"/>

                                <h:outputText value="#{var.departamento}" rendered="#{SolicitudObra$GestionarSolicitudObra.verdepartamento}"/>
                                <h:selectOneMenu id="combodepto" value="#{SolicitudObra$GestionarSolicitudObra.codDepartamento}"
                                                 disabled="#{SolicitudObra$GestionarSolicitudObra.deshabilitardepartamentos}" rendered="#{SolicitudObra$GestionarSolicitudObra.verdepartamento}">
                                    <f:selectItems value="#{SolicitudObra$GestionarSolicitudObra.departamento}" />
                                    <a4j:ajax event="onchange" render="gpmunicipio" action="#{SolicitudObra$GestionarSolicitudObra.llenarMunicipios}" execute="@this"/>
                                </h:selectOneMenu>

                                <h:outputText value="#{var.municipio}"/>
                                <h:panelGroup id="gpmunicipio">
                                    <h:outputLabel value="#{SolicitudObra$GestionarSolicitudObra.codMunicipio}" rendered="#{!SolicitudObra$GestionarSolicitudObra.verdepartamento}"/>
                                    <h:selectOneMenu value="#{SessionBeanCobra.solicitudService.solicitudObrachD.localidad.strcodigolocalidad}"
                                                     disabled="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 6 ||
                                                                 SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                                 SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                                 SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"
                                                     rendered="#{SolicitudObra$GestionarSolicitudObra.verdepartamento}">
                                        <f:selectItems value="#{SolicitudObra$GestionarSolicitudObra.municipio}"/>
                                    </h:selectOneMenu>
                                </h:panelGroup>

                                <h:outputText value="#{var.consecutivo}"
                                              rendered="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 6 ||
                                                          SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                          SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                          SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}" />
                                <h:inputText size="8" id="consecutivo" disabled="true"
                                             value="#{SessionBeanCobra.solicitudService.solicitudObrachD.strconsecutivo}"
                                             rendered="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 6 ||
                                                         SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                         SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                         SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}" />

                                <h:outputText value="#{var.evento}"/>
                                <h:selectOneMenu id="selectevnto" value="#{SolicitudObra$GestionarSolicitudObra.eventovalue}"
                                                 disabled="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 6 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}">
                                    <f:selectItems value="#{SolicitudObra$GestionarSolicitudObra.evento}"/>
                                    <a4j:ajax event="onchange" render="pgperiodoevento" action="#{SolicitudObra$GestionarSolicitudObra.llenarPeriodoEvento}"
                                              execute="@this"/>
                                </h:selectOneMenu>

                                <h:outputText value="#{var.periodo}"/>
                                <h:panelGroup id="pgperiodoevento">
                                    <h:selectOneMenu id="selectperiodoevento"
                                                     disabled="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 6 ||
                                                                 SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                                 SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                                 SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}">
                                        <f:selectItems value="#{SolicitudObra$GestionarSolicitudObra.periodoevento}"/>
                                    </h:selectOneMenu>
                                </h:panelGroup>

                                <h:outputText value="#{var.fechasol}"/>
                                <rich:calendar locale="#{var.rcalendarlocale}"
                                               datePattern="yyyy-MM-dd"
                                               disabled="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 6 ||
                                                           SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                           SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                           SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"
                                               direction="top-right" id="date_sol"
                                               value="#{SessionBeanCobra.solicitudService.solicitudObrachD.datefecharecibido}"
                                               inputSize="10">
                                </rich:calendar>

                                <h:outputText value="#{var.nomsol}"/>
                                <h:inputText size="20" id="nomsol"
                                             value="#{SessionBeanCobra.solicitudService.solicitudObrachD.strnombresolicitud}"
                                             disabled="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 6 ||
                                                         SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                         SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                         SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"/>

                                <h:outputText value="#{var.tiposol}"/>
                                <h:selectOneMenu id="selecttiposolicitudobra"
                                                 disabled="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 6 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"
                                                 value="#{SessionBeanCobra.solicitudService.solicitudObrachD.tiposolicitudobra.inttiposolicitud}">
                                    <f:selectItems value="#{SolicitudObra$GestionarSolicitudObra.tiposolicitudobra}"/>
                                </h:selectOneMenu>

                                <h:outputText value="#{var.tipoobra}"/>
                                <h:selectOneMenu id="selecttipoobra"
                                                 disabled="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 6 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"
                                                 value="#{SessionBeanCobra.solicitudService.solicitudObrachD.tipoobra.inttipoobra}">
                                    <f:selectItems value="#{SolicitudObra$GestionarSolicitudObra.tipoobra}"/>
                                </h:selectOneMenu>

                                <h:outputText value="#{var.incluyeint}"/>
                                <h:selectOneMenu id="incluyeinterventoria"
                                                 disabled="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 6 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"
                                                 value="#{SessionBeanCobra.solicitudService.solicitudObrachD.boolincluyeinterventoria}">
                                    <f:selectItem itemValue="true" itemLabel="Si"/>
                                    <f:selectItem itemValue="false" itemLabel="No"/>
                                </h:selectOneMenu>

                                <h:outputText value="#{var.objetosolicitud}"/>
                                <h:inputTextarea id="txtobjetosolicitud" cols="30" rows="3"
                                                 disabled="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 6 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"
                                                 value="#{SessionBeanCobra.solicitudService.solicitudObrachD.textobservaciones}">
                                    <rich:message styleClass="mensaje_error" for="txtobjetosolicitud"/>
                                </h:inputTextarea>

                                <h:outputText value="#{var.vlrsolicittud}"/>
                                <rich:inputNumberSpinner minValue="0" maxValue="5000000000" inputSize="10"
                                                         disabled="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 6 ||
                                                                     SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                                     SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                                     SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"
                                                         value="#{SessionBeanCobra.solicitudService.solicitudObrachD.doublevalorsolicitado}"/>

                                <h:outputText value="#{var.defprioridad}"/>
                                <h:selectOneMenu id="selecprioridad"
                                                 disabled="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 6 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"
                                                 value="#{SessionBeanCobra.solicitudService.solicitudObrachD.intordenprioridad}">
                                    <f:selectItem itemValue="1" itemLabel="1"/>
                                    <f:selectItem itemValue="2" itemLabel="2"/>
                                    <f:selectItem itemValue="3" itemLabel="3"/>
                                    <f:selectItem itemValue="4" itemLabel="4"/>
                                    <f:selectItem itemValue="5" itemLabel="5"/>
                                    <f:selectItem itemValue="6" itemLabel="6"/>
                                    <f:selectItem itemValue="7" itemLabel="7"/>
                                    <f:selectItem itemValue="8" itemLabel="8"/>
                                    <f:selectItem itemValue="9" itemLabel="9"/>
                                    <f:selectItem itemValue="10" itemLabel="10"/>
                                </h:selectOneMenu>

                                <h:panelGroup>
                                    <center>
                                        <a4j:commandButton value="#{var.guardar}"
                                                           rendered="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 5}"
                                                           action="#{SolicitudObra$GestionarSolicitudObra.validargurdado}">
                                            <a4j:ajax event="oncomplete"  render="layoutGuardar" oncomplete="#{rich:component('panelValidarSolicitud')}.show()"/>
                                        </a4j:commandButton>
                                        <a4j:commandButton value="#{var.cancelar}"
                                                           rendered="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 5}"
                                                           action="cancelarSolicitud" immediate="true"/>
                                    </center>
                                </h:panelGroup>
                            </h:panelGrid>

                        </h:panelGroup>
                    </center>

                </rich:collapsiblePanel>

                <rich:collapsiblePanel switchType="ajax" id="gpDatosBasicos" style="width:100%;">
                    <f:facet name="header">
                        <h:outputText value="3. #{var.imagenes}"/>
                    </f:facet>
                    <center>
                        <h:outputText value="#{var.textsubirimagen}"/>
                        <interkont:spacer height="3"/>
                        <h:panelGrid id="panel_subirImagen"  columns="6" columnClasses=",,,,buttonsmall" rendered="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 5}">

                            <a4j:commandButton id="adjuntarImagen" styleClass="btn_sec_gra" value="#{var.examinar}" immediate="true"
                                               onclick="#{rich:component('panelUploadImagenSolicitud')}.show();">
                            </a4j:commandButton>
                            <interkont:spacer height="3"/>
                            <h:outputText id="ImagenAtencion" value="#{var.descripcionImagen}:"/>
                            <h:inputText id="inputNombre" value="#{SessionBeanCobra.solicitudService.imagensolicitud.strdescripcion}"/>
                            <a4j:commandLink id="bt_agregarImagen" styleClass="anadir anchorLink" title="#{var.agregar}"
                                             action="#{SolicitudObra$GestionarSolicitudObra.subirImagenaLista}"
                                             render="tablaImagenes,gpDatosBasicos,panelUploadImagenSolicitud"/>
                            <rich:dataGrid columns="1" rowKeyVar="row" value="#{SolicitudObra$GestionarSolicitudObra.subirImagenSolicitud.files}" var="file" width="30px">
                                <h:outputText id="otxt_nombreImagen" value=" #{file.onlyName}"/>
                            </rich:dataGrid>
                        </h:panelGrid>

                        <h:panelGroup>
                            <rich:dataTable id="tablaImagenes" value="#{SessionBeanCobra.solicitudService.imagensolicituds}"
                                            rowKeyVar="filaSeleccionada" var="currentRow" style="width:100%;" rows="3" >
                                <f:facet name="header">
                                    <h:outputText value="#{var.imgseleccionadas}"/>
                                </f:facet>
                                <rich:column breakRowBefore="true" style="text-align:center;" width="100px">
                                    <f:facet name="header" >
                                        <h:outputText value="#{var.descripcionImagen}"/>
                                    </f:facet>
                                    <h:outputText value="#{currentRow.strdescripcion}"/>
                                </rich:column>
                                <rich:column style="text-align:center;" width="100px">
                                    <f:facet name="header">
                                        <h:outputText value="#{var.imagen}"/>
                                    </f:facet>
                                    <center>
                                        <a4j:commandLink render="panelImagenAten">
                                            <h:graphicImage value="#{currentRow.strurlimagen}" />
                                            <rich:jQuery selector="#Imagen img" query="addClass('pic-normal')"/>
                                            <rich:jQuery selector="#Imagen img" query="wrap('&lt;div class=\'wrap1\'&gt;&lt;/div&gt;')" />
                                            <rich:jQuery selector="#Imagen img" query="mouseover(function(){enlargePic(this)})"/>
                                            <rich:jQuery selector="#Imagen img" query="mouseout(function(){normalPic(this)})"/>
                                            <rich:jQuery name="enlargePic" timing="onJScall" query="stop().animate({width:'150px', height:'150px' })" />
                                            <rich:jQuery name="normalPic" timing="onJScall" query="stop().animate({width:'120px', height:'120px'})" />
                                        </a4j:commandLink>
                                    </center>
                                </rich:column>
                                <rich:column style="text-align:center;" width="60px">
                                    <f:facet name="header">
                                        <h:outputText value="#{var.eliminar}"/>
                                    </f:facet>
                                    <a4j:commandButton id="eliminar" value="#{var.eliminar}" render="tablaImagenes"
                                                       action="#{SolicitudObra$GestionarSolicitudObra.eliminarImagenLista(filaSeleccionada)}"/>
                                </rich:column>
                                <f:facet name="footer">
                                    <rich:dataScroller renderIfSinglePage="false" />
                                </f:facet>
                            </rich:dataTable>
                        </h:panelGroup>

                    </center>

                </rich:collapsiblePanel>

                <rich:collapsiblePanel switchType="ajax" id="gpDatosBasicos1" style="width:100%;">
                    <f:facet name="header">
                        <h:outputText value="4. #{var.nombredoc}"/>
                    </f:facet>
                    <center>
                        <h:outputText value="#{var.textsubirdoc}"/>
                        <interkont:spacer height="3"/>
                        <h:panelGrid id="panel_subir"  columns="6" columnClasses=",,,,,buttonsmall">

                            <a4j:commandButton id="adjuntarDocumento" styleClass="btn_sec_gra" value="#{var.examinar}" immediate="true" style="font-size: 10px;"
                                               onclick="#{rich:component('panelUploadDocumento')}.hide();">
                            </a4j:commandButton>
                            <h:outputText id="Documento" value="#{var.descipcionDocumento}"/>
                            <h:inputText id="inputDescDocument" value="#{SessionBeanCobra.solicitudService.documentosolicitud.strdescripcion}"/>
                            <h:outputText  id="tiposol"  value="#{var.tipoDocumento}"/>
                            <h:selectOneMenu id="selecttipodocumento" value="#{SolicitudObra$GestionarSolicitudObra.tipodoc}">
                                <f:selectItems value="#{SolicitudObra$GestionarSolicitudObra.tipodocumento}"/>
                            </h:selectOneMenu>
                            <a4j:commandLink id="bt_agregar" styleClass="anadir anchorLink" title="#{var.agregar}"
                                             action="#{SolicitudObra$GestionarSolicitudObra.subirDocumentoaLista}"
                                             render="tablaDocumentos,gpDatosBasicos1,panelUploadDocumento">
                                <a4j:ajax event="oncomplete" listener="#{SolicitudObra$GestionarSolicitudObra.validardocumentacion}">
                                    <a4j:ajax event="oncomplete" render="resuDocu, docucomple"/>
                                </a4j:ajax>
                            </a4j:commandLink>
                            <rich:dataGrid columns="1" rowKeyVar="row" value="#{SolicitudObra$GestionarSolicitudObra.subirDocumentoSolicitud.files}" var="file" width="30px">
                                <h:outputText id="otxt_nombrearchivo" value=" #{file.onlyName}"/>
                            </rich:dataGrid>

                        </h:panelGrid>

                        <rich:dataTable id="tablaDocumentos"  sortMode="single" style="text-align:left;width:100%;"  var="currentRow" 
                                        rowKeyVar="filaSeleccionada" rows="7"
                                        value="#{SessionBeanCobra.solicitudService.documentosolicituds}">
                            <f:facet name="header" >
                                <rich:columnGroup >
                                    <rich:column colspan="5">
                                        <h:outputText value="#{var.docseleccionados}"/>
                                    </rich:column>
                                    <rich:column breakRowBefore="true">
                                        <h:outputText value="#{var.tipoDocumento}"/>
                                    </rich:column>
                                    <rich:column>
                                        <h:outputText value="#{var.descipcionDocumento}"/>
                                    </rich:column>
                                    <rich:column>
                                        <h:outputText value="#{var.eliminar}"/>
                                    </rich:column>
                                </rich:columnGroup>
                            </f:facet>
                            <rich:column>
                                <h:outputText value="#{currentRow.tipodocumentosolicitud.strdesctipodocsol}" />
                            </rich:column>
                            <rich:column>
                                <h:outputText value="#{currentRow.strdescripcion}"/>
                            </rich:column>
                            <rich:column >
                                <a4j:commandButton id="eliminardoc" value="#{var.eliminar}" render="tablaDocumentos"
                                                   action="#{SolicitudObra$GestionarSolicitudObra.eliminarDocumentoLista(filaSeleccionada)}">
                                </a4j:commandButton>
                            </rich:column>
                            <f:facet name="footer">
                                <rich:columnGroup>
                                    <rich:column colspan="4" breakRowBefore="true" style="text-align: center;">
                                        <rich:dataScroller id="scrolltablaDocumentos" for="tablaDocumentos" render="tablaDocumentos"/>
                                    </rich:column>
                                </rich:columnGroup>
                            </f:facet>
                        </rich:dataTable>
                    </center>
                </rich:collapsiblePanel>
                <interkont:spacer height="3"/>
                <rich:collapsiblePanel switchType="ajax" id="gpDatosBasicos2" style="width:100%;">
                    <f:facet name="header">
                        <h:outputText value="5. #{var.nombrevideo}"/>
                    </f:facet>

                    <center>
                        <h:outputText value="#{var.textsubirvideo}"/>
                        <interkont:spacer height="3"/>
                        <h:panelGrid columns="5" columnClasses=",,,buttonsmall,,">
                            <a4j:commandButton id="examinarvideo" value="#{var.examinar}"/>
                            <h:outputText value="#{var.nombrevideo}"/>
                            <h:inputText size="10" id="nombrevideo" disabled="true"/>
                            <a4j:commandLink styleClass="anadir anchorLink"/>
                        </h:panelGrid>
                    </center>

                </rich:collapsiblePanel>
                <interkont:spacer height="3"/>
                <rich:collapsiblePanel id="AprobacionInfraestructura" style="width:100%;" switchType="true"
                                       rendered="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 6 ||
                                                   SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                   SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                   SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}">

                    <f:facet name="header">
                        <h:outputText value="6. #{var.aprobaciondelfuncionario}"/>
                    </f:facet>
                    <interkont:spacer height="3"/>
                    <center>
                        <h:panelGrid id="validardocumentacion" columns="3" style="width:100%;">
                            <h:panelGrid>
                                <rich:panel header="#{var.resumendocumentosdili}" bodyClass="tool" style="border-style: none;">
                                    <h:panelGrid id="resuDocu" columns="1">
                                        <h:outputText rendered="#{!SessionBeanCobra.solicitudService.solicitudObrachD.boolcartaasumiradicionales}" value="#{var.cartaasumiradicionales}"/>

                                        <h:outputText rendered="#{!SessionBeanCobra.solicitudService.solicitudObrachD.booldeclaracionnosolicitudotraentidad}" value="#{var.declaracionnosolicitudotraentidad}"/>

                                        <h:outputText rendered="#{!SessionBeanCobra.solicitudService.solicitudObrachD.boolpresupuesto}" value="#{var.presupuesto}"/>

                                        <h:outputText rendered="#{!SessionBeanCobra.solicitudService.solicitudObrachD.boolviabilidadalasolicitud}" value="#{var.viabilidaddelasolicitud}"/>

                                        <h:outputText rendered="#{!SessionBeanCobra.solicitudService.solicitudObrachD.boolanexaactaclopadocrepad}" value="#{var.anexaactaclopadocrepad}"/>

                                        <h:outputText rendered="#{!SessionBeanCobra.solicitudService.solicitudObrachD.boolcartafirmada}" value="#{var.cartafirmada}"/>

                                        <h:outputText rendered="#{SessionBeanCobra.solicitudService.solicitudObrachD.boolcartafirmada and
                                                                  SessionBeanCobra.solicitudService.solicitudObrachD.boolanexaactaclopadocrepad and
                                                                  SessionBeanCobra.solicitudService.solicitudObrachD.boolviabilidadalasolicitud and
                                                                  SessionBeanCobra.solicitudService.solicitudObrachD.boolpresupuesto and
                                                                  SessionBeanCobra.solicitudService.solicitudObrachD.booldeclaracionnosolicitudotraentidad and
                                                                  SessionBeanCobra.solicitudService.solicitudObrachD.boolcartaasumiradicionales}" value="#{var.totalidaddocumentos}"/>
                                    </h:panelGrid>
                                </rich:panel>
                            </h:panelGrid>
                            <h:panelGrid id="gestionaraprobacionjunta" columns="2" columnClasses="panelizquierda, panelizquierda" >

                                <h:outputText value="#{var.definirestadodocumentacion}"/>
                                <h:panelGroup id="docucomple">
                                    <h:selectOneMenu id="selectestadodocumentacion"
                                                     disabled="true"
                                                     value="#{SessionBeanCobra.solicitudService.solicitudObrachD.estadodocumentacion.intestadodocumentacion}">
                                        <f:selectItems value="#{SolicitudObra$GestionarSolicitudObra.estadodocumentacion}"/>
                                    </h:selectOneMenu>
                                </h:panelGroup>

                                <h:outputText value="#{var.lasolicitudesviable}?"/>
                                <h:selectOneMenu id="solicitudviable"
                                                 disabled="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"
                                                 value="#{SessionBeanCobra.solicitudService.solicitudObrachD.boolviabilidadalasolicitud}">
                                    <f:selectItem itemValue="true" itemLabel="Si"/>
                                    <f:selectItem itemValue="false" itemLabel="No"/>
                                </h:selectOneMenu>

                                <h:outputText value="#{var.estadosolicitud}"/>
                                <h:selectOneMenu id="comboestadosoli" value="#{SolicitudObra$GestionarSolicitudObra.valueestadosolich}"
                                                 disabled="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}">
                                    <f:selectItems value="#{SolicitudObra$GestionarSolicitudObra.estadosolicitudch}" />
                                    <a4j:ajax event="onchange" render="gpsubestadosoli" action="#{SolicitudObra$GestionarSolicitudObra.llenarSubestadosolicitud}" execute="@this"/>
                                </h:selectOneMenu>

                                <h:outputText value="#{var.subestadosolici}"/>
                                <h:panelGroup id="gpsubestadosoli">
                                    <h:selectOneMenu id="subestadosolicitud"
                                                     disabled="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                                 SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                                 SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"
                                                     value="#{SessionBeanCobra.solicitudService.solicitudObrachD.subestadosolicitudch.intoidsubestadosolicitud}">
                                        <f:selectItems value="#{SolicitudObra$GestionarSolicitudObra.subestadosolicitudch}"/>
                                    </h:selectOneMenu>
                                </h:panelGroup>

                                <h:outputText value="#{var.valoraprobado}"/>
                                <rich:inputNumberSpinner
                                    minValue="0" disabled="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"
                                    maxValue="5000000000" inputSize="10"
                                    value="#{SessionBeanCobra.solicitudService.solicitudObrachD.doublevaloraprobado}">
                                </rich:inputNumberSpinner>

                                <h:outputText value="#{var.estaenvisor}?"/>
                                <h:selectOneMenu id="estaenvisor"
                                                 disabled="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"
                                                 value="#{SessionBeanCobra.solicitudService.solicitudObrachD.boolestaenvisor}">
                                    <f:selectItem itemValue="true" itemLabel="Si"/>
                                    <f:selectItem itemValue="false" itemLabel="No"/>
                                </h:selectOneMenu>

                                <h:outputText value="#{var.observaciones}"/>
                                <h:inputTextarea disabled="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"
                                                 id="valoraprobado" rows="3"
                                                 value="#{SessionBeanCobra.solicitudService.solicitudObrachD.textjustifica}"
                                                 cols="20" />

                                <h:outputText  value="#{var.fechajuntadirectiva}"/>
                                <rich:calendar locale="#{var.rcalendarlocale}" datePattern="yyyy-MM-dd"
                                               disabled="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                           SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                           SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"
                                               direction="top-right" id="fecjunta" inputSize="10" immediate="true"
                                               value="#{SessionBeanCobra.solicitudService.solicitudObrachD.datefechajunta}">
                                </rich:calendar>

                                <h:outputText  value="#{var.actajuntadirectiva}"/>
                                <h:panelGroup>
                                    <a4j:commandButton id="examinarjunta" value="#{var.examinar}" >
                                    </a4j:commandButton>
                                    <h:inputText id="actajunta"
                                                 disabled="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                             SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"/>
                                </h:panelGroup>

                            </h:panelGrid>
                            <interkont:spacer width="20" />
                        </h:panelGrid>
                    </center>
                    <center>
                        <h:panelGrid columns="2">
                            <a4j:commandButton id="GuardaraprobacionL"
                                               action="#{SolicitudObra$GestionarSolicitudObra.validaraprobacion}"
                                               rendered="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 6}"
                                               value="#{var.guardar}" >
                                <a4j:ajax event="oncomplete"  render="layoutGuardar" oncomplete=" #{rich:component('panelValidarSolicitud')}.show()"/>
                            </a4j:commandButton>
                            <a4j:commandButton id="Cancelaraprobacioninfra" value="#{var.cancelar}"
                                               rendered="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 6}"
                                               action="cancelarSolicitud"/>
                        </h:panelGrid>
                    </center>
                </rich:collapsiblePanel>
                <interkont:spacer height="3"/>
                <rich:collapsiblePanel id="AprobacionDirector" style="width:100%;" switchType="true" rendered="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 7 ||
                                                                                                                 SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                                                                                 SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}">
                    <f:facet name="header">
                        <h:outputText value="7. #{var.aprobaciondeldirector}"/>
                    </f:facet>
                    <interkont:spacer height="20"/>

                    <center>
                        <h:panelGrid id="panelAprobacion" columns="2" columnClasses="panelderecha, panelizquierda" >
                            <h:outputText value="#{var.aprobar}"/>
                            <h:selectOneMenu id="aprobardirector"
                                             disabled="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                         SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"
                                             value="#{SessionBeanCobra.solicitudService.solicitudObrachD.boolaprobado}">
                                <f:selectItem itemValue="true" itemLabel="Si"/>
                                <f:selectItem itemValue="false" itemLabel="No"/>
                            </h:selectOneMenu>

                            <h:outputText value="#{var.observaciones}"/>
                            <h:inputTextarea id="observacionesaprobacion"
                                             disabled="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                         SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"
                                             rows="3" cols="43" />
                        </h:panelGrid>

                        <h:panelGrid id="pagos" columns="4">
                            <h:outputText value="#{var.anticipopago} #{var.pago} 1"/>
                            <rich:inputNumberSpinner minValue="0" maxValue="100"
                                                     disabled="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                                 SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"
                                                     value="#{SolicitudObra$GestionarSolicitudObra.porpago1}" inputSize="3">
                                <a4j:ajax event="onchange" render="pagos" />
                            </rich:inputNumberSpinner>
                            <h:outputText value="%"/>
                            <h:inputText size="20" disabled="true" maxlength="10"
                                         value="#{SolicitudObra$GestionarSolicitudObra.value1}"/>

                            <h:outputText value="#{var.pago} 2"/>
                            <rich:inputNumberSpinner minValue="0" maxValue="100"
                                                     disabled="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                                 SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"
                                                     value="#{SolicitudObra$GestionarSolicitudObra.porpago2}" inputSize="3">
                                <a4j:ajax event="onchange" render="pagos" />
                            </rich:inputNumberSpinner>
                            <h:outputText value="%"/>
                            <h:inputText size="20" disabled="true" maxlength="10"
                                         value="#{SolicitudObra$GestionarSolicitudObra.value2}"/>

                            <h:outputText value="#{var.pago} 3"/>
                            <rich:inputNumberSpinner minValue="0" maxValue="100"
                                                     disabled="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                                 SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}"
                                                     value="#{SolicitudObra$GestionarSolicitudObra.porpago3}" inputSize="3">
                                <a4j:ajax event="onchange" render="pagos" />
                            </rich:inputNumberSpinner>
                            <h:outputText value="%"/>
                            <h:inputText size="20" disabled="true" maxlength="10"
                                         value="#{SolicitudObra$GestionarSolicitudObra.value3}"/>
                        </h:panelGrid>
                    </center>
                    <center>
                        <h:panelGrid columns="2">
                            <a4j:commandButton styleClass="btn_pri_inm"
                                               rendered="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 7}"
                                               action="#{SolicitudObra$GestionarSolicitudObra.guardardirectinfra}"
                                               value="#{var.guardar}"/>
                            <a4j:commandButton styleClass="btn_pri_inm" value="#{var.cancelar}"
                                               rendered="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 7}"/>
                        </h:panelGrid>
                    </center>
                </rich:collapsiblePanel>
                <interkont:spacer height="3"/>
                <rich:collapsiblePanel id="GestionarOrdenPago" style="width:100%;" switchType="true" rendered="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 8 ||
                                                                                                                 SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}">
                    <f:facet name="header">
                        <h:outputText value="8. #{var.gestionarordenpago}"/>
                    </f:facet>
                    <interkont:spacer height="3"/>
                    <center>
                        <h:panelGrid id="panelGestionarOrden" columns="3" columnClasses="panelizquierda, panelizquierda">
                            <h:outputLabel id="lblCarta"  value="#{var.anexarcarta}" for="txtCarta"/>
                            <h:inputText size="40" id="txtCarta" readonly="true"  />
                            <a4j:commandButton id="btOrden" value="#{var.examinar}" immediate="true"
                                               style="font-size:12px;"/>


                            <h:outputText  value="#{var.fechadecarta}"/>                                    
                            <rich:calendar locale="#{var.rcalendarlocale}" datePattern="yyyy-MM-dd"
                                           direction="top-right" id="fecorden" inputSize="10"
                                           value="#{SessionBeanCobra.solicitudService.ordendepago.datefechaordenpago}"
                                           immediate="true">
                            </rich:calendar>
                            <interkont:spacer width="1"/>

                            <h:outputText value="#{var.observaciones}"/>
                            <h:inputTextarea id="observacionesOrden" rows="3" cols="43" value="#{SessionBeanCobra.solicitudService.ordendepago.strdescripcionordenpago}" />
                            <interkont:spacer width="1"/>
                        </h:panelGrid>
                    </center>
                    <center>
                        <h:panelGrid columns="2">
                            <a4j:commandButton id="guardaorden"
                                               action="#{SolicitudObra$GestionarSolicitudObra.guardarOrdenPago}"
                                               value="#{var.guardar}">
                                <a4j:ajax event="oncomplete" render="layoutGuardar" oncomplete="#{rich:component('panelValidarSolicitud')}.show();"/>
                            </a4j:commandButton>
                            <a4j:commandButton id="CancelarOrden" styleClass="btn_pri_inm" value="#{var.cancelar}"/>
                        </h:panelGrid>
                    </center>
                </rich:collapsiblePanel>
                <interkont:spacer height="3"/>
                <rich:collapsiblePanel id="AprobacionFinanciera" style="width:100%;" switchType="true" rendered="#{SolicitudObra$GestionarSolicitudObra.valuegrupo == 9}">

                    <f:facet name="header">
                        <h:outputText value="9. #{var.aprobacionfinanciera}"/>
                    </f:facet>
                    <interkont:spacer height="3"/>

                    <center>
                        <h:panelGrid id="panelAprobacionFinanciera" columns="2" columnClasses="panelizquierda, panelizquierda" >

                            <h:outputText  value="#{var.fechaapertura}"/>
                            <rich:calendar locale="#{var.rcalendarlocale}"
                                           disabled="true"
                                           value="#{SessionBeanCobra.solicitudService.encargofiduciario.datefechaaperturaencargofiduciario}"
                                           datePattern="yyyy-MM-dd" direction="top-right" id="fecInfo" inputSize="10" immediate="true"/>

                            <h:outputLabel id="lblEncargo"  value="#{var.encargofiduciario}" for="txtEncargo"/>
                            <h:panelGroup>
                                <h:inputText size="10" id="txtEncargo" readonly="true" value="#{SessionBeanCobra.solicitudService.encargofiduciario.intnumencargofiduciario}" />
                                <a4j:commandButton id="btCarta" value="#{var.crear}" immediate="true"
                                                   oncomplete="#{rich:component('panelCrearEncargo')}.hide();"/>
                            </h:panelGroup>

                            <h:outputText value="#{var.observaciones}"/>
                            <h:inputTextarea id="observacionesEncargo" rows="3" cols="43"
                                             value="#{SessionBeanCobra.solicitudService.encargofiduciario.strdescripcion}"/>

                        </h:panelGrid>
                    </center>
                    <center>
                        <h:panelGrid columns="2">
                            <a4j:commandButton id="registraraprobacionAH"
                                               action="#{SolicitudObra$GestionarSolicitudObra.guardarEncargoFiduciario}"
                                               value="#{var.guardar}"
                                               render="layoutGuardar">
                                <a4j:ajax event="oncomplete" render="layoutGuardar" oncomplete="#{rich:component('panelValidarSolicitud')}.show();"/>
                            </a4j:commandButton>
                            <a4j:commandButton id="CancelaraprobacionAH" styleClass="btn_pri_inm" value="#{var.cancelar}"/>

                        </h:panelGrid>
                    </center>
                </rich:collapsiblePanel>

                <rich:collapsiblePanel id="MovimientosFinancieros" switchType="ajax" opened="false" rendered="#{SolicitudObra$GestionarSolicitudObra.mostrarmov}">
                    <f:facet name="header">
                        <h:outputText value="#{var.movimientosfinancieros}"/>
                    </f:facet>
                    <interkont:spacer height="3"/>
                    <rich:dataTable id="tablaMovimientos"
                                    value="#{SessionBeanCobra.solicitudService.listamovimientosolobra}"
                                    rowKeyVar="filaSeleccionada" var="currentRow"  style="width:100%;">
                        <f:facet name="header">
                            <rich:columnGroup>
                                <rich:column breakRowBefore="true" colspan="12">
                                    <h:outputText value="Movimientos Financieros" />
                                </rich:column>
                                <rich:column breakRowBefore="true">
                                    <h:outputText value="#{var.comprobantefidu}"/>
                                </rich:column>
                                <rich:column>
                                    <h:outputText value="#{var.descripcion}"/>
                                </rich:column>
                                <rich:column>
                                    <h:outputText value="#{var.valor} Movimiento"/>
                                </rich:column>
                                <rich:column>
                                    <h:outputText value="#{var.valor} Ejecutado"/>
                                </rich:column>
                                <rich:column>
                                    <h:outputText value="#{var.valor} Legalizado"/>
                                </rich:column>
                                <rich:column>
                                    <h:outputText value="#{var.porcentajejecutado}"/>
                                </rich:column>
                                <rich:column>
                                    <h:outputText value="% Legalizado"/>
                                </rich:column>
                                <rich:column>
                                    <h:outputText value="#{var.fecha} legalización"/>
                                </rich:column>
                                <rich:column>
                                    <h:outputText value="#{var.tipom} Movimiento"/>
                                </rich:column>
                                <rich:column>
                                    <h:outputText value="Estado movimiento"/>
                                </rich:column>
                                <rich:column>
                                    <h:outputText value="Orden de pago"/>
                                </rich:column>
                                <rich:column>
                                    <h:outputText value="#{var.nombre} Contratista"/>
                                </rich:column>
                            </rich:columnGroup>
                        </f:facet>
                        <rich:column breakRowBefore="true">
                            <h:outputText value="#{currentRow.strcomprobantefidu}"/>
                        </rich:column>
                        <rich:column >
                            <h:outputText value="#{currentRow.strdescripcionmovimiento}"/>
                        </rich:column>
                        <rich:column>
                            <h:outputText value="#{currentRow.numvlrmovimiento}">
                                <f:convertNumber locale="#{var.rcalendarlocale}" pattern="$ ###,###.##"/>
                            </h:outputText>
                        </rich:column>
                        <rich:column styleClass="panelderecha">
                            <h:outputText value="#{currentRow.numvlrejecutado}">
                                <f:convertNumber locale="#{var.rcalendarlocale}" pattern="$ ###,###.##"/>
                            </h:outputText>
                        </rich:column>
                        <rich:column>
                            <h:outputText value="#{currentRow.numvlrlegalizado}">
                                <f:convertNumber locale="#{var.rcalendarlocale}" pattern="$ ###,###.##"/>
                            </h:outputText>
                        </rich:column>
                        <rich:column>
                            <h:outputText value="#{currentRow.floatporejecucion}"/>
                        </rich:column>
                        <rich:column>
                            <h:outputText value="#{currentRow.floatporcentajelegalizacion}"/>
                        </rich:column>
                        <rich:column>
                            <h:outputText value="#{currentRow.datefechalegalizacion}"/>
                        </rich:column>
                        <rich:column>
                            <h:outputText value="#{currentRow.tipomovimiento.strnombretipomovimiento}"/>
                        </rich:column>
                        <rich:column>
                            <h:outputText value="#{currentRow.estadomovimiento.strdescripcionestadomovimiento}"/>
                        </rich:column>
                        <rich:column>
                            <h:outputText value="#{currentRow.ordendepago.strordenpago}"/>
                        </rich:column>
                        <rich:column>
                            <h:outputText value="#{currentRow.strnombrecontratista}"/>
                        </rich:column>
                    </rich:dataTable>
                </rich:collapsiblePanel>

            </rich:panel>
            <ui:include src="/modal/modalsolicitudobra/validarsolicitud.jspx"/>
        </h:form>
        <ui:include src="/modal/modalsolicitudobra/enviarsolicitud.jspx"/>
        <ui:include src="/modal/modalsolicitudobra/busquedaavanzada.jspx"/>
        <ui:include src="/modal/modalsolicitudobra/subirImagenSolicitud.jspx"/>
        <ui:include src="/modal/modalsolicitudobra/panelUploadDocumentoSolicitud.jspx"/>

        <ui:include src="/modal/modalsolicitudobra/crearencargo.jspx"/>
        <!--<ui:include src="/modal/modalsolicitudatencion/informacionentidad.jspx"/>
        <ui:include src="/modal/modalsolicitudatencion/informacioncontacto.jspx"/>       -->

    </ui:define>
</ui:composition>


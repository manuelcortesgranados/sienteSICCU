<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition  xmlns="http://www.w3.org/1999/xhtml"
        xmlns:a4j="http://richfaces.org/a4j" 
        xmlns:interkont="http://www.interkont.com/jsf"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:rich="http://richfaces.org/rich"
        xmlns:ui="http://java.sun.com/jsf/facelets">

    <rich:popupPanel id="panelFiltroAvanzado" width="600" autosized="true"    headerClass="header_filtro" >
        <f:facet name="header">
            <h:panelGroup >
                <h:outputText  styleClass="ikont-hot-filtbusqueda"   value="#{var.filtbusqueda} " />
                <h:outputText  styleClass="ikont-hot-filtavanzada"   value="#{var.filtavanzada}"   />
            </h:panelGroup>
        </f:facet>
        <f:facet name="controls">
            <h:form>
                <h:panelGroup>
                   <a4j:commandLink value="X" id="esconder_panelFiltroAvanzado" styleClass="ikont-acl-esconder"  
                                     title="#{var.cerrar}" immediate="true"  onclick="#{rich:component('panelFiltroAvanzado')}.hide(); return false;"/>
                    
                </h:panelGroup>
            </h:form>
        </f:facet>
        <h:form id="form_filtro">
            <center>
                <h:panelGrid id="gppanelFiltroAvanzado"  columnClasses="panelcenter">
                    <center>
                        <h:inputText size="35"  id="txtPalabraClave" value="#{HomeGestion.filtro.palabraclave}"
                                     onclick="this.value=''" styleClass="ikont-hit-txtPalabraClave"  />

                        <h:panelGrid columns="2" >
                            <h:outputLabel  styleClass="ikont-hol-lblevente"    id="lblevente" value="#{var.eventopertenece}"  />
                            <h:outputLabel  styleClass="ikont-hol-label_tipo_proyectoge"    id="label_tipo_proyectoge"  value="#{var.quetipoproyectoes}"  />
                            <h:panelGroup>
                                <h:selectOneMenu  id="even" value="#{HomeGestion.filtro.intcodevento}">
                                    <f:selectItems value="#{HomeGestion.eventos}" />
                                </h:selectOneMenu> 
                                <h:selectOneMenu id="cmbPeriodoProyecto" value="#{HomeGestion.filtro.intperiodoevento}" >
                                    <f:selectItems value="#{SessionBeanCobra.periodoEvento}" />
                                </h:selectOneMenu>
                            </h:panelGroup>
                            <h:panelGroup>
                                <h:selectOneMenu  id="tipoProyecto" value="#{HomeGestion.filtro.inttipoproyecto}">

                                    <f:selectItems value="#{HomeGestion.tiposProyectos}" />
                                    <a4j:ajax event="change" listener="#{HomeGestion.cargarSubtiposProyecto}" execute="@this"
                                                 render="subtiposProyecto"/>
                                </h:selectOneMenu>
                                <h:panelGroup id="subtiposProyecto" >
                                    <h:selectOneMenu   id="subtipoProyecto" value="#{HomeGestion.filtro.intsubtipoproyecto}" >
                                        <f:selectItems value="#{HomeGestion.subTiposProyecto}" />
                                    </h:selectOneMenu>
                                </h:panelGroup>
                            </h:panelGroup>


                            <h:outputLabel  styleClass="ikont-hol-label_fase "    id="label_fase" value="#{var.fasepertenece}:" />
                            <h:outputLabel  styleClass="ikont -hol-label_cuanti"    id="label_cuanti"  value="#{var.cuantocuesta}" />
                            <h:selectOneMenu  id="fase" value="#{HomeGestion.filtro.intcodfase}">
                                <f:selectItem itemLabel="Todos" itemValue="-1"/>
                                <f:selectItems value="#{HomeGestion.fases}" />
                            </h:selectOneMenu>
                            <h:panelGroup>
                                <h:outputLabel  styleClass="ikont-hol-label_cuantias"    id="label_cuantias" value="#{var.entre} "/>
                                <h:inputText value="#{HomeGestion.filtro.cuantiaini}" size="13" id="txtCuantiaini" >
                                    <f:validateLongRange minimum="0"/>
                                    <f:validateLength maximum="15"/>
                                </h:inputText>

                                <h:outputLabel  styleClass="ikont-hol-label8"    id="label8" value=" #{var.y} " />
                                <h:inputText value="#{HomeGestion.filtro.cuantiafin}" size="13" id="txtCuantiafin">
                                    <f:validateLongRange minimum="0"/>
                                    <f:validateLength maximum="15"/>
                                </h:inputText>
                            </h:panelGroup>


                            <h:outputLabel  styleClass="ikont-hol-label_donde"    id="label_donde" value="#{var.dondeestaubicado}:"/>

                            <h:outputLabel  styleClass="ikont-hol-label_quetan"    id="label_quetan"  value="#{var.quetanavanzado}:" />
                            <h:panelGrid columns="1" columnClasses="panelcenter" >
                                <h:selectOneMenu value="#{HomeGestion.inttipoorigen}">
                                    <f:selectItem itemValue="0" itemLabel="#{var.zonaespec}"/>
                                    <f:selectItem itemValue="1" itemLabel="#{var.localidades}"/>
                                    <a4j:ajax event="change" execute="@this" listener="#{HomeGestion.configurarzonalocali}" render="tipoorigen"/>
                                </h:selectOneMenu>
                                <h:panelGrid id="tipoorigen" columns="1" columnClasses="panelcenter" >
                                    <h:panelGrid id="filtrozonaes" columns="1" rendered="#{HomeGestion.inttipoorigen == 0}" >
                                        <h:selectOneMenu id="zona" value="#{HomeGestion.filtro.intregionespecifica}" rendered="#{HomeGestion.tipoOrigenUsuario.intidtipoorigen == 4}">
                                            <f:selectItem itemValue="0" itemLabel="#{var.todos}"/>
                                            <f:selectItems value="#{HomeGestion.zonaespe}"/>
                                            <a4j:ajax event="change" execute="@this" render="filtrozonaes"/>
                                        </h:selectOneMenu>
                                    </h:panelGrid>
                                    <h:panelGrid id="filtrodeptos"  columns="1" rendered="#{HomeGestion.inttipoorigen == 1}" >
                                        <h:selectOneMenu  id="depto" value="#{HomeGestion.filtro.strcoddepto}" rendered="#{HomeGestion.tipoOrigenUsuario.intidtipoorigen == 4}">
                                            <f:selectItems value="#{HomeGestion.departamentos}"/>
                                            <a4j:ajax event="change" listener="#{HomeGestion.cargarMunicipios}" execute="@this"
                                                         render="municipios"/>
                                        </h:selectOneMenu>
                                        <h:selectOneMenu  id="municipios" value="#{HomeGestion.filtro.strmunicipio}"
                                                         rendered="#{HomeGestion.tipoOrigenUsuario.intidtipoorigen != 1}">
                                            <f:selectItems value="#{HomeGestion.municipios}" />
                                        </h:selectOneMenu>
                                    </h:panelGrid>
                                </h:panelGrid>
                            </h:panelGrid>

                            <h:panelGrid columns="3" columnClasses="panelcenter"  id="avancefil">
                                <rich:inputNumberSpinner maxValue="100" inputSize="5" disabled="#{HomeGestion.filtro.intestadoobra==0 || HomeGestion.filtro.intestadoobra== -1}"
                                                        value="#{HomeGestion.filtro.avance1}">
                                </rich:inputNumberSpinner>
                                <h:outputLabel  styleClass="ikont-hol-label10"   id="label10" value="#{var.houta}"/>
                                <rich:inputNumberSpinner  maxValue="100" inputSize="5" disabled="#{HomeGestion.filtro.intestadoobra==0 || HomeGestion.filtro.intestadoobra== -1}"
                                                         value="#{HomeGestion.filtro.avance2}">
                                </rich:inputNumberSpinner>
                            </h:panelGrid>

                            <h:outputLabel  styleClass="ikont-hol-label_entidad"    id="label_entidad" value="#{var.queentidadcontrato}"  />
                            <h:outputLabel  styleClass="ikont-hol-label_porcent"    id="label_porcent" value="#{var.queporcentajesehapagado}" />

                            <h:panelGrid  columnClasses="panelcenter" columns="2">
                                <interkont:spacer width="10px"/>
                                <rich:select  styleClass="ikont-rs-ingresarEntidad"  
                                               defaultLabel="Ingrese Entidad" value="#{HomeGestion.filtro.strentidad}">
                                    <f:selectItems value="#{HomeGestion.tercerosUsuario}" />
                                    <a4j:ajax event="change" listener="#{HomeGestion.comboEntidadesContratoguardar}" render="coddane" execute="@this" >
                                    </a4j:ajax>
                                </rich:select>
                            </h:panelGrid>
                           

                            <h:panelGrid columns="3"   id="porcentajefil">
                                <rich:inputNumberSpinner inputSize="5" maxValue="100" disabled="#{HomeGestion.filtro.intestadoobra==0 || HomeGestion.filtro.intestadoobra== -1}"
                                                         value="#{HomeGestion.filtro.pocentajepro1}">
                                </rich:inputNumberSpinner>
                                <h:outputLabel  styleClass="ikont-hol-label11"   id="label11" value="#{var.houta}"/>
                                <rich:inputNumberSpinner maxValue="100" inputSize="5" disabled="#{HomeGestion.filtro.intestadoobra==0 || HomeGestion.filtro.intestadoobra== -1}"
                                                        value="#{HomeGestion.filtro.pocentajepro2}">
                                </rich:inputNumberSpinner>

                            </h:panelGrid >

                     </h:panelGrid>

                        <h:panelGrid columns="2"  >
                            <h:panelGrid columns="1" >
                                <h:outputLabel  styleClass="ikont-hol-label_contratista"    id="label_contratista" value="#{var.quieneselcontratista}" />

                                <h:inputText size="23" id="txtContratista" value="#{HomeGestion.filtro.strcontratista}"/>



                                <h:outputLabel  styleClass="ikont-hol-label_estado_obra"   id="label_estado_obra" value="#{var.enqueestadoseencuentra}"  />


                                <h:selectOneMenu  id="estadoObra" value="#{HomeGestion.filtro.intestadoobra}">
                                    <f:selectItem itemLabel="Todos" itemValue="-1"/>
                                    <f:selectItems value="#{HomeGestion.tiposEstadoObra}"/>
                                      <a4j:ajax event="change" render="porcentajefil, avancefil"/>
                                </h:selectOneMenu>
                            </h:panelGrid>
                            <h:panelGroup>
                                <h:panelGrid columns="1" columnClasses="panelcenter" >
                                    <h:panelGroup>
                                        <h:outputLabel  styleClass="ikont-hol-label_tipointe"    id="label_tipointe" value="Tipo de intervención:"   />
                                        <h:selectOneMenu  id="tipoIntervencion" value="#{HomeGestion.filtro.tipointervencion}">
                                            <f:selectItem itemLabel="Todos" itemValue="-1"/>
                                            <f:selectItem itemLabel="Atención humanitaria" itemValue="1"/>
                                            <f:selectItem itemLabel="Infraestructura" itemValue="2"/>
                                            <f:selectItem itemLabel="Convenios" itemValue="3"/>
                                            <a4j:ajax event="change" render="panelfiltroencargo"/>
                                        </h:selectOneMenu>
                                    </h:panelGroup>
                                    <interkont:spacer height="5" />
                                    <h:panelGroup>
                                        <h:outputText  styleClass="ikont-hot-verproyectosterminados" value="#{var.verproyectosterminados}"/>
                                        <h:selectBooleanCheckbox value="#{HomeGestion.filtro.boolobraterminada}"  />
                                    </h:panelGroup>
                                </h:panelGrid>
                            </h:panelGroup>
                            <h:panelGroup >
                                <h:panelGrid columns="1" columnClasses="panelcenter"  id="panelfiltroencargo">
                                    <center>
                                        <h:outputLabel  styleClass="ikont-label_encargofidu "    id="label_encargofidu" value="#{var.cualeselencargo}"  />
                                    </center>
                                    <center>
                                        <h:inputText size="23" id="txtencargofidu" value="#{HomeGestion.filtro.encargofidu}" disabled="#{HomeGestion.filtro.tipointervencion==-1}"/>
                                    </center>
                                </h:panelGrid>
                                <h:panelGrid id="coddane" >
                                    <h:panelGroup rendered="#{HomeGestion.filtro.vercodigosedeeducativa}">
                                    <center>
                                        <h:outputLabel  styleClass="ikont-hol-codigodane"    id="label_codigodane" value="#{var.codigodane}"  />
                                    </center>
                                    <center>
                                        <h:inputText size="23" id="txtcodigodane" value="#{HomeGestion.filtro.coddanesedeeducativa}"/>
                                    </center>
                                    </h:panelGroup>
                                </h:panelGrid>

                            </h:panelGroup>
                            <h:panelGroup>
                                <center>
                                    <h:commandLink type="submit" action="#{HomeGestion.filtroObrasActionMapaAvanModal}" id="filtrar"  value="#{var.buscar}" 
                                                   styleClass="ikont"   
                                                   />
                                </center>
                            </h:panelGroup>
                            <interkont:spacer height="10" /><interkont:spacer height="10" />

                        </h:panelGrid>
                    </center>
                </h:panelGrid>
            </center>
        </h:form>

    </rich:popupPanel>
</ui:composition>
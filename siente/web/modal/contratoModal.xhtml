<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
        xmlns:a4j="http://richfaces.org/a4j"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:rich="http://richfaces.org/rich"
        xmlns:ui="http://java.sun.com/jsf/facelets">

    <h:panelGroup id="panelContrato" >
        <center>

            <h:panelGrid  width="100%" >
                <f:facet name="header"><h:outputLabel  class="id-jsf- "   value="#{var.contrato}"></h:outputLabel></f:facet>

                <rich:dataTable id="tablacontrato"  
                                sortMode="single" 
                                
                                value="#{Supervisor$AdministrarObraNew.listaContrato}"
                                var="_row" 
                                rowKeyVar="filaSeleccionada">
                    <rich:column id="tc_strnrocontrato"  width="120px">
                        <f:facet name="header">

                            <h:outputText  class="id-jsf- "   value="#{var.houtnrocontrato} "/>
                        </f:facet>
                        <h:outputText  class="id-jsf- "   id="st_strnrocontrato" value="#{_row.contrato.strnumcontrato}"/>
                    </rich:column>

                    <rich:column  width="120px">
                        <f:facet name="header">
                            <h:outputText  class="id-jsf- "   value="#{var.objetocontrato} "/>
                        </f:facet>
                        <h:inputTextarea  value="#{_row.contrato.textobjeto}" readonly="true" cols="35" rows="3" />
                    </rich:column>

                    <rich:column id="tc_strnomcontratista" width="120px">
                        <f:facet name="header">
                            <h:outputText  class="id-jsf- "   value="#{var.houtcontratis}"/>
                        </f:facet>
                        <h:outputText  class="id-jsf- "   id="st_strnomcontratista" value="#{_row.contrato.contratista.strnombre} #{_row.contrato.contratista.strapellido1}"/>
                    </rich:column>

                    <rich:column id="tc_fechainic" width="80px">
                        <f:facet name="header">
                            <h:outputText  class="id-jsf- "   value="#{var.fechadeinicio}"/>
                        </f:facet>
                        <h:outputText  class="id-jsf- "    value="#{_row.contrato.datefechaini}"/>
                    </rich:column>

                    <rich:column id="tc_fechafina" width="80px">
                        <f:facet name="header">
                            <h:outputText  class="id-jsf- "   value="#{var.fechadefinalizacion}"/>
                        </f:facet>
                        <h:outputText  class="id-jsf- "   value="#{_row.contrato.datefechafin}"/>
                    </rich:column>

                    <rich:column id="tc_duracion" width="80px">
                        <f:facet name="header">
                            <h:outputText  class="id-jsf- "   value="#{var.intduracion}"/>
                        </f:facet>
                        <h:outputText  class="id-jsf- "   value="#{_row.contrato.intduraciondias} DÃ­as"/>
                    </rich:column>

                    <rich:column id="tc_valor" width="120px">
                        <f:facet name="header">
                            <h:outputText  class="id-jsf- "   value="#{var.vlrcontra}"/>
                        </f:facet>
                        <h:outputText  class="id-jsf- "   value="#{_row.contrato.numvlrcontrato}">
                            <f:convertNumber pattern="$###,###"/>
                        </h:outputText>
                    </rich:column>
                    
                    <rich:column id="tc_valor_asociado" width="80px">
                        <f:facet name="header">
                            <h:outputText  class="id-jsf- "   value="#{var.valorasociadoaproyecto}"/>
                        </f:facet>
                        <h:outputText  class="id-jsf- "   value="#{_row.numvalorrelacion}">
                            <f:convertNumber pattern="$###,###"/>
                        </h:outputText>
                    </rich:column>
                    <rich:column id="tc_polizas" width="120px"  rendered="#{Supervisor$AdministrarObraNew.polizacontrato}">
                        <f:facet name="header">
                            <h:outputText  class="id-jsf- "   value="#{var.verpolizas}"/>
                        </f:facet>
                        <a4j:commandLink id="verpoliza"  
                                         action="#{Supervisor$AdministrarObraNew.listaPolizacontratos}" render="panelContrato"
                                         onclick="#{rich:component('panelVerPolizaModal')}.hide();return false;">
                            <h:graphicImage  class="id-jsf- "    value="/resources/imgs/bt_ver.png"/>
                            <a4j:ajax event="complete"  render="layoutCron"/>
                        </a4j:commandLink>

                    </rich:column>

                    <rich:column id="tc_costos" width="120px" rendered="#{Supervisor$AdministrarObraNew.obra.tipocosto !=null}"  >
                        <f:facet name="header">
                            <h:outputText  class="id-jsf- "   value="#{var.vercosto}"/>
                        </f:facet>
                        <a4j:commandLink id="vercosto"  
                                          render="panelContrato"
                                         onclick="#{rich:component('panelCostoContrato')}.show();return true;">
                            <h:graphicImage  class="id-jsf- "    value="/resources/imgs/bt_ver.png"/>
                            <a4j:ajax event="complete"  render="layoutCron"/>
                        </a4j:commandLink>
                    </rich:column>


                </rich:dataTable>

            </h:panelGrid>
        </center>
    </h:panelGroup>

</ui:composition>

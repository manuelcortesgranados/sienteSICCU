<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:a4j="http://richfaces.org/a4j" xmlns:interkont="http://www.interkont.com/jsf"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:rich="http://richfaces.org/rich"
                xmlns:ui="http://java.sun.com/jsf/facelets">

    <rich:popupPanel id="mp-listado-contratos-asociar" moveable="true"  width="800" height="400" headerClass="rich-panel-header" autosized="true">
        <f:facet name="header" >
            <h:panelGroup >
                <h:outputText  styleClass="ikont-hot-listacontratos" value="#{var.listarcontratos}"/>
            </h:panelGroup>
        </f:facet>
        <f:facet name="controls">
            <h:form>
                <h:panelGroup>
                    <a4j:commandLink id="esconder-mp-listado-contratos-asociar"
                                     onclick="#{rich:component('mp-listado-contratos-asociar')}.hide(); return false;" immediate="true"
                                     styleClass="ikont-acl-cerrar"/>
                </h:panelGroup>
            </h:form>
        </f:facet>
        <center>
            <h:form>
                <h:panelGroup id="gpTotalContAso">
                    <h:panelGrid columns="2" >
                        <h:outputText  styleClass="ikont-hot-buscar" value="#{var.buscar} " />
                        <h:panelGroup>
                            <h:inputText styleClass="ikont-hit-nomcontrato" value="#{Supervisor$AsociarContratos.nomcontraro}" size="20"/>
                            <a4j:commandButton styleClass="ikont-acb-aceptar" value="#{var.aceptar}" action="#{Supervisor$AsociarContratos.buscarContrato}" render="tablacontratosasociar,gpTotalContAso"/>

                        </h:panelGroup>
                    </h:panelGrid>

                    <rich:panel >


                        <h:panelGrid >
                            <interkont:spacer height="5" />

                            <rich:dataTable id="tablacontratosasociar"
                                            rows="5"
                                            var="currentRow"
                                            rowKeyVar="filaSeleccionada"
                                            onrowmouseover="this.style.backgroundColor='#B4DDEC'"
                                            sortMode="single"
                                            value="#{Supervisor$AsociarContratos.listacontratos}"
                                            >
                                <f:facet name="header">
                                    <rich:columnGroup>
                                        <rich:column colspan="7">
                                            <h:outputText  styleClass="ikont-hot-contratosasociar" value="#{var.contratos} #{Supervisor$AsociarContratos.totalfilas} #{var.paginaCiu} #{Supervisor$AsociarContratos.pagina}#{var.deCiu}#{Supervisor$AsociarContratos.totalpaginas}" />
                                        </rich:column>
                                        <rich:column  breakRowBefore="true">
                                            <h:outputText  styleClass="ikont-hot-numerocontrato" value="#{var.numerocontrato}"/>
                                        </rich:column>
                                        <rich:column >
                                            <h:outputText  styleClass="ikont-hot-nombrecontrato" value="#{var.nombre}"/>
                                        </rich:column>
                                        <rich:column >
                                            <h:outputText  styleClass="ikont-hot-valrcontrato" value="Valor Contrato"/>
                                        </rich:column>
                                        <rich:column >
                                            <h:outputText  styleClass="ikont-hot-valrdisponible" value="Valor Disponible"/>
                                        </rich:column>
                                        <rich:column width="150px">
                                            <h:outputText  styleClass="ikont-hot-datefechaini" value="#{var.datefechaini}"/>
                                        </rich:column>
                                        <rich:column >
                                            <h:outputText  styleClass="ikont-hot-datefechafin" value="#{var.datefechafin}"/>
                                        </rich:column>
                                        <rich:column >
                                            <h:outputText  styleClass="ikont-hot-seleccionarcontrto" value="#{var.seleccionar}"/>
                                        </rich:column>
                                    </rich:columnGroup>
                                </f:facet>
                                <rich:columnGroup id="cuerpoContrato">
                                    <rich:column  breakRowBefore="true">
                                        <h:outputText  styleClass="ikont-hot-numcontrato" id="txt_contrato" value="#{currentRow.strnumcontrato}"/>
                                    </rich:column>
                                    <rich:column >
                                        <h:inputTextarea styleClass="ikont-hit-strnombre" id="otxt_strnombreobra-listado" value="#{currentRow.strnombre}"  disabled="true" cols="35" rows="2"/>
                                    </rich:column>
                                    <rich:column>
                                        <h:outputText  styleClass="ikont-hot-numvlrcontrato" id="outvlcontrato" value="#{currentRow.numvlrcontrato}" >
                                            <f:convertNumber pattern="$#,###.00"/>
                                        </h:outputText>
                                    </rich:column>
                                    <rich:column>
                                        <h:outputText  styleClass="ikont-hot-numvlrsumproyectos" id="vlcondis" value="#{currentRow.numvlrcontrato-currentRow.numvlrsumahijos-currentRow.numvlrsumaproyectos}" >
                                            <f:convertNumber pattern="$#,###.00"/>
                                        </h:outputText>
                                    </rich:column>
                                    <rich:column>
                                        <h:outputText  styleClass="ikont-hot-datefechaini" value="#{currentRow.datefechaini}"/>
                                    </rich:column>
                                    <rich:column>
                                        <h:outputText  styleClass="ikont-hot-datefechafin" value="#{currentRow.datefechafin}"/>
                                    </rich:column>
                                    <rich:column width="120px" >
                                        <a4j:commandButton styleClass="ikont-acb-seleccionar" value="Seleccionar" action="#{Supervisor$AsociarContratos.agregarContratoInterventoria(filaSeleccionada)}"
                                                           oncomplete="#{rich:component('panelRelacionContratoInterventoria')}.show();" render="layoutpanelRelacionContratoInterventoria">
                                                          
                                        </a4j:commandButton>
                                    </rich:column>
                                </rich:columnGroup>
                                <f:facet name="footer">
                                    <rich:columnGroup>
                                        <rich:column colspan="8" breakRowBefore="true" >
                                            <center>
                                                <h:panelGrid columns="4">
                                                    <a4j:commandButton styleClass="ikont-acb-primerociu" id="btPriCont" value="#{var.primeroCiu}" disabled="#{!Supervisor$AsociarContratos.veranteriorcontrato}" action="#{Supervisor$AsociarContratos.primeroContratos}">
                                                        <a4j:ajax event="complete" render="tablacontratosasociar,gpTotalContAso"/>
                                                    </a4j:commandButton>
                                                    <a4j:commandButton styleClass="ikont-acb-anteriorciu" id="btAntCont" value="#{var.anteriorCiu}" disabled="#{!Supervisor$AsociarContratos.veranteriorcontrato}" action="#{Supervisor$AsociarContratos.anterioresContrato}">
                                                        <a4j:ajax event="complete" render="tablacontratosasociar,gpTotalContAso"/>
                                                    </a4j:commandButton>
                                                    <a4j:commandButton styleClass="ikont-acb-siguienteciu" id="btSigCont" value="#{var.siguienteCiu}" disabled="#{!Supervisor$AsociarContratos.verultimoscontrato}" action="#{Supervisor$AsociarContratos.siguienteContrato}">
                                                        <a4j:ajax event="complete" render="tablacontratosasociar,gpTotalContAso"/>
                                                    </a4j:commandButton>
                                                    <a4j:commandButton styleClass="ikont-acb-ultimociu" id="btUltCont" value="#{var.ultimoCiu}" disabled="#{!Supervisor$AsociarContratos.verultimoscontrato}" action="#{Supervisor$AsociarContratos.ultimoContrato}">
                                                        <a4j:ajax event="complete" render="tablacontratosasociar,gpTotalContAso"/>
                                                    </a4j:commandButton>
                                                </h:panelGrid>
                                            </center>
                                        </rich:column>
                                    </rich:columnGroup>
                                </f:facet>
                            </rich:dataTable>

                        </h:panelGrid>

                    </rich:panel>
                </h:panelGroup>
            </h:form>
        </center>
    </rich:popupPanel>
</ui:composition>
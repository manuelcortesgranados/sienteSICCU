<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:a4j="http://richfaces.org/a4j" xmlns:interkont="http://www.interkont.com/jsf"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:rich="http://richfaces.org/rich"
                xmlns:ui="http://java.sun.com/jsf/facelets">

    <rich:popupPanel id="mp-listado-contratos-asociar" moveable="true"  width="800" height="400" headerClass="rich-panel-header" autosized="true">
        <f:facet name="header" >
            <h:panelGroup >
                <h:outputText value="#{var.listarcontratos}" styleClass="txt_header" />
            </h:panelGroup>
        </f:facet>
        <f:facet name="controls">
            <h:form>
                <h:panelGroup>
                    <a4j:commandButton id="esconder-mp-listado-contratos-asociar" onclick="#{rich:component('mp-listado-contratos-asociar')}.hide(); return false;" immediate="true"
                                       styleClass="btn_cerrar" />
                </h:panelGroup>
            </h:form>
        </f:facet>
        <center>
            <h:form>
                <h:panelGroup id="gpTotalContAso">
                    <h:panelGrid columns="2" >
                        <h:outputText value="#{var.buscar} " style="font-size:12px"/>
                        <h:panelGroup>
                            <h:inputText value="#{Supervisor$AsociarContratos.nomcontraro}" size="20"/>
                            <a4j:commandButton value="#{var.aceptar}" action="#{Supervisor$AsociarContratos.buscarContrato}" render="tablacontratosasociar,gpTotalContAso"/>

                        </h:panelGroup>
                    </h:panelGrid>

                    <rich:panel >


                        <h:panelGrid style="width:100%;">
                            <interkont:spacer height="5" style="width:100%;"/>

                            <rich:dataTable id="tablacontratosasociar"
                                            rows="5"
                                            var="currentRow"
                                            binding="#{Supervisor$AsociarContratos.tablacontratosasoc}"
                                            onrowmouseover="this.style.backgroundColor='#B4DDEC'"
                                            sortMode="single"
                                            value="#{Supervisor$AsociarContratos.listacontratos}"
                                            style="text-align:left; width: 800px;">
                                <f:facet name="header">
                                    <rich:columnGroup>
                                        <rich:column colspan="7">
                                            <h:outputText value="#{var.contratos} #{Supervisor$AsociarContratos.totalfilas} #{var.paginaCiu} #{Supervisor$AsociarContratos.pagina}#{var.deCiu}#{Supervisor$AsociarContratos.totalpaginas}" />
                                        </rich:column>
                                        <rich:column style="width:150px;" breakRowBefore="true">
                                            <h:outputText value="#{var.numerocontrato}"/>
                                        </rich:column>
                                        <rich:column style="width:150px;">
                                            <h:outputText value="#{var.nombre}"/>
                                        </rich:column>
                                        <rich:column style="width:150px;">
                                            <h:outputText value="Valor Contrato"/>
                                        </rich:column>
                                        <rich:column style="width:150px;">
                                            <h:outputText value="Valor Disponible"/>
                                        </rich:column>
                                        <rich:column width="150px">
                                            <h:outputText value="#{var.datefechaini}"/>
                                        </rich:column>
                                        <rich:column style="width:150px;">
                                            <h:outputText value="#{var.datefechafin}"/>
                                        </rich:column>
                                        <rich:column style="width:150px;">
                                            <h:outputText value="#{var.seleccionar}"/>
                                        </rich:column>
                                    </rich:columnGroup>
                                </f:facet>
                                <rich:columnGroup id="cuerpoContrato">
                                    <rich:column style="width:150px;" breakRowBefore="true">
                                        <h:outputText id="txt_contrato" value="#{currentRow.strnumcontrato}"/>
                                    </rich:column>
                                    <rich:column >
                                        <h:inputTextarea id="otxt_strnombreobra-listado" value="#{currentRow.strnombre}"  disabled="true" cols="35" rows="2"/>
                                    </rich:column>
                                    <rich:column>
                                        <h:outputText id="outvlcontrato" value="#{currentRow.numvlrcontrato}" >
                                            <f:convertNumber pattern="$#,###.00"/>
                                        </h:outputText>
                                    </rich:column>
                                    <rich:column>
                                        <h:outputText id="vlcondis" value="#{currentRow.numvlrcontrato-currentRow.numvlrsumahijos-currentRow.numvlrsumaproyectos}" >
                                            <f:convertNumber pattern="$#,###.00"/>
                                        </h:outputText>
                                    </rich:column>
                                    <rich:column>
                                        <h:outputText  value="#{currentRow.datefechaini}"/>
                                    </rich:column>
                                    <rich:column>
                                        <h:outputText  value="#{currentRow.datefechafin}"/>
                                    </rich:column>
                                    <rich:column width="120px" >
                                        <a4j:commandButton value="Seleccionar" action="#{Supervisor$AsociarContratos.agregarContratoInterventoria}"
                                                           oncomplete="javascript:Richfaces.showModalPanel('panelRelacionContratoInterventoria')" render="layoutpanelRelacionContratoInterventoria">
                                        </a4j:commandButton>
                                    </rich:column>
                                </rich:columnGroup>
                                <f:facet name="footer">
                                    <rich:columnGroup>
                                        <rich:column colspan="8" breakRowBefore="true" style="text-align: center;">
                                            <center>
                                                <h:panelGrid columns="4">
                                                    <a4j:commandButton id="btPriCont" value="#{var.primeroCiu}" disabled="#{!Supervisor$AsociarContratos.veranteriorcontrato}" action="#{Supervisor$AsociarContratos.primeroContratos}">
                                                        <a4j:ajax event="complete" render="tablacontratosasociar,gpTotalContAso"/>
                                                    </a4j:commandButton>
                                                    <a4j:commandButton id="btAntCont" value="#{var.anteriorCiu}" disabled="#{!Supervisor$AsociarContratos.veranteriorcontrato}" action="#{Supervisor$AsociarContratos.anterioresContrato}">
                                                        <a4j:ajax event="complete" render="tablacontratosasociar,gpTotalContAso"/>
                                                    </a4j:commandButton>
                                                    <a4j:commandButton id="btSigCont" value="#{var.siguienteCiu}" disabled="#{!Supervisor$AsociarContratos.verultimoscontrato}" action="#{Supervisor$AsociarContratos.siguienteContrato}">
                                                        <a4j:ajax event="complete" render="tablacontratosasociar,gpTotalContAso"/>
                                                    </a4j:commandButton>
                                                    <a4j:commandButton id="btUltCont" value="#{var.ultimoCiu}" disabled="#{!Supervisor$AsociarContratos.verultimoscontrato}" action="#{Supervisor$AsociarContratos.ultimoContrato}">
                                                        <a4j:ajax event="complete" render="tablacontratosasociar,gpTotalContAso"/>
                                                    </a4j:commandButton>
                                                </h:panelGrid>
                                            </center>
                                        </rich:column>
                                    </rich:columnGroup>
                                </f:facet>
                            </rich:dataTable>

                        </h:panelGrid>

                    </rich:panel>
                </h:panelGroup>
            </h:form>
        </center>
    </rich:popupPanel>
</ui:composition>
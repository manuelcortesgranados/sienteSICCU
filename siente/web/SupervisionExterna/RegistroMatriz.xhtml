<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:a4j="http://richfaces.org/a4j" 
                xmlns:interkont="http://www.interkont.com/jsf"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:rich="http://richfaces.org/rich"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="/facelets/template_main.xhtml">

    <ui:define name="head">
        <title>Registro Matriz Supervisi√≥n Externa</title>
        <h:outputScript name="script_supervisor.js" />
    </ui:define>

    <ui:define name="title">
        <h:outputText  styleClass="ikont-"   value="Consulta de Solicitudes" />
    </ui:define>

    <ui:define name="menu">
        <ui:include src="/facelets/menu_gestion.xhtml" />
    </ui:define>

    <ui:define name="menu_lateral">
        <h:panelGroup  rendered="#{!var.permisonuevodiseno}">
            <ui:include src="/facelets/menu_lateral_supervision.xhtml" />
        </h:panelGroup>
        <h:panelGroup rendered="#{var.permisonuevodiseno}">
            <ui:include src="/facelets/menu_lateral_novedades_zoom.xhtml"/>
        </h:panelGroup>

    </ui:define>

    <ui:define name="body">
        <h:form>
            <center>
                <h:panelGroup layout="block" id="mp-regMatrizSupervision">
                    <rich:panel header="1. Datos Visita">
                        <interkont:spacer height="3" />
                        
                        <h:outputText  styleClass="ikont-hot-textoinformativocargarvisita"   value="#{var.textoinformativocargarvisita1}: "/>
                        <interkont:spacer height="3" />
                        <h:commandLink value="#{var.descargarformatomatrizauditoria}" styleClass="ikont-hcb-descargar-formato"  
                                       action="#{Supervision$Externa.descargarPlantillaAuditoria}" immediate="true" target="_blank"/>

                        <h:panelGrid id="panelInformacionArchivo" columns="2" columnClasses="panelizquierda, panelizquierda">
                            <h:outputText  styleClass="ikont-"   value="#{var.fechainforme}" />
                            <rich:calendar locale="#{var.rcalendarlocale}" datePattern="#{var.formatofecha}" id="calendarInforme"
                                           inputSize="20" value="#{Supervision$Externa.supervisionExterna.visita.datefechainforme}" required="true" requiredMessage="Fecha Necesaria">
                            </rich:calendar>
                            <interkont:spacer />
                            <rich:message for="calendarInforme"  />
                            <h:outputText  styleClass="ikont-"   id="txtoutnombreinforme" value="#{var.nombreinforme}" />
                            <h:inputText id="txtinnombreinforme" value="#{Supervision$Externa.supervisionExterna.visita.strnombreinforme}" required="true" requiredMessage="Nombre Necesario" />
                            <interkont:spacer />
                            <rich:message for="txtinnombreinforme"  />    

                            <h:outputText  styleClass="ikont-"   id="txtoutcomentarioinforme" value="#{var.comentario}" />
                            <h:inputTextarea id="txtincomentarioinforme" rows="3" cols="25" value="#{Supervision$Externa.supervisionExterna.visita.strcomentinforme}" />

                            <interkont:spacer height="3" />
                        </h:panelGrid>

                        <h:panelGrid columns="2">
                            <a4j:commandLink id="subirRegistoMat" styleClass="ikont-acl-subirmatrizauditoria subir"   title="#{var.subirarchivos}" render="panelGroupSubirArchivoMatriz"
                                             oncomplete="if (#{empty facesContext.messageList}) #{rich:component('panelUploadArchivoSuper')}.show(); else return false;" />
                            <a4j:commandLink  styleClass="ikont-acl-limpiarvisitafallida"   value="#{var.limpiarvisita}" action="#{Supervision$Externa.limpiarVisita}" render="panelInformacionArchivo" immediate="true" execute="@this"/>
                        </h:panelGrid>
                    </rich:panel>
                    <rich:panel header="#{var.titulovisitasfallidas}" rendered="#{var.versioncobra eq 'zoom'}">
                        <h:outputText  styleClass="ikont-hot-textoinformativocargarvisita"   value="#{var.textoinformativocargarvisita2}"/>
                        <rich:dataTable id="tablalistavisitasfallidas" rows="5" 
                                rowClasses="background_azul,background_blanco" styleClass="ikont-rdt-tablavisitasfallidas"  
                                value="#{Supervision$Externa.listavisitasfallidas}"
                                var="actual" binding="#{Supervision$Externa.tablavisitasfallidas}">
                            <f:facet name="header">
                                <rich:columnGroup>
                                    <rich:column colspan="5">
                                        <h:outputText  styleClass="ikont-hot-titulolistavisitasfallidas"   value="#{var.titulolistavisitasfallidas}"  />
                                    </rich:column>
                                    <rich:column breakRowBefore="true">
                                        <h:outputText  styleClass="ikont-hot-titulodatefechainforme"   value="#{var.titulodatefechainforme}"  />
                                    </rich:column>
                                    <rich:column  >
                                        <h:outputText  styleClass="ikont-hot-titulostrnombreinforme"   value="#{var.titulostrnombreinforme}" />
                                    </rich:column>
                                    <rich:column>
                                        <h:outputText  styleClass="ikont-hot-titulodatefecharegistro"   value="#{var.titulodatefecharegistro}"  />
                                    </rich:column>
                                    <rich:column>
                                        <h:outputText  styleClass="ikont-hot-titulocargarvisitafallida"   value="#{var.cargarvisitafallida}"  />
                                    </rich:column>
                                    <rich:column>
                                        <h:outputText  styleClass="ikont-hot-titulodescargarerroresvisitafallida"   value="#{var.generarreporteerroresvisita}"  />
                                    </rich:column>
                                </rich:columnGroup>
                            </f:facet>
                            <rich:column>
                                <h:outputText  styleClass="ikont-hot-datefechainforme"   value="#{actual.datefechainforme}"/>
                            </rich:column>
                            <rich:column>
                                <h:outputText  styleClass="ikont-hot-strnombreinforme"   value="#{actual.strnombreinforme}"/>
                            </rich:column>
                            <rich:column>
                                <h:outputText  styleClass="ikont-hot-datefecharegistro"   value="#{actual.datefecharegistro}"/>
                            </rich:column>
                            <rich:column>
                                <a4j:commandLink  styleClass="ikont-acl-cargarvisitafallida"   value="#{var.cargarvisitafallida}" action="#{Supervision$Externa.cargarVisitaFallida}" render="panelInformacionArchivo" immediate="true" execute="@this"/>
                            </rich:column>
                            <rich:column>
                                <h:commandLink value="#{var.generarreporteerroresvisita}" action="#{Supervision$Externa.generarReporteErroresVisita}" styleClass="ikont-acl-descargarerroresvisitafallida" type="submit" target="_blank" immediate="true" />
                            </rich:column>
                        </rich:dataTable>
                        <rich:dataScroller for="tablalistavisitasfallidas" maxPages="10">
                            <f:facet name="first">
                                <h:outputText  styleClass="ikont-hot-listavisitasfallidasprimero"   value="#{var.primeroCiu}"/>
                            </f:facet>
                            <f:facet name="last">
                                <h:outputText  styleClass="ikont-hot-listavisitasfallidasultimo"   value="#{var.ultimoCiu}"/>
                            </f:facet>
                        </rich:dataScroller>
                    </rich:panel>
                </h:panelGroup>
            </center>
        </h:form>

        <ui:include src="../SupervisionExterna/modal/SubirArchivo.xhtml" />

        <ui:include src="../SupervisionExterna/modal/ConfirmarGuardarSupervisor.xhtml" />
        <ui:include src="../SupervisionExterna/modal/panelResultadosValidacion.xhtml" />
    </ui:define>
</ui:composition>
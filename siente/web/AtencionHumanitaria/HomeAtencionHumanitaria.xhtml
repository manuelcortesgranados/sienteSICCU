<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:composite="http://java.sun.com/jsf/composite"
                xmlns:a4j="http://richfaces.org/a4j" xmlns:interkont="http://www.interkont.com/jsf"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:rich="http://richfaces.org/rich"
                template="/facelets/template_main.xhtml">

    <ui:define name="head">
        <title>Inicio Solicitudes de Obra</title>
        <h:outputScript name="script_supervisor.js"/>
        <h:outputScript library="css" name="/resources/css/AtencionHumanitaria/HomeAtencionHumanitaria.css"/>
    </ui:define>
    <ui:define name="title">
        <h:outputText  styleClass="ikont-hot-encsolah" value="#{var.encontrarsolah}"/>
    </ui:define>
    <ui:define name="menu">
        <ui:include src="/facelets/menu_atencion.xhtml"/>
    </ui:define>
    <ui:define name="menu_lateral">
        <ui:include src="/facelets/menu_lateral_atencion.xhtml"/>
        <ui:include src="/facelets/menu_lateral_perfil_atencion_hum.xhtml"/>
    </ui:define>
    <ui:define name="body">
        <h:form>
            <table  border="0" cellspacing="0" cellpadding="0">
                <tr>
                    <td><div><div id="buscador_space">
                                <label>
                                    <h:inputText id="txtPalabraClave" styleClass="ikont-hit-palclav" onfocus="clearText(this);" onblur="clearText(this);" value="#{AtencionHumanitaria$AdminSolicitudAtencion.filtroAh.palabraclave}"/>
                                    <h:commandButton type="button" action="#{AtencionHumanitaria$AdminSolicitudAtencion.buscar}"  id="filtrar"  value="#{var.buscar}" styleClass="ikont-hcb-buscr"  />
                                </label>
                            </div></div></td>
                    <td>
                        <a4j:commandLink styleClass="ikont-acl-busqavan"  
                                         render="tablaAtencionHumanitaria" value="#{var.houtbusquedaavanza}">
                            <rich:componentControl event="click" target="panelBusquedaAvanzadaAtencion" operation="show" />
                        </a4j:commandLink>
                    </td>
                </tr>
            </table>
            <h:panelGroup layout="block" id="mp-homeAtencionHumanitaria">

                <rich:panel header="#{var.solicitudatenciohum}">
                    <rich:dataTable id="tablaAtencionHumanitaria"
                                    binding="#{AtencionHumanitaria$AdminSolicitudAtencion.tablaSolicitudMaestro}"
                                    value="#{SessionBeanCobra.atencionhumanitariaService.solicitudMaestro}"
                                    var="currentRow" rows="10"  rowKeyVar="filaSeleccionada">
                        <f:facet name="header">
                            <rich:columnGroup>
                                <rich:column colspan="12">
                                    <h:outputText  styleClass="ikont-hot-totpag" value="#{var.misolicitues} #{AtencionHumanitaria$AdminSolicitudAtencion.totalfilas} #{var.paginaCiu} #{AtencionHumanitaria$AdminSolicitudAtencion.pagina}#{var.deCiu}#{AtencionHumanitaria$AdminSolicitudAtencion.totalpaginas}" />
                                </rich:column>

                                <rich:column breakRowBefore="true">
                                    <h:outputText  styleClass="ikont-hot-codigo" value="#{var.codigo}"/>
                                </rich:column>
                                <rich:column>
                                    <h:outputText  styleClass="ikont-hot-nombreah" value="#{var.nombreah}"/>
                                </rich:column>
                                <rich:column>
                                    <h:outputText  styleClass="ikont-hot-vlrsolicita" value="#{var.valorSolicitado}"/>
                                </rich:column>
                                <rich:column>
                                    <h:outputText  styleClass="ikont-hot-departo" value="#{var.departamento}"/>
                                </rich:column>
                                <rich:column>
                                    <h:outputText  styleClass="ikont-hot-munici" value="#{var.municipio}"/>
                                </rich:column>
                                <rich:column>
                                    <h:outputText  styleClass="ikont-hot-estadsolic" value="#{var.estadoSolicitud}"/>
                                </rich:column>
                                <rich:column>
                                    <h:outputText  styleClass="ikont-hot-tipsolicit" value="#{var.tipo} solicitud"/>
                                </rich:column>
                                <rich:column>
                                    <h:outputText  styleClass="ikont-hot-conslt" value="#{var.consultar}"/>
                                </rich:column>
                                <rich:column>
                                    <h:outputText  styleClass="ikont-hot-edit" value="#{var.editar}"/>
                                </rich:column>
                                <rich:column>
                                    <h:outputText  styleClass="ikont-hot-txtelimar" value="#{var.eliminar}"/>
                                </rich:column>
                                <rich:column>
                                    <h:outputText  styleClass="ikont-hot-verproy" value="#{var.ver} Proyecto"/>
                                </rich:column>
                            </rich:columnGroup>
                        </f:facet>
                        <rich:column breakRowBefore="true">
                            <h:outputText  styleClass="ikont-hot-codsolicmaestro" value="#{currentRow.oidcodigosolicitudmaestro}"/>
                        </rich:column>
                        <rich:column>
                            <h:outputText  styleClass="ikont-hot-nombrsolic" value="#{currentRow.strnombresolicitud}"/>
                        </rich:column>
                        <rich:column >
                            <h:outputText  styleClass="ikont-hot-nmvlrsolic"  value="#{currentRow.numvlrsolicitado}">
                                <f:convertNumber locale="#{var.rcalendarlocale}" pattern="$ ###,###.##"/>
                            </h:outputText>
                        </rich:column>
                        <rich:column>
                            <h:outputText  styleClass="ikont-hot-strdepto" value="#{currentRow.localidad.strdepartamento}"/>
                        </rich:column>
                        <rich:column>
                            <h:outputText  styleClass="ikont-hot-strmunicip" value="#{currentRow.localidad.strmunicipio}"/>
                        </rich:column>
                        <rich:column>
                            <h:outputText  styleClass="ikont-hot-nombresolic" value="#{currentRow.subestadosolicitudch.estadosolicitudch.strnombreestadosolicitud}"/>
                        </rich:column>
                        <rich:column>
                            <h:outputText  styleClass="ikont-hot-strnomtipah" value="#{currentRow.tipoah.strdnombretipoah}"/>
                        </rich:column>
                        <rich:column>
                            <a4j:commandLink  title="#{var.buscarProyecto}" 
                                              action="#{AtencionHumanitaria$AdminSolicitudAtencion.consultarSolicitud}" >
                                <h:graphicImage  styleClass="ikont-hgi-btver"  value="/resources/imgs/bt_ver.png"/>
                            </a4j:commandLink>
                        </rich:column>
                        <rich:column>
                            <a4j:commandLink  title="#{var.editar}" 
                                              rendered="#{SessionBeanCobra.usuarioObra.renderrecurso.btneditar_solicitud_ah}"
                                              action="#{AtencionHumanitaria$AdminSolicitudAtencion.identificados_Modif}"
                                              render="DatosBasicosSolicitud">
                                <h:graphicImage  styleClass="ikont-hgi-bteditar" value="/resources/imgs/bt_editar.png"/>
                            </a4j:commandLink>
                        </rich:column>
                        <rich:column rendered="#{currentRow.subestadosolicitudch.intoidsubestadosolicitud==4}" >
                            <a4j:commandButton  title="#{var.eliminar}" 
                                                action="#{AtencionHumanitaria$AdminSolicitudAtencion.SolicitudAeliminar}"
                                                oncomplete="#{rich:component('panelConfirmaborrado')}.show();"
                                                styleClass="ikont-acb-eliminar" execute="@this"
                                                />
                        </rich:column>
                        <rich:column rendered="#{currentRow.subestadosolicitudch.intoidsubestadosolicitud!=4}">
                        </rich:column>
                        <rich:column>
                            <a4j:commandLink  title="#{var.ver} Proyecto" 
                                              action="#{AtencionHumanitaria$AdminSolicitudAtencion.llenarProyectosxSolicitud}"
                                              oncomplete="#{rich:component('modaltablaproyectoah')}.show();" execute="@this">
                                <h:graphicImage  styleClass="ikont-acl-btconsult" value="/resources/imgs/bt_consultar.png"/>
                            </a4j:commandLink>
                        </rich:column>
                        <f:facet name="footer">
                            <rich:columnGroup>
                                <rich:column colspan="12" breakRowBefore="true">
                                    <center>
                                        <h:panelGrid columns="4">
                                            <a4j:commandButton styleClass="ikont-acb-primerciu" value="#{var.primeroCiu}" disabled="#{!AtencionHumanitaria$AdminSolicitudAtencion.veranteriorreales}" render="tablaAtencionHumanitaria" action="#{AtencionHumanitaria$AdminSolicitudAtencion.primerosreales}"/>
                                            <a4j:commandButton styleClass="ikont-acb-anteriorciu" value="#{var.anteriorCiu}" disabled="#{!AtencionHumanitaria$AdminSolicitudAtencion.veranteriorreales}" render="tablaAtencionHumanitaria" action="#{AtencionHumanitaria$AdminSolicitudAtencion.anterioresReales}"/>
                                            <a4j:commandButton styleClass="ikont-acb-siguienteciu" value="#{var.siguienteCiu}" disabled="#{!AtencionHumanitaria$AdminSolicitudAtencion.verultimosreales}" render="tablaAtencionHumanitaria" action="#{AtencionHumanitaria$AdminSolicitudAtencion.siguientesReales}"/>
                                            <a4j:commandButton styleClass="ikont-acb-ultimociu" value="#{var.ultimoCiu}" disabled="#{!AtencionHumanitaria$AdminSolicitudAtencion.verultimosreales}" render="tablaAtencionHumanitaria" action="#{AtencionHumanitaria$AdminSolicitudAtencion.ultimoReales}"/>
                                        </h:panelGrid>
                                    </center>
                                </rich:column>
                            </rich:columnGroup>
                        </f:facet>
                    </rich:dataTable>
                </rich:panel>
            </h:panelGroup>
        </h:form>
        <ui:include src="/modal/modalsolicitudatencion/busquedaavanzadaAtencion.xhtml"/>
        <ui:include src="/modal/atencionHumanitaria/confirmareliminar.xhtml"/>
        <ui:include src="/modal/modalverProyectoAh.xhtml"/>
    </ui:define>
</ui:composition>
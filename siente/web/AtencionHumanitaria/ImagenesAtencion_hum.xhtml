<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:a4j="http://richfaces.org/a4j" xmlns:interkont="http://www.interkont.com/jsf"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:rich="http://richfaces.org/rich"
                template="/facelets/template_main.xhtml">

    <ui:define name="head">
        <title>Atenci√≥n Humanitaria</title>
    </ui:define>
    <ui:define name="title">
        <h:outputText  class="id-jsf- "   value="#{var.generarsolicitudah}"/>
    </ui:define>
    <ui:define name="menu">
        <ui:include src="/facelets/menu_atencion.xhtml"/>
    </ui:define>
    <ui:define name="menu_lateral">
        <ui:include src="/facelets/menu_lateral_atencion.xhtml"/>
        <ui:include src="/facelets/menu_lateral_registrar_atencion_hum.xhtml"/>
        <ui:include src="/facelets/menu_lateral_perfil_atencion_hum.xhtml"/>
    </ui:define>
    <ui:define name="body">
        <h:form id="form_imagenes" target="_blank">

            <rich:collapsiblePanel switchType="ajax" id="gpDatosBasicos" >
                <f:facet name="header">
                    <h:outputText  class="id-jsf- "   value="#{var.imagenes}"/>

                </f:facet>
                <center>

                    <h:outputText  class="id-jsf- "   value="#{var.textsubirimagen}" rendered="#{!AtencionHumanitaria$AdminSolicitudAtencion.deshformulario}"/>

                    <interkont:spacer height="3"/>

                    <h:panelGrid id="panel_subirImagen"  columns="6" columnClasses=",,,,buttonsmall" rendered="#{!AtencionHumanitaria$AdminSolicitudAtencion.deshformulario }">

                        <a4j:commandButton id="adjuntarImagen" class="id-jsf-"   value="#{var.examinar}" immediate="true" 
                                           onclick="#{rich:component('panelUploadImagenAtencion')}.show();">
                        </a4j:commandButton>
                        <interkont:spacer height="3"/>
                        <h:outputText  class="id-jsf- "   id="ImagenAtencion" value="#{var.descripcionImagen}:" class="id-jsf-"  />
                        <h:inputText id="inputNombre" value="#{AtencionHumanitaria$AdminSolicitudAtencion.atencionHumanitaria.imagen.strdescripcion}"/>
                        <a4j:commandLink id="bt_agregarImagen" class="id-jsf-"   title="#{var.agregar}"
                                         action="#{AtencionHumanitaria$AdminSolicitudAtencion.subirImagenaLista}"
                                         render="tablaImagenes,gpDatosBasicos,panelUploadImagenAtencion"/>
                        <rich:dataGrid columns="1" rowKeyVar="row" value="#{AtencionHumanitaria$AdminSolicitudAtencion.subirImagenAtencion.files}" var="file" >
                            <h:outputText  class="id-jsf- "   id="otxt_nombreImagen" value=" #{file.onlyName}"/>
                        </rich:dataGrid>
                    </h:panelGrid>

                    <h:panelGroup>
                        <rich:dataTable id="tablaImagenes" var="currentRow" rowKeyVar="filaSeleccionada"
                                        value="#{AtencionHumanitaria$AdminSolicitudAtencion.atencionHumanitaria.listadoimagensolicitud}"
                                         rows="3" >
                            <f:facet name="header">
                                <h:outputText  class="id-jsf- "   value="#{var.imgseleccionadas}"/>
                            </f:facet>
                            <rich:column breakRowBefore="true"  width="100px">
                                <f:facet name="header" >
                                    <h:outputText  class="id-jsf- "   value="#{var.descripcionImagen}"/>
                                </f:facet>
                                <h:outputText  class="id-jsf- "   value="#{currentRow.strdescripcion}"/>
                            </rich:column>
                            <rich:column  width="100px">
                                <f:facet name="header">
                                    <h:outputText  class="id-jsf- "   value="#{var.imagen}"/>
                                </f:facet>
                                <h:panelGroup>
                                    <h:graphicImage value="#{currentRow.strurlimagen}" />
                                    <rich:jQuery selector="#Imagen img" query="addClass('pic-normal')"/>
                                    <rich:jQuery selector="#Imagen img" query="wrap('&lt;div class=\'wrap1\'&gt;&lt;/div&gt;')" />
                                    <rich:jQuery selector="#Imagen img" query="mouseover(function(){enlargePic(this)})"/>
                                    <rich:jQuery selector="#Imagen img" query="mouseout(function(){normalPic(this)})"/>
                                    <rich:jQuery name="enlargePic" query="stop().animate({width:'150px', height:'150px' })" />
                                    <rich:jQuery name="normalPic" query="stop().animate({width:'120px', height:'120px'})" />
                                </h:panelGroup>
                            </rich:column>
                            <rich:column  width="60px">
                                <f:facet name="header">
                                    <h:outputText  class="id-jsf- "   value="#{var.eliminar}"/>
                                </f:facet>
                                <a4j:commandButton id="eliminar" value="#{var.eliminar}" class="id-jsf-"  
                                                    render="tablaImagenes"
                                                   action="#{AtencionHumanitaria$AdminSolicitudAtencion.eliminarImagenLista(filaSeleccionada)}"/>
                            </rich:column>
                            <f:facet name="footer">
                                <rich:dataScroller renderIfSinglePage="false"></rich:dataScroller>
                            </f:facet>
                        </rich:dataTable>
                    </h:panelGroup>

                </center>
            </rich:collapsiblePanel>

        </h:form>
        <ui:include src="/modal/modalsolicitudatencion/confirmarCancelarSolicitud.xhtml"/>
        <ui:include src="/modal/modalsolicitudatencion/subirImagenAtencion.xhtml"/>
        <ui:include src="/modal/atencionHumanitaria/enviarsolicitudah.xhtml"/>
    </ui:define>
</ui:composition>
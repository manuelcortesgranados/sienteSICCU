<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="/facelets/template_main.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:a4j="http://richfaces.org/a4j" 
                xmlns:interkont="http://www.interkont.com/jsf"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:rich="http://richfaces.org/rich"
                xmlns:ui="http://java.sun.com/jsf/facelets">

    <ui:define name="head">
        <title>Cobra - Supervisor</title>
        <h:outputScript name="script_supervisor.js"/>
    </ui:define>
    <ui:define name="title">
        <h:outputText  styleClass="ikont-hot-cargargiros"   value="Cargar Giros"/>
    </ui:define>
    <ui:define name="menu">
        <ui:include src="/facelets/menu_gestion.xhtml"/>
    </ui:define>
    <ui:define name="menu_lateral">
        <ui:include src="/facelets/menu_lateral_financiera.xhtml"/>
    </ui:define>
    <ui:define name="body">
        <center>
            <h:form>
                <rich:collapsiblePanel id="PanelEncargo" header="#{var.ingresardatosordenpago}" switchType="ajax" expanded="true">
                    <center>
                        <h:panelGrid columns="2" id="panelen">

                            <h:outputLabel  styleClass="ikont-hol-lblnumeroorden"   id="lblnumeroorden"  value="#{var.numeroorden}" for="txtNumeroorden"/>
                            <h:panelGroup>
                                <h:inputText  id="txtNumeroorden"  value="#{Financiera$FiduFinanciera.financieraService.ordendepago.strordenpago}"
                                              required="true">
                                </h:inputText>
                                <rich:message for="txtNumeroorden" />
                            </h:panelGroup>

                            <h:outputText  styleClass="ikont-hot-fecha"    value="#{var.fecha}"/>
                            <rich:calendar locale="#{var.rcalendarlocale}" datePattern="#{var.formatofecha}" direction="topRight" id="fechaorden"
                                           value="#{Financiera$FiduFinanciera.financieraService.ordendepago.datefechaordenpago}" inputSize="10" immediate="true">

                            </rich:calendar>

                            <h:outputLabel  styleClass="ikont-hol-lblencargo"   id="lblencargo"  value="#{var.encargofiduciario}"/>
                            <h:panelGrid columns="3"  >
                                <h:panelGroup id="encargoorden" >
                                    <h:outputLabel  styleClass="ikont-hol-strdescripcion"   value="#{Financiera$FiduFinanciera.financieraService.ordendepago.encargofiduciario.strdescripcion}"/>

                                    <a4j:commandButton  id="bt-ver-listado-encargo"
                                                        oncomplete="#{rich:component('mp-listado-encargo')}.show();"  value="#{var.verencargo}" immediate="true"
                                                        render="gpEncargo" action="#{Financiera$FiduFinanciera.verEncargo}"
                                                        />
                                </h:panelGroup>
                            </h:panelGrid>

                            <h:outputText  styleClass="ikont-hot-lbldescripcionorden"   id="lbldescripcionorden"  value="#{var.descripcion}"/>
                            <h:panelGroup>
                                <h:inputTextarea id="txtdescripcionorden" cols="23" rows="4" value="#{Financiera$FiduFinanciera.financieraService.ordendepago.strdescripcionordenpago}"
                                                 required="true"/>
                                <rich:message for="txtdescripcionorden"  />
                            </h:panelGroup>

                            <h:outputLabel  styleClass="ikont-hol-lblvalororden"   id="lblvalororden"  value="#{var.valororden}"/>
                            <h:panelGroup>
                                <h:inputText id="txtvalororden" value="#{Financiera$FiduFinanciera.financieraService.ordendepago.numvlrordenpago}"
                                             required="true" >
                                    <f:convertNumber pattern="#{var.formatomoneda}"/>
                                </h:inputText>
                                <rich:message for="txtvalororden" />
                            </h:panelGroup>


                        </h:panelGrid>
                    </center>
                    <interkont:spacer width="30"/>
                    <interkont:spacer width="30"/>
                    <center>
                        <a4j:commandButton id="guardar" action="#{Financiera$FiduFinanciera.guardarOrdenPago}" value="#{var.guardar}"
                                           render="panelConfGuardar,tablaOrden" oncomplete="#{rich:component('panelConfirmaOrden')}.hide()" >

                        </a4j:commandButton>
                        <a4j:commandButton id="limpiar"  value="Limpiar" render="panelen" action="#{Financiera$FiduFinanciera.limpiarOrdenPago}" immediate="true">
                            <a4j:ajax event="complete" render="PanelEncargo,panelen" immediate="true"/>
                        </a4j:commandButton>
                    </center>
                </rich:collapsiblePanel>
            </h:form>
            <h:form>
                <rich:collapsiblePanel id="ordenpago" header="Listado Ordenes De Pago" switchType="ajax" expanded="false">
                    <h:panelGrid columns="3">
                        <h:outputText  styleClass="ikont-hot-buscarpalabraclave"   value="#{var.buscarpalabraclave} " />
                        <h:inputText value="#{Financiera$FiduFinanciera.filtro}" size="100"/>

                        <a4j:commandButton render="tablaOrden" action="#{Financiera$FiduFinanciera.filtrarOrden}" value="Buscar"/>

                    </h:panelGrid>
                    <rich:dataTable id="tablaOrden"
                                    rows="10"
                                    var ="_Orden"
                                    rowKeyVar="filaSeleccionada"
                                    onrowmouseover="this.style.backgroundColor='#B4DDEC'"
                                    onrowmouseout="this.style.backgroundColor='#FFFFFF'"
                                    sortMode="single"
                                    value="#{Financiera$FiduFinanciera.financieraService.listaordenpago}"
                                      >
                        <f:facet name="header">
                            <rich:columnGroup>
                                <rich:column colspan="4">
                                    <h:outputText  styleClass="ikont-hot-listadetercero"   value="#{var.listadetercero} de Orden de pago  #{Financiera$FiduFinanciera.totalfilas} #{var.paginaCiu} #{Financiera$FiduFinanciera.pagina}#{var.deCiu}#{Financiera$FiduFinanciera.totalpaginas}" />
                                </rich:column>

                                <rich:column width="150px" breakRowBefore="true">
                                    <h:outputText  styleClass="ikont-hot-numeroorden"   value="#{var.numeroorden}"/>
                                </rich:column>
                                <rich:column width="150px">
                                    <h:outputText  styleClass="ikont-hot-fecha"   value="#{var.fecha}" />
                                </rich:column>
                                <rich:column width="150px">
                                    <h:outputText  styleClass="ikont-hot-valor"   value="#{var.valor}"/>
                                </rich:column>
                                <rich:column width="150px">
                                    <h:outputText  styleClass="ikont-hot-numeroencargo"   value="#{var.numeroencargo}"/>
                                </rich:column>
                                <rich:column width="150px">
                                    <h:outputText  styleClass="ikont-hot-solicitante"   value="#{var.solicitante}"/>
                                </rich:column>
                            </rich:columnGroup>
                        </f:facet>
                        <rich:columnGroup id="CuerpoOrden">
                            <rich:column  width="150px" breakRowBefore="true">
                                <h:outputText  styleClass="ikont-hot-strordenpago"   value="#{_Orden.strordenpago}"/>
                            </rich:column>
                            <rich:column>
                                <h:outputText  styleClass="ikont-hot-datefechaordenpago"   value="#{_Orden.datefechaordenpago}"/>
                            </rich:column>
                            <rich:column>
                                <h:outputText  styleClass="ikont-hot-numvlrordenpago"   id="otxt-valorObras" value="#{_Orden.numvlrordenpago}">
                                    <f:convertNumber pattern="#{var.formatomoneda}"/>
                                </h:outputText>
                            </rich:column>
                            <rich:column>
                                <h:outputText  styleClass="ikont-hot-intnumencargofiduciario"   value="#{_Orden.encargofiduciario.intnumencargofiduciario}"/>
                            </rich:column>
                            <rich:column>
                                <h:outputText  styleClass="ikont-hot-strnombrecompleto"   value="#{_Orden.tercero.strnombrecompleto}"/>
                            </rich:column>
                        </rich:columnGroup>
                        <f:facet name="footer">
                            <rich:columnGroup>
                                <rich:column colspan="5" breakRowBefore="true">
                                    <center>
                                        <h:panelGrid columns="5">
                                            <a4j:commandButton value="#{var.primeroCiu}" disabled="#{!Financiera$FiduFinanciera.veranteriorreales}" render="tablaOrden" action="#{Financiera$FiduFinanciera.primerosrealesOrden}" immediate="true"/>
                                            <a4j:commandButton value="#{var.anteriorCiu}" disabled="#{!Financiera$FiduFinanciera.veranteriorreales}" render="tablaOrden" action="#{Financiera$FiduFinanciera.anterioresRealesOrden}" immediate="true"/>
                                            <a4j:commandButton value="#{var.siguienteCiu}" disabled="#{!Financiera$FiduFinanciera.verultimosreales}" render="tablaOrden" action="#{Financiera$FiduFinanciera.siguientesRealesOrden}" immediate="true"/>
                                            <a4j:commandButton value="#{var.ultimoCiu}" disabled="#{!Financiera$FiduFinanciera.verultimosreales}" render="tablaOrden" action="#{Financiera$FiduFinanciera.ultimoRealesOrden}" immediate="true"/>
                                        </h:panelGrid>
                                    </center>
                                </rich:column>
                            </rich:columnGroup>
                        </f:facet>
                    </rich:dataTable>
                </rich:collapsiblePanel>

            </h:form>
        </center>
        <ui:include src="/modal/confirmarordenpago.xhtml"/>
        <ui:include src="/modal/ingresandoModal.xhtml"/>
        <ui:include src="/modal/listadoencargofidu.xhtml"/>

    </ui:define>
</ui:composition>

<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition    xmlns="http://www.w3.org/1999/xhtml"
                   xmlns:ui="http://java.sun.com/jsf/facelets"
                   template="./../facelets/template_main.xhtml"
                   xmlns:a4j="http://richfaces.org/a4j"
                   xmlns:interkont="http://www.interkont.com/jsf"
                   xmlns:f="http://java.sun.com/jsf/core"
                   xmlns:h="http://java.sun.com/jsf/html"
                   xmlns:rich="http://richfaces.org/rich"
                   xmlns:fn="http://java.sun.com/jsp/jstl/functions"
                   xmlns:m="http://code.google.com/p/gmaps4jsf/"  
                   >
    <ui:define name="head">
        <link href="/#{var.versioncobra}/resources/css/style.css" rel="stylesheet" type="text/css" />
        <link href="/#{var.versioncobra}/resources/css/main.css" rel="stylesheet" type="text/css" />

        <script src="/#{var.versioncobra}/resources/amcharts/amcharts.js" type="text/javascript"></script>
        <script src="/#{var.versioncobra}/resources/amcharts/gauge.js" type="text/javascript"></script>
        <script src="/#{var.versioncobra}/resources/amcharts/serial.js" type="text/javascript"></script>
        <script type="text/javascript">
            localStorage.setItem('accionDetalleProyecto', "ikont-img-posicion-menu-proyecto ikont-posicion-detalle-proyecto");
        </script>
        <ui:include src="/includes/google_maps_key.xhtml" />   
    </ui:define>

    <ui:define name="title">
        <h:outputText styleClass="ikont-hot-houtdetalle" rendered="#{!var.nuevomapa}" value="#{var.houtdetalle}" />
        <h:outputText styleClass="ikont-hot-intcodobra" rendered="#{!var.nuevomapa}" value="(#{Supervisor$AdministrarObraNew.obra.intcodigoobra})" />
        <h:outputText styleClass="ikont-hot-strnombremedio" rendered="#{!var.nuevomapa}" value="#{Supervisor$AdministrarObraNew.obra.strnombremedio}" />
    </ui:define>

    <ui:define name="menu">
        <ui:include src="/facelets/menu_gestion.xhtml" />
    </ui:define>

    <ui:define name="menu_lateral">       
        <h:panelGroup rendered="#{var.permisonuevodiseno}">
            <ui:include src="/facelets/menu_lateral_novedades_zoom.xhtml" />
        </h:panelGroup>
    </ui:define>

    <ui:define name="menusuperior">
        <h:panelGroup rendered="#{SessionBeanCobra.cobraService.ciu and !var.permisonuevodiseno}">
            <ui:include src="/facelets/menu_superior_detalle_ciudadano.xhtml" />
        </h:panelGroup>
        <ui:include rendered="#{var.permisonuevodiseno}" src="/facelets/menu_superior_administrar_proyecto.xhtml" />
    </ui:define>

    <ui:define name="body">
        <h:body>
            <h:form prependId="false">               

                <h:inputHidden id="finfecha" value="#{Supervisor$DetalleObra.finentrega}" />
                <h:inputHidden id="valuepotencialele" value="#{Supervisor$AdministrarObraNew.obra.numvalavanfinanciaerodeclarado}"/>
            </h:form>

            <h:panelGroup rendered="#{var.nuevomapa}" layout="block" styleClass="ikont-hpg-zoom-detalleobra totalwidth">                
                <h:panelGrid  id="gpPrincipalInfCiudad-zoom" styleClass="totalwidth">
                    <h:form prependId="false" styleClass="totalwidth">
                        <h:panelGroup layout="block" styleClass="totalwidth font-general">
                            <center>
                                <br/>
                                <h:graphicImage    url="../resources/imgs/proyecto/gota.png"/>           
                                <br/>
                                <h:outputText styleClass="ikont-hot-zoom-strnombremedio" value="#{Supervisor$AdministrarObraNew.obra.strnombremedio}" />
                                <br/><br/>
                                <h:outputLabel styleClass="ikont-hol-strDireccionProyectoOut" value="#{Supervisor$AdministrarObraNew.obra.strnumcuenta}" />
                                <h:panelGroup rendered="#{SessionBeanCobra.usuarioObra.renderrecurso.btn_seguirproyecto}">
                                    <br/><br/>
                                    <h:commandButton  styleClass="ikont-hcb-seguirspry" value="#{var.seguirproyectociu}" rendered="#{!Supervisor$DetalleObra.seguidorporobra}" action="#{Supervisor$DetalleObra.registrarSeguirobra}">
                                    </h:commandButton>
                                    <h:commandButton  styleClass="ikont-hcb-sinseguirpry" value="#{var.dejardeseguirproyecto}" rendered="#{Supervisor$DetalleObra.seguidorporobra}" action="#{Supervisor$DetalleObra.eliminarSeguirobra}">
                                    </h:commandButton>
                                </h:panelGroup>
                                <br/><br/>

                                <!--inicio nuevo disiño-->

                                <h:panelGrid cellspacing="20" columns="2" styleClass="totalwidth font-general" columnClasses=",ikont-deta-rigth">
                                    <h:panelGroup layout="block" id="vistaMapa" styleClass="totalwidth">
                                        <m:map  latitude="#{Supervisor$AdministrarObraNew.obra.floatlatitud}" longitude="#{Supervisor$AdministrarObraNew.obra.floatlongitud}" enableScrollWheelZoom="true"  id="map12" 
                                                jsVariable="mapa" zoom="#{var.zoommapa}"  partiallyTriggered="false"  height="250px" width="600px">                                                                 
                                            <m:marker latitude="#{Supervisor$AdministrarObraNew.obra.floatlatitud}"
                                                      longitude="#{Supervisor$AdministrarObraNew.obra.floatlongitud}"

                                                      jsVariable="#{HomeGestion.marcador.jsVariable}"
                                                      draggable="false" >
                                                <m:icon imageURL="/#{var.versioncobra}#{Supervisor$AdministrarObraNew.obra.obtenerPin()}" width="20" height="34" shadowHeight="25"  shadowWidth="40"/>

                                            </m:marker>
                                        </m:map>
                                    </h:panelGroup>
                                    <rich:panel header="UBICACIÓN" headerClass="ikont-rf-p-hdr-giprom" bodyClass="ikont-rf-p-bd-giprom">
                                        <h:panelGrid  columns="1" styleClass="ikont-hpg-datosrelevantes">
                                            <h:panelGroup>
                                                <h:outputLabel styleClass="font-general" value="Longitud : " />
                                                <h:outputLabel styleClass="font-general" value="#{Supervisor$AdministrarObraNew.obra.floatlongitud}" />    
                                            </h:panelGroup>
                                            <br/>
                                            <h:panelGroup>
                                                <h:outputLabel styleClass="font-general" value="Latitud : " />
                                                <h:outputLabel styleClass="font-general" value="#{Supervisor$AdministrarObraNew.obra.floatlatitud}" />
                                            </h:panelGroup>
                                            <br/>                                           
                                            <h:panelGroup >
                                                <h:outputLabel styleClass="font-general" value="Clima promedio: " />
                                                <h:outputLabel styleClass="font-general" value="#{Supervisor$AdministrarObraNew.obra.strcorregimiento}" />    
                                            </h:panelGroup>
                                        </h:panelGrid>
                                    </rich:panel>
                                </h:panelGrid>
                                <h:panelGrid cellspacing="20" columns="3" styleClass="totalwidth font-general">
                                    <rich:panel header="DATOS BÁSICOS" headerClass="ikont-rf-p-hdr-giprom" bodyClass="ikont-rf-p-bd-giprom">
                                        <h:panelGrid columns="1" >

                                            <h:panelGrid columns="2">
                                                <h:outputLabel value="Departamento:" styleClass="font-general"></h:outputLabel>
                                                <h:outputLabel value="#{Supervisor$AdministrarObraNew.obra.tercero.strapellido1}" styleClass="font-general"></h:outputLabel>
                                            </h:panelGrid>
                                            <h:panelGrid columns="2">
                                                <h:outputLabel value="Municipio:" styleClass="font-general"></h:outputLabel>
                                                <h:outputLabel value="#{Supervisor$AdministrarObraNew.obra.tercero.strnombrecompleto}" styleClass="font-general"></h:outputLabel>
                                            </h:panelGrid>                                           
                                            <h:panelGrid columns="2">
                                                <h:outputLabel value="Sitio Web:" styleClass="font-general"></h:outputLabel>
                                                <h:outputLabel value="#{Supervisor$AdministrarObraNew.obra.strestydis}" styleClass="font-general"></h:outputLabel>
                                            </h:panelGrid>
                                            <h:panelGrid columns="2">
                                                <h:outputLabel value="Mail:" styleClass="font-general"></h:outputLabel>
                                                <h:outputLabel value="#{Supervisor$AdministrarObraNew.obra.strlogros}" styleClass="font-general"></h:outputLabel>
                                            </h:panelGrid>
                                            <h:panelGrid columns="2">
                                                <h:outputLabel value="Actividad económica:" styleClass="font-general"></h:outputLabel>
                                                <h:outputLabel value="#{Supervisor$AdministrarObraNew.obra.strobjetoobra}" styleClass="font-general"></h:outputLabel>
                                            </h:panelGrid>

                                        </h:panelGrid>
                                    </rich:panel>
                                    <rich:panel header="ALCALDE" headerClass="ikont-rf-p-hdr-giprom" bodyClass="ikont-rf-p-bd-giprom">
                                        <h:panelGrid columns="2">
                                            <h:graphicImage   styleClass="ikont-hgi-strfoto ikont-img-detalle-alcalde" url="#{Supervisor$AdministrarObraNew.obra.strimagenanterior}"/>           
                                            <h:panelGrid>
                                                <h:outputLabel value="#{Supervisor$AdministrarObraNew.obra.strcontratista}"  styleClass="font-general ikont-hol-nombreusuario"></h:outputLabel>

                                            </h:panelGrid>
                                        </h:panelGrid>
                                    </rich:panel>
                                    <rich:panel header="INFORMES Y PERSONAS" headerClass="ikont-rf-p-hdr-giprom" bodyClass="ikont-rf-p-bd-giprom">
                                        <h:panelGrid cellspacing="10" columns="1">
                                            <h:panelGrid columns="2" cellspacing="5">
                                                <h:commandLink styleClass="ikont-hcl-imgpontencialener img-detalle-proyecto" />   
                                                <h:panelGrid columns="1">
                                                    <h:outputLabel value="Potencial Energético" styleClass="font-general"></h:outputLabel>
                                                    <h:outputLabel value="Informe" styleClass="font-general"></h:outputLabel>
                                                    <h:outputLink value="" styleClass="ikont-hol-descargapoener">Descargar</h:outputLink>
                                                </h:panelGrid>
                                            </h:panelGrid>
                                            <h:panelGrid columns="2" cellspacing="5">
                                                <h:commandLink styleClass="ikont-hcl-imgidatosgenerales img-detalle-proyecto" />    
                                                <h:panelGroup layout="block">
                                                    <h:outputLabel value="# de habitantes :  " styleClass="font-general"></h:outputLabel>
                                                    <h:outputText value="#{Supervisor$AdministrarObraNew.obra.numvaldeclarado}"></h:outputText>
                                                    <br/>
                                                    <h:outputLabel value="# de encuestados :  " styleClass="font-general"></h:outputLabel>
                                                    <h:outputText styleClass="ikont-hot-intplazoo" value="#{Supervisor$AdministrarObraNew.obra.numvalavanfisicodeclarado}"></h:outputText>
                                                </h:panelGroup>
                                            </h:panelGrid>
                                        </h:panelGrid>
                                    </rich:panel>
                                </h:panelGrid>
                                <h:panelGrid cellspacing="20" columns="2" styleClass="totalwidth font-general" columnClasses=",ikont-deta-rigth">
                                    <rich:panel header="NECESIDADES ENERGÉTICAS DE LA ZONA" headerClass="ikont-rf-p-hdr-giprom" bodyClass="ikont-rf-p-bd-giprom">
                                        <h:panelGrid cellspacing="20" columns="2" styleClass="totalwidth font-general" columnClasses=",ikont-deta-rigth">
                                            <h:panelGroup layout="block" styleClass="ikont-hpg-giprom-ne">
                                                <h:panelGrid columns="1" >
                                                    <br/>
                                                    <h:outputText styleClass="ikont-hot-text-ne-pe" value="% NE"></h:outputText>
                                                    <h:panelGrid columns="2">
                                                        <h:outputLink styleClass="ikont-hot-img-ne"></h:outputLink>
                                                        <h:outputLabel styleClass="ikont-hot-value-ne-pe" value="#{Supervisor$AdministrarObraNew.obra.numvalprogramejec} %"/>
                                                    </h:panelGrid>
                                                </h:panelGrid>
                                            </h:panelGroup>    
                                            <h:panelGroup layout="block" styleClass="ikont-hpg-giprom-pe">
                                                <h:panelGrid columns="1" >
                                                    <br/>
                                                    <h:outputText styleClass="ikont-hot-text-ne-pe" value="% Potencial Energetico"></h:outputText>
                                                    <h:panelGrid columns="2" styleClass="totalwidth panelcenter">
                                                        <h:outputLink styleClass="ikont-hot-img-pe"></h:outputLink>
                                                        <h:outputLabel styleClass="ikont-hot-value-ne-pe" value="#{Supervisor$AdministrarObraNew.obra.numvalavanfinanciaerodeclarado} %"/>
                                                    </h:panelGrid>
                                                </h:panelGrid>
                                            </h:panelGroup>
                                        </h:panelGrid>
                                    </rich:panel>    
                                    <rich:panel header="% NBI" headerClass="ikont-rf-p-hdr-giprom" bodyClass="ikont-rf-p-bd-giprom">
                                        <h:outputText  styleClass="ikont-hot-scriptGraf"   value="#{Supervisor$AdministrarObraNew.gragiprom.graficoNBI}" escape="false" />
                                        <div id="graficoNBI" style="width: 335px; height: 215px; margin-left: -30px;"></div>
                                    </rich:panel>
                                </h:panelGrid>
                                <h:panelGrid cellspacing="20" columns="3" styleClass="totalwidth font-general">
                                    <rich:panel header="% NBI AL AÑO" headerClass="ikont-rf-p-hdr-giprom" bodyClass="ikont-rf-p-bd-giprom">
                                        <h:outputText  styleClass="ikont-hot-scriptGraf"   value="#{Supervisor$AdministrarObraNew.gragiprom.graficoNBIanual}" escape="false" />
                                        <div id="graficoNBIanual" style="width: 350px; height: 150px; margin-left: -20px;"></div>
                                    </rich:panel>
                                    <rich:panel header="% NBI POR LOCALIZACION (2005)" headerClass="ikont-rf-p-hdr-giprom" bodyClass="ikont-rf-p-bd-giprom">
                                        <h:outputText  styleClass="ikont-hot-scriptGraf"   value="#{Supervisor$AdministrarObraNew.gragiprom.graficoNBILocalizacion}" escape="false" />
                                        <div id="graficoNBILocalizacion" style="width: 350px; height: 150px; margin-left: -20px;"></div>
                                    </rich:panel>
                                    <rich:panel header="DESEMPEÑO INTEGRAL 2009" headerClass="ikont-rf-p-hdr-giprom" bodyClass="ikont-rf-p-bd-giprom">
                                        <rich:dataTable id="tabladesempenolocalida" 
                                                        rowClasses="background_azul,background_blanco" styleClass="ikont-rdt-tablavisitasfallidas totalwidth font-general"  
                                                        value="#{Supervisor$AdministrarObraNew.gragiprom.listadesempeno}"
                                                        var="actual" >
                                           
                                            <rich:column styleClass="panelizquierda">
                                                <h:outputText  styleClass="ikont-hot-idvisita"   value="#{actual.indMtdNombre}"/>
                                            </rich:column>
                                            <rich:column>
                                                <h:outputText  styleClass="ikont-hot-datefechainforme"   value="#{actual.indDtmValor}">
                                                    <f:convertNumber maxFractionDigits="2"/>
                                                </h:outputText>
                                            </rich:column>
                                                                                      
                                        </rich:dataTable>

                                    </rich:panel>
                                </h:panelGrid>
                                <h:panelGrid cellspacing="20" columns="1" styleClass="totalwidth font-general">
                                    <rich:panel header="INDICADOR MUNICIPAL" headerClass="ikont-rf-p-hdr-giprom" bodyClass="ikont-rf-p-bd-giprom ikont-rf-body-indicador">
                                        <h:panelGroup styleClass="totalwidth font-general" layout="block">
                                            <h:outputText styleClass="ikont-text-left" value="#{Supervisor$AdministrarObraNew.gragiprom.distribucionetnica}" escape="false"></h:outputText>
                                        </h:panelGroup>
                                    </rich:panel>
                                </h:panelGrid>

                            </center>
                        </h:panelGroup>
                    </h:form>
                </h:panelGrid>
            </h:panelGroup>
            <script src="/#{var.versioncobra}/resources/script_supervisor.js" type="text/javascript"></script>

        </h:body>

    </ui:define>
</ui:composition>

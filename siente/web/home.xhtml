<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:a4j="http://richfaces.org/a4j" xmlns:interkont="http://www.interkont.com/jsf"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:rich="http://richfaces.org/rich"
                template="./facelets/template_home.xhtml">

    <ui:define name="head"/> 

    <ui:define name="body">
        <h:form prependId="false">
            
            <h:panelGrid columns="2" rendered="#{SessionBeanCobra.usuarioObra.usuId==1}">
                    <h:outputText value="Código JsfUsuario Inicial:"/>
                    <h:inputText value="#{SessionBeanCobra.codinicial}"/>
                    <h:outputText value="Código JsfUsuario Final:"/>
                    <h:inputText value="#{SessionBeanCobra.codfinal}"/>

                    <a4j:commandButton value="Actualizar Contraseñas"  action="#{SessionBeanCobra.actualizarPasswords}" />
                    <h:commandButton value="Imprimir Usuarios activos" action="#{SessionBeanCobra.usuarioService.imprimirUsuarios}"/>
                    <h:commandButton value="Verificar Logueos" action="#{SessionBeanCobra.usuarioService.verificarLogueos}"/>
                    <h:commandButton value="Mirar Imagenes" action="#{SessionBeanCobra.mirarImagenes}"/>
                    <h:commandButton value="caracter especial img" action="#{SessionBeanCobra.mirarImg}"/>
                    <h:commandButton value="caracter especial doc" action="#{SessionBeanCobra.mirardoc}"/>
                    <h:commandButton value="borrar lo en" action="#{SessionBeanCobra.mirarDocnosrv}"/>
                    <h:commandButton value="Arreglar alimentaciones" action="#{SessionBeanCobra.arreglarsumasAlimentaciones}"/>
                    <h:commandButton value="Periodos educación" action="#{SessionBeanCobra.crearPeriodosEducacion}"/>
                    <h:commandButton value="relación Periodos educación" action="#{SessionBeanCobra.crearRelacionPeriodosEducacion}"/>
                    <h:commandButton value="Generar Usuarios Obra" action="#{SessionBeanCobra.generarUsuariosObra}"/>
                    <h:commandButton value="caracter especial documento Imagen" action="#{SessionBeanCobra.mostrarImagenesDocumentos}"/>
                </h:panelGrid>

            <h:panelGroup layout="block" styleClass="sliderpanel_element" id="product_gallery">
                <h:panelGroup layout="block"  id="sliderpanel_outer">
                    <h:panelGroup layout="block"  id="sliderpanel_inner">
                        <h:panelGroup layout="block" id="sliderpanel_items">
                            <a4j:region id="form_home" >
                                <a4j:repeat value="#{SessionBeanCobra.modulos}" var="modulo" >
                                    <h:panelGroup rendered="#{!var.permisonuevodiseno}" layout="block" styleClass="sliderpanel_element" >

                                        <h:panelGroup layout="block" styleClass="textomodulo">

                                            <h:outputText  styleClass="ikont-hot-strmodNmbre "   value="#{modulo.strmodNmbre}" />

                                        </h:panelGroup>
                                        <h:outputLink styleClass="#{modulo.strestilo} anchorLink" 
                                                      value="#{facesContext.externalContext.requestContextPath}#{modulo.strurlMdloRuta}">

                                        </h:outputLink>
                                    </h:panelGroup>

                                    <h:panelGroup rendered="#{var.permisonuevodiseno}" layout="block" styleClass="sliderpanel_element" id="contenedor_total_intro_usuario_registrado" >

                                        <div style=""  id="contenedor_texto">
                                            <h:outputLink styleClass="#{modulo.strestilo} a"
                                                          value="#{facesContext.externalContext.requestContextPath}#{modulo.strurlMdloRuta}">
                                                <h:outputText   value="#{modulo.strmodNmbre}" />
                                            </h:outputLink>
                                        </div>
                                    </h:panelGroup>

                                </a4j:repeat>
                            </a4j:region>
                        </h:panelGroup>
                    </h:panelGroup>
                </h:panelGroup>


            </h:panelGroup>

            <script >

                setInterval(function() {
                    if (localStorage.getItem('closeaplicaction') == 'true') {
                        localStorage.setItem('closeaplicaction', new Date().getTime());
                    }
                    var _after = (parseInt(localStorage.getItem('closeaplicaction'))) ? parseInt(localStorage.getItem('closeaplicaction')) : new Date().getTime();
                    var _time = parseInt(new Date().getTime()) - _after;
                    if (parseInt(_time) > 30000) {
                        localStorage.setItem('closeaplicaction', 'true');
                        closeaplication();
                    } else {
                        localStorage.setItem('closeaplicaction', new Date().getTime());
                    }
                }, 5000);

            </script>
        </h:form>
    </ui:define>



</ui:composition>

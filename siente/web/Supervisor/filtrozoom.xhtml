<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition  xmlns="http://www.w3.org/1999/xhtml"
                 xmlns:ui="http://java.sun.com/jsf/facelets"
                 xmlns:rich="http://richfaces.org/rich"
                 xmlns:h="http://java.sun.com/jsf/html"
                 xmlns:f="http://java.sun.com/jsf/core"
                 xmlns:a4j="http://richfaces.org/a4j" 
                 xmlns:interkont="http://www.interkont.com/jsf"
                 xmlns:composite="http://java.sun.com/jsf/composite"
                 >
    <h:head>
        <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
        <link href="#{facesContext.externalContext.requestContextPath}/resources/css/style.css" rel="stylesheet" type="text/css"/>            
        <link href="#{facesContext.externalContext.requestContextPath}/resources/css/main.css?#{var.version}" rel="stylesheet" type="text/css"/>
        <link href="#{facesContext.externalContext.requestContextPath}/resources/css/jquery-ui.css?#{var.version}" rel="stylesheet" type="text/css"/>
        <script type="text/javascript">
            Number.prototype.formatMoney = function(decPlaces, thouSeparator, decSeparator) {
                var n = this,
                        decPlaces = isNaN(decPlaces = Math.abs(decPlaces)) ? 0 : decPlaces,
                        decSeparator = decSeparator == undefined ? "." : decSeparator,
                        thouSeparator = thouSeparator == undefined ? "," : thouSeparator,
                        sign = -n > 0 ? "-" : "",
                        i = parseInt(n = Math.abs(+n || 0).toFixed(decPlaces)) + "",
                        j = (j = i.length) > 3 ? j % 3 : 0;
                return sign + (j ? i.substr(0, j) + thouSeparator : "") + i.substr(j).replace(/(\d{3})(?=\d)/g, "$1" + thouSeparator) + (decPlaces ? decSeparator + Math.abs(n - i).toFixed(decPlaces).slice(2) : "");
            };</script>

    </h:head>

    <rich:tabPanel  styleClass="tabPanelFiltroZoom" switchType="ajax" id="tab_login" activeItem="tab_dos">
        <rich:tab  header="#{var.filtroque}" id="tab_dos" name="tab_dos"  > 
            <h:graphicImage styleClass="imagen_punta1" value="/resources/imgs/logo_punta_filtro_zoom.png" />
            <h:panelGrid columns="1" styleClass="panel_filtro_zoom">
                <h:inputText  id="txtPalabraClave_filtro_nuevo"  value="#{HomeGestion.filtro.palabraclavefiltro}"
                              onclick="this.value = ''"  styleClass="input_filtro">
                    <rich:placeholder id="Ingresa_palabra" value="Ingresa palabra clave" />
                </h:inputText>

                <h:selectOneMenu rendered="#{var.tipoproyectoporsector}" style="" id="sectorProyecto" value="#{HomeGestion.filtro.intsectorproyecto}"  styleClass="input_filtro_select" >
                    <f:selectItems value="#{HomeGestion.claseObra}" />
                    <a4j:ajax event="valueChange" listener="#{HomeGestion.cambioSectorProyecto}" limitRender="true" transient="true" 
                              render="tiposProyecto,subtiposProyecto" execute="tiposProyecto,tipoProyecto,subtiposProyecto,subtipoProyecto" rendered="#{var.tipoproyectoporsector}" />
                </h:selectOneMenu>    
                <h:panelGroup id="tiposProyecto"  styleClass="input_filtro" >
                    <h:selectOneMenu  style="" id="tipoProyecto" value="#{HomeGestion.filtro.inttipoproyecto}"  styleClass="input_filtro_select" >
                        <f:selectItems value="#{HomeGestion.tiposProyectos}"/>
                        <a4j:ajax event="change" listener="#{HomeGestion.cargarSubtiposProyecto}" execute="subtiposProyecto,subtipoProyecto"
                                  render="subtiposProyecto"/>
                    </h:selectOneMenu>
                </h:panelGroup>
                <h:panelGroup id="subtiposProyecto"  styleClass="input_filtro" >
                    <h:selectOneMenu   id="subtipoProyecto" value="#{HomeGestion.filtro.intsubtipoproyecto}"  styleClass="input_filtro_select">
                        <f:selectItems value="#{HomeGestion.subTiposProyecto}" />
                    </h:selectOneMenu>
                </h:panelGroup> 

                <h:panelGroup id="ikont-estados-obra"  styleClass="input_filtro" rendered="#{!SessionBeanCobra.usuarioObra.renderrecurso.btnfiltro_ciudadano and SessionBeanCobra.logueadodesdemapa}">
                    <h:selectOneMenu  id="estadoObra" value="#{HomeGestion.filtro.intestadoobra}"  styleClass="input_filtro_select">
                        <f:selectItem itemLabel="Fase" itemValue="-1"/>
                        <f:selectItems value="#{HomeGestion.tiposEstadoObra}"/>
                    </h:selectOneMenu>
                </h:panelGroup>


                <h:inputHidden id="valormayor" value="#{HomeGestion.proyectovalormayor}" />
                <h:inputHidden id="numo" value="#{HomeGestion.numo}" />
                <h:inputHidden id="numero1"  value="#{HomeGestion.filtro.cuantiaini}"/>
                <h:inputHidden id="numero2"   value="#{HomeGestion.filtro.cuantiafin}"/>
                

                <h:panelGrid styleClass="ikont-hpg-slider-valor">           
                    <h:panelGrid id="numeros_la" columns="1" styleClass="ikont-hpg-slider-valor1">
                        <h:inputText   styleClass="input_filtro_2 ikont-hit-valor" value="VALOR:" disabled="true"/>
                        <rich:column>
                            <h:inputText   styleClass="input_filtro_2 ikont-hit-valor1" value="$ " disabled="true"/>
                            <h:inputText    styleClass="input_filtro_2 ikont-hit-valor2" id="numero3"  disabled="true" value="#{HomeGestion.filtro.cuantiaini}"/>
                            <h:inputText   styleClass="input_filtro_2 ikont-hit-valor3" value="a $ "  disabled="true"/>
                            <h:inputText   styleClass="input_filtro_2 ikont-hit-valor4" id="numero4" disabled="true" value="#{HomeGestion.filtro.cuantiafin}"/>
                        </rich:column>
                    </h:panelGrid>
                </h:panelGrid>
                <div id="slider-range" class="ikont-filtro-slider-range" ></div>
                <br/>
                <h:inputHidden id="ava1" value="#{HomeGestion.filtro.avance1}" />
                <h:inputHidden id="ava2" value="#{HomeGestion.filtro.avance2}" />

                <h:panelGrid styleClass="ikont-hpg-slider-avance">

                    <rich:column>
                        <h:inputText id="avance" styleClass="input_filtro_2 ikont-hit-avance1 " disabled="true"/> 
                    </rich:column>

                </h:panelGrid>
                <div id="slider-range-avance" class="ikont-filtro-slider-range-avance"></div>
            </h:panelGrid>
            <center>
                <a4j:commandButton  execute="txtPalabraClave_filtro_nuevo,numero1,numero2,estadoObra,subtiposProyecto,ava1,ava2" limitRender="true" render="ikont-hpg-vistas,panel_mapa_filtro" transient="true" action="#{HomeGestion.buscarProyectoPerformance()}" id="filtrar_nuevo1"   value="#{var.buscar}"
                                 styleClass="boton1 ikont-filtro-filtrar_btn" />
            </center>
            <h:inputText value="AVANCE:" styleClass="input_filtro_2 ikont-hit-avance2"  disabled="true"/> 
        </rich:tab>              
        <rich:tab header="#{var.filtrodonde}"   id="tab_uno" name="tab_uno"   >  
            <h:graphicImage styleClass="imagen_punta2" value="/resources/imgs/logo_punta_filtro_zoom.png" />
            <h:panelGrid columns="1" styleClass="panel_filtro_zoom "  >
                <h:panelGroup>
                    <h:panelGrid id="tipoorigen" columns="1" columnClasses="panelcenter" >
                        <h:panelGrid id="filtrodeptos" styleClass="ikont-hpg-filtrolocalidades"  columns="1" rendered="#{HomeGestion.inttipoorigen == 1}" >
                            <h:selectOneMenu  id="depto" value="#{HomeGestion.filtro.strcoddepto}" disabled="#{var.habilitarDepartamentoEjecutaraProyecto}"  styleClass="combos_ubicacion"
                                              rendered="#{HomeGestion.tipoOrigenUsuario.intidtipoorigen == 4}">
                                <f:selectItems value="#{HomeGestion.departamentos}"/>
                                <a4j:ajax event="valueChange" listener="#{HomeGestion.cargarMunicipios}" limitRender="true" transient="true" execute="@this"
                                          render="municipios"/>
                            </h:selectOneMenu>
                            <h:selectOneMenu  id="municipios" value="#{HomeGestion.filtro.strmunicipio}"  styleClass="combos_ubicacion"
                                              rendered="#{HomeGestion.tipoOrigenUsuario.intidtipoorigen != 1}">
                                <f:selectItems value="#{HomeGestion.municipios}" />
                            </h:selectOneMenu>
                        </h:panelGrid>
                    </h:panelGrid>
                </h:panelGroup>
            </h:panelGrid>
            <center>
                <a4j:commandButton  execute="municipios, depto, zona" limitRender="true" render="ikont-hpg-vistas,panel_mapa_filtro" transient="true" action="#{HomeGestion.buscarProyectoPerformance()}" id="filtrar_nuevo2"   value="#{var.buscar}"
                                 styleClass="boton1 ikont-filtro-filtrar_btn" />
            </center>
        </rich:tab>

        <rich:tab header="#{var.filtroquien}" id="tab_tres" name="tab_tres">
            <h:graphicImage styleClass="imagen_punta3" value="/resources/imgs/logo_punta_filtro_zoom.png" />
            <h:panelGrid columns="1" styleClass="panel_filtro_zoom"> 

                <h:inputText  id="auto_cliente" rendered="false"  value="#{HomeGestion.filtro.strcliente}">
                    <rich:placeholder id="placeHolderCliente" value="Cliente" />
                </h:inputText>
                
                <h:inputText  id="auto_contratista"  value="#{HomeGestion.filtro.strcontratista}">
                    <rich:placeholder id="placeHolderContratista" value="Contratista" />
                </h:inputText>
                
                <h:inputText  id="auto_interventor"  styleClass="input_filtro" value="#{HomeGestion.filtro.strinterventor}">
                    <rich:placeholder  id="placeHolderInterventor" value="#{var.interventorObra}" />
                </h:inputText>
                
                <h:inputText  id="auto_gerente"  styleClass="input_filtro" value="#{HomeGestion.filtro.strgerenteconvenio}">
                    <rich:placeholder id="placeHolderGerente" value="#{var.gerenteconvenio}" />
                </h:inputText>
                <br/>
                <br/>
            </h:panelGrid>
            
            
            <center>

                <a4j:commandButton  execute="auto_cliente,auto_contratista,auto_interventor,auto_gerente" limitRender="true" render="ikont-hpg-vistas,panel_mapa_filtro" transient="true" action="#{HomeGestion.buscarProyectoPerformance()}" id="filtrar_nuevo3"   value="#{var.buscar}"
                                 styleClass="boton1 ikont-filtro-filtrar_btn" />

            </center>
        </rich:tab>
    </rich:tabPanel>
</ui:composition>

<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:a4j="http://richfaces.org/a4j" 
                xmlns:interkont="http://www.interkont.com/jsf"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:rich="http://richfaces.org/rich"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="/facelets/template_main.xhtml">


    <ui:define name="head">
        <title>Cobra - Supervisor</title>
        <h:outputScript name="script_supervisor.js" />
        <h:outputScript name="validarletra.js"  library="js"/>
    </ui:define>
    <ui:define name="title">
        <h:outputText  styleClass="ikont-hot-reportaravance"   value="Reportar avance"/>

        <h:outputText  styleClass="ikont-hot-strnombremedio"    value="#{Supervisor$AdministrarObraNew.obra.strnombremedio}"/>

    </ui:define>
    <ui:define name="menu">
        <ui:include src="/facelets/menu_gestion.xhtml"/>
    </ui:define>
    <ui:define name="menu_lateral">
        <ui:include src="/facelets/menu_lateral_gestion.xhtml"/>
        <ui:include src="/facelets/menu_lateral_administrar.xhtml"/>
    </ui:define>
    <ui:define name="body">
        <h:form id="alimentaravance">
            <h:panelGroup id="gpPrincipalAlimentar" rendered="#{Supervisor$Alimentar.vertodoalimentar}">
                <rich:collapsiblePanel header="#{var.definirperiodoavance}" switchType="ajax" id="gpAlimentarObra"   rendered="#{!Supervisor$Alimentar.editarActividades}">
                  
                    <h:panelGrid id="gpBasicos" columns="2" >
                        <h:panelGrid columns="2"  columnClasses="panelizquierda,panelcenter">
                            <h:panelGroup >
                                <h:panelGrid id="valores" columns="2">
                                    <h:outputText  styleClass="ikont-hot-esteavanceposeeacta"   value="#{var.esteavanceposeeacta}"/>
                                    <h:selectOneMenu id="cmbcontrato" value="#{Supervisor$Alimentar.subiracta}" >
                                        <f:selectItem itemValue="true" itemLabel="Si"/>
                                        <f:selectItem itemValue="false" itemLabel="No"/>
                                        <a4j:ajax event="valueChange"  render="gpSubirDocumentos" execute="@this">
                                        </a4j:ajax>
                                    </h:selectOneMenu>


                                    <h:outputLabel  styleClass="ikont-hol-fechadelacta"    value="#{var.fechadelacta}" for="fechaalimentacion" />
                                    <h:selectOneMenu id="fecInfo" value="#{Supervisor$Alimentar.fechaescogida}"  rendered="#{var.varalimentacionxperiodo}">
                                        <f:selectItem itemValue="-1" itemLabel="Seleccione"/>
                                        <f:selectItems value="#{Supervisor$Alimentar.periodos}"/>
                                        <a4j:ajax event="valueChange" listener="#{Supervisor$Alimentar.fechaCambio}" execute="@this,layoutComentario" 
                                                  render="alimentaravance,valores,layoutComentario, layoutEjecutado, layoutComentafactor, layoutFactores, gpErrorAlimentar, pnActividades"/>

                                    </h:selectOneMenu>
                                    <h:panelGrid columns="2" rendered="#{var.varalimentacionxfecha}">
                                        <rich:calendar  required="true" datePattern="yyyy-MM-dd"  id="fechaalimentacion" inputSize="10" value="#{Supervisor$Alimentar.fechaAlimentacion}"
                                                        onchange="#{Supervisor$Alimentar.fechaCambio}" direction="topRight" >
                                                  </rich:calendar>
                                        <rich:message for="fechaalimentacion" styleClass="ikont-rm-fechaalimentacion"  />
                                    </h:panelGrid>

                                    <interkont:spacer width="10"/>
                                    <h:panelGroup id="gpErrorAlimentar">
                                        <blink>
                                            <h:outputText  styleClass="ikont-hot-mensajefecha"   value="#{Supervisor$Alimentar.mensajefecha}" rendered="#{!Supervisor$Alimentar.fechavalida}" />
                                        </blink>
                                    </h:panelGroup>

                                    <h:outputText  styleClass="ikont-hot-valorpry"    value="#{var.valorproyectado}:"/>
                                    <h:outputText  styleClass="ikont-hot-lblvalorproyect"   id="labelValorProyectado" value="#{Supervisor$Alimentar.alimentacion.numtotalproyacu}">
                                        <f:convertNumber pattern="$ ###,###.##" maxFractionDigits="6" minFractionDigits="2"/>
                                    </h:outputText>

                                </h:panelGrid>


                                <h:panelGrid id="layoutEjecutado" columns="3">
                                    <h:outputText  styleClass="ikont-hot-valorejecu1"    value="#{var.valortotalejecutado}:"/>
                                    <h:panelGroup id="valorEjecutado">
                                        <h:outputText  styleClass="ikont-hot-valorejec2"   id="labelValorEjecutado"   value="#{Supervisor$AdministrarObraNew.obra.numvalejecobra+Supervisor$Alimentar.totales[1]}">
                                            <f:convertNumber pattern="$ ###,###.##" maxFractionDigits="6" minFractionDigits="2"/>
                                        </h:outputText>
                                    </h:panelGroup>
                                    <interkont:spacer width="15"/>
                                    <h:outputText  styleClass="ikont-hot-stDesviacion"   id="stDesviacion"
                                                  value="#{var.desviacion}"/>
                                    <h:outputText  styleClass="ikont-hot-lblDesviacion"   id="lblDesviacion"
                                                   value="#{Supervisor$Alimentar.desviacion} %"/>
                                    <interkont:spacer width="10" rendered="#{!Supervisor$Alimentar.fechavalida}"/>
                                    <h:graphicImage  styleClass="ikont-hgi-imgDesviacion"   id="imgDesviacion" rendered="#{Supervisor$Alimentar.fechavalida}"
                                                    url="#{Supervisor$Alimentar.alimentacion.semaforo.strimagen}"/>
                                    <interkont:spacer width="15" rendered="#{Supervisor$Alimentar.fechavalida}"/>

                                    <a4j:commandButton id="btIngresar" value="#{var.cuantificaractividades}" action="#{Supervisor$Alimentar.habilitarEdicionActividades}" render="gpPrincipalAlimentar"
                                                       rendered="#{Supervisor$Alimentar.fechavalida}" />

                                </h:panelGrid>
                            </h:panelGroup>

                            <rich:panel header="#{var.comentarioobra}"   >
                                <center>
                                    <h:panelGrid id="layoutComentario" columns="1" columnClasses="panelcenter" border="1"  >

                                        <h:inputTextarea cols="60" id="comentSem"  rows="8" styleClass="ikont-hita-comentSem"   value="#{Supervisor$Alimentar.alimentacion.textcomentario}" />
                                        <rich:tooltip value="#{var.ingresecomentariosdelaobra}" target="comentSem"  followMouse="true"  horizontalOffset="5" verticalOffset="5" layout="block"/>

                                    </h:panelGrid>
                                </center>
                            </rich:panel>
                        </h:panelGrid>

                    </h:panelGrid>
                </rich:collapsiblePanel>
                <h:panelGroup id="pnActividades" rendered="#{Supervisor$Alimentar.editarActividades}">
                    <rich:collapsiblePanel header="#{var.actividadesproyecto}"  switchType="ajax" rendered="#{Supervisor$Alimentar.fechavalida}">
                       
                        <rich:panel id="layoutTablaMatrix" >
                            <h:panelGrid columns="2" >
                                <rich:dataTable  id="datosgeneralesAlimentar" >

                                    <f:facet name="header">
                                        <rich:columnGroup>
                                            <rich:column    colspan="5">

                                            </rich:column>

                                            <rich:column  breakRowBefore="true" width="160px">
                                                <h:outputText  styleClass="ikont-hot-rc1"   value="#{var.valorproyecto}"/>
                                            </rich:column>
                                            <rich:column  width="150px">
                                                <h:outputText  styleClass="ikont-hot-rc2"   value="#{var.valorejecutadofecha}"/>
                                            </rich:column>
                                            <rich:column   width="150px">
                                                <h:outputText  styleClass="ikont-hot-rc3"   value="#{var.valorejeesteeporte}"/>
                                            </rich:column>
                                            <rich:column   width="150px">
                                                <h:outputText  styleClass="ikont-hot-rc4"   value="#{var.valorejecutadoacumulado}"/>
                                            </rich:column>
                                            <rich:column   width="150px">
                                                <h:outputText  styleClass="ikont-hot-rc5"   value="#{var.porcentajeavanceacum}"/>
                                            </rich:column>                                                

                                        </rich:columnGroup>
                                    </f:facet>
                                    <rich:columnGroup>
                                        <rich:column ></rich:column>
                                    </rich:columnGroup>
                                    <f:facet name="footer">
                                        <rich:columnGroup>
                                            <rich:column >
                                                <h:outputText  styleClass="ikont-hot-stvaltotal2"   id="stvaltotal2"   value="#{Supervisor$AdministrarObraNew.obra.numvaltotobra}">
                                                    <f:convertNumber pattern="$#,###.##" maxFractionDigits="6" minFractionDigits="2"/>
                                                </h:outputText>
                                            </rich:column>
                                            <rich:column >
                                                <h:outputText  styleClass="ikont-hot-stvaleje2"   id="stvaleje2"   value="#{Supervisor$AdministrarObraNew.obra.numvalejecobra}">
                                                    <f:convertNumber pattern="$#,###.##" maxFractionDigits="6" minFractionDigits="2"/>
                                                </h:outputText>
                                            </rich:column>
                                            <rich:column >
                                                <h:outputText  styleClass="ikont-hot-stvalejecreporte2"   id="stvalejecreporte2"   value="#{Supervisor$Alimentar.totales[1]}">
                                                    <f:convertNumber pattern="$#,###.##" maxFractionDigits="6" minFractionDigits="2"/>
                                                </h:outputText>
                                            </rich:column>
                                            <rich:column >
                                                <h:outputText  styleClass="ikont-hot-stvalejecacum2"   id="stvalejecacum2"  value="#{Supervisor$Alimentar.totales[1]+Supervisor$AdministrarObraNew.obra.numvalejecobra}">
                                                    <f:convertNumber pattern="$#,###.##" maxFractionDigits="6" minFractionDigits="2"/>
                                                </h:outputText>
                                            </rich:column>
                                            <rich:column >
                                                <h:outputText  styleClass="ikont-hot-stporceporeje2"   id="stporceporeje2"  value="#{(Supervisor$AdministrarObraNew.obra.numvalejecobra+Supervisor$Alimentar.totales[1])/Supervisor$AdministrarObraNew.obra.numvaltotobra}">
                                                    <f:convertNumber pattern="###.## %"/>
                                                </h:outputText>
                                            </rich:column>
                                        </rich:columnGroup>
                                    </f:facet>

                                </rich:dataTable>
                                <h:panelGrid styleClass="ikont-hpg-gridalim1"   cellpadding="0" cellspacing="0" >
                                    <a4j:commandLink styleClass="ikont-acl-calculaMatrix"    action="#{Supervisor$Alimentar.calcularTodaMatrix}" 
                                                     render="layoutTablaMatrix, layoutComentafactor"/>
                                </h:panelGrid>
                            </h:panelGrid>


                            <interkont:spacer height="10" />
                            <center>
                                <a4j:commandButton value="#{var.adicionar} #{var.houtitem}s #{var.no} #{var.previstos}"
                                                   action="#{Supervisor$Alimentar.inicializarAdicionActividades}"
                                                   oncomplete="#{rich:component('modalAdicioarActividades')}.show();" 
                                                   execute="@this">
                                </a4j:commandButton>
                            </center>


                            <rich:dataTable rowKeyVar="filaSeleccionada" id="listaActividadesAlimentar"
                                            onrowmouseout="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'"
                                            onrowmouseover="this.style.backgroundColor='#B4DDEC'" sortMode="single"
                                            value="#{Supervisor$Alimentar.registrosmatrix}" var="registros" 
                                            >

                                <f:facet name="header">
                                    <rich:columnGroup>
                                        <rich:column id= "actividades" colspan="1" width="120px">
                                            <h:outputText  styleClass="ikont-hot-rcalim1"   value="#{var.actividades}"/>
                                        </rich:column>
                                        <rich:column id= "total" colspan="4" >
                                            <h:outputText  styleClass="ikont-hot-rcalim2"   value="#{var.totalactividad}"/>
                                        </rich:column>
                                        <rich:column id= "totalEjecutado" colspan="3" >
                                            <h:outputText  styleClass="ikont-hot-rcalim3"   value="#{var.totalejecutado}"/>
                                        </rich:column>

                                        <rich:column id= "descripcion" breakRowBefore="true" rowspan="2" width="260px">
                                            <h:outputText  styleClass="ikont-hot-rcalim4"   value="#{var.descripcion}" />
                                        </rich:column>
                                        <rich:column id= "unidad" rowspan="2" width="25px">
                                            <h:outputText  styleClass="ikont-hot-rcalim5"   value="#{var.unidad}"/>
                                        </rich:column>
                                        <rich:column id= "valorUnitario" rowspan="2" width="25px">
                                            <h:outputText  styleClass="ikont-hot-rcalim6"   value="#{var.valorunitaio}"/>
                                        </rich:column>
                                        <rich:column id= "cantidad" rowspan="2" width="30px">
                                            <h:outputText  styleClass="ikont-hot-rcalim7"   value="#{var.cantidad}"/>
                                        </rich:column>
                                        <rich:column id= "precio" rowspan="2" width="30px">
                                            <h:outputText  styleClass="ikont-hot-rcalim8"   value="#{var.valorprogramado}"/>
                                        </rich:column>
                                        <rich:column id= "cantidad2" rowspan="2" width="30px">
                                            <h:outputText  styleClass="ikont-hot-rcalim1"   value="#{var.cantidadejecutada}"/>
                                        </rich:column>
                                        <rich:column id= "precio2" rowspan="2" width="30px">
                                            <h:outputText  styleClass="ikont-hot-rcalim9"   value="#{var.valorejecutadoreporte}"/>
                                        </rich:column>                                           
                                        <rich:column id= "cantidad3" rowspan="2" width="30px">
                                            <h:outputText  styleClass="ikont-hot-rcalim10"   value="#{var.porcentajeavance}"/>
                                        </rich:column>
                                        <rich:column id= "precio3" rowspan="2" width="30px">
                                            <h:outputText  styleClass="ikont-hot-rcalim11"   value="#{var.ingresarcantidadde}"/>
                                        </rich:column>
                                    </rich:columnGroup>
                                </f:facet>
                                
                                
                                        <rich:columnGroup >
                                            <rich:column id="Descripcion" width="250px">
                                                <rich:panel > 

                                                    <h:outputText  styleClass="ikont-hot-strdescactividad"   value="#{registros.actividadobra.strdescactividad}"  rendered="#{!registros.actividadobra.boolimprevisto}"/>
                                                    <h:outputText  styleClass="ikont-hot-strdescactividad1"   value="#{registros.actividadobra.strdescactividad}"   rendered="#{registros.actividadobra.boolimprevisto}"/>

                                                </rich:panel> 
                                            </rich:column>
                                            <rich:column id="Unidad"  >
                                                <h:outputText  styleClass="ikont-hot-rcalimd1"   value="#{registros.actividadobra.strtipounidadmed}" />
                                            </rich:column>
                                            <rich:column id="Precio" >
                                                <h:outputText  styleClass="ikont-hot-rcalimd2"   value="#{registros.actividadobra.numvalorplanifao}"   >
                                                    <f:convertNumber pattern="$#,###.##" maxFractionDigits="6" minFractionDigits="2"/>
                                                </h:outputText>
                                            </rich:column>
                                            <rich:column id="Cantidad2" >
                                                <h:outputText  styleClass="ikont-hot-rcalimd3"   value="#{registros.actividadobra.floatcantplanifao}"  />
                                            </rich:column>
                                            <rich:column id="TotalActividad" >
                                                <h:outputText  styleClass="ikont-hot-rcalimd4"   value="#{registros.actividadobra.numvalorplanifao*registros.actividadobra.floatcantplanifao}" styleClass="ikont-"  >
                                                    <f:convertNumber pattern="$#,###.##" maxFractionDigits="6" minFractionDigits="2"/>
                                                </h:outputText>
                                            </rich:column>
                                            <rich:column id="CantFaltAct" >
                                                <h:outputText  styleClass="ikont-hot-rcalimd5"   id="cantFaltante" value="#{registros.actividadobra.floatcantidadejecutao+registros.floatcantejec}" styleClass="ikont-"  />
                                            </rich:column>

                                            <rich:column id="ValorEjec" >
                                                <h:outputText  styleClass="ikont-hot-rcalimd6"   id="ValorEjecObra" value="#{registros.actividadobra.numvalorplanifao * registros.floatcantejec}" styleClass="ikont-"  >
                                                    <f:convertNumber pattern="$#,###.##" maxFractionDigits="6" minFractionDigits="2"/>
                                                </h:outputText>
                                            </rich:column>
                                            <rich:column id="ValorFaltanAct" >                                          
                                                <h:outputText  styleClass="ikont-hot-rcalimd7"   id="valorFaltante"  value="#{(registros.actividadobra.boolimprevisto) ? 0 : (registros.actividadobra.floatcantidadejecutao+registros.floatcantejec)/registros.actividadobra.floatcantplanifao}" styleClass="ikont-"  >
                                                    <f:convertNumber type="percent"/>
                                                </h:outputText>
                                            </rich:column>
                                            <rich:column id="CantidadEjec" >
                                                <h:panelGrid styleClass="ikont-hot-rcalimd8"   cellpadding="0" cellspacing="0" columns="2" > 
                                                    <h:inputText size="13" id="txtCantEjec" value="#{registros.floatcantejec}" disabled="#{!Supervisor$Alimentar.editarActividades}">
                                                        <f:validateDoubleRange minimum="0" />
                                                    </h:inputText>
                                                    <a4j:commandLink styleClass="ikont-acl-calcutodamatrix"    action="#{Supervisor$Alimentar.calcularTodaMatrix}"  
                                                                     render="layoutTablaMatrix, layoutComentafactor"/>

                                                </h:panelGrid>
                                                <rich:message styleClass="ikont-rm-txtCantEjec"    for="txtCantEjec"/>
                                            </rich:column>
                                        </rich:columnGroup>
                                


                                <f:facet name="footer">
                                    <rich:columnGroup id="pie">
                                        <rich:column colspan="3">TOTALES
                                        </rich:column>
                                        <rich:column>
                                            <interkont:spacer width="2"/>
                                        </rich:column>
                                        <rich:column >
                                            <h:outputText  styleClass="ikont-hot-Pie0"   id="Pie0" value="#{Supervisor$Alimentar.totales[0]}" styleClass="ikont-"  >
                                                <f:convertNumber pattern="$#,###.##" maxFractionDigits="6" minFractionDigits="2"/>
                                            </h:outputText>
                                        </rich:column>

                                        <rich:column>
                                            <interkont:spacer width="2"/>
                                        </rich:column>

                                        <rich:column >
                                            <h:outputText  styleClass="ikont-hot-Pie1"   id="Pie1" value="#{Supervisor$Alimentar.totales[1]}" styleClass="ikont-"  >
                                                <f:convertNumber pattern="$#,###.##" maxFractionDigits="6" minFractionDigits="2"/>
                                            </h:outputText>
                                        </rich:column>


                                        <rich:column>
                                            <interkont:spacer width="2"/>
                                        </rich:column>
                                    </rich:columnGroup>
                                </f:facet>
                            </rich:dataTable>




                            <rich:collapsiblePanel header="#{var.avancescualitativos}" id="pncual" switchType="ajax"  >
                              
                                <h:panelGrid columns="3" columnClasses="inputsDetalle,inputsDetalle"  >
                                    <interkont:spacer width="17"/>
                                    <interkont:spacer height="14"/>
                                    <interkont:spacer height="14"/>
                                    <interkont:spacer height="20"/>
                                    <h:panelGrid columns="3" id="Cualitativa"  >
                                        <h:panelGrid styleClass="ikont-hpg-gridali2"  />
                                        <h:outputLabel  styleClass="ikont-hol-txtAspectoEvaluar"   id="txtAspectoEvaluar"  value="#{var.aspectoEvaluar}" for="txtAspectoEvaluar">
                                            <rich:message for="txtAspectoEvaluar" />
                                        </h:outputLabel>
                                        <h:selectOneMenu id="comboAspectoEvaluar" value="#{Supervisor$Alimentar.ali.tipocualitativa.intidtipocualificacion}" >
                                            <f:selectItems value="#{Supervisor$Alimentar.itemstipoculitativa}"/>
                                        </h:selectOneMenu>

                                        <h:panelGrid styleClass="ikont-hpg-gridali3"  />
                                        <h:outputLabel  styleClass="ikont-hol-lblLogroPry"   id="lblLogroProyecto"  value="#{var.logroProyecto}" />
                                        <h:inputTextarea cols="55" id="txtLogroProyecto" rows="4" value="#{Supervisor$Alimentar.ali.strlogro}"/>

                                        <h:panelGrid styleClass="ikont-hpg-gridali4"  />
                                        <h:outputLabel  styleClass="ikont-hol-difiPry"   id="lblDificultadProyecto"  value="#{var.dificultadProyecto}" />
                                        <h:inputTextarea cols="55" id="txtDificultadProyecto" rows="4" value="#{Supervisor$Alimentar.ali.strdificultad}"/>
                                    </h:panelGrid>
                                </h:panelGrid>
                                <h:panelGrid columns="2" columnClasses="inputsDetalle,inputsDetalle" >
                                    <h:panelGrid />
                                    <a4j:commandButton value="#{var.agregar}" id="agregar_avance" execute="@this,Cualitativa" 
                                                       action="#{Supervisor$Alimentar.agregarAlimentacionCualitativa}"
                                                       oncomplete="#{rich:component('panelConfGuardadoCualitativa')}.show();"
                                                       render="Cualitativa,tablaAvancesCualitativos,layoutMensajeCualitativa"
                                                       >
                                    </a4j:commandButton>
                                </h:panelGrid>

                                <center>
                                    <h:panelGroup  id="tablaAvancesCualitativos">
                                        <center>
                                            <rich:dataTable sortMode="single"  
                                                            value ="#{Supervisor$Alimentar.listitemculi}" var="row" rendered="#{not empty Supervisor$Alimentar.listitemculi}" binding="#{Supervisor$Alimentar.tablaEliminarItemCualita}">

                                                <rich:column id="tc-strAspectoEvualuar" width="600px">
                                                    <f:facet name="header">
                                                        <h:outputText  styleClass="ikont-hot-tipologro"   value="#{var.tipologro}" />
                                                    </f:facet>
                                                    <h:outputText  styleClass="ikont-hot-strAspectoEvualuar"   id="otxt-strAspectoEvualuar" value="#{row.tipocualitativa.strnombre}"/>
                                                </rich:column>
                                                <rich:column id="tc-strAspectoEvualuar1" width="600px"
                                                             >
                                                    <f:facet name="header">
                                                        <h:outputText  styleClass="ikont-hot-logro"   value="#{var.logro}" />
                                                    </f:facet>
                                                    <h:inputTextarea id="otxt-strAspectoEvualuar1" value="#{row.strlogro}" readonly="true" cols="35" rows="3" />
                                                </rich:column>
                                                <rich:column id="tc-strAspectoEvualuar2" width="600px"
                                                             >
                                                    <f:facet name="header">
                                                        <h:outputText  styleClass="ikont-hot-dificultad"   value="#{var.dificultad}" />
                                                    </f:facet>
                                                    <h:inputTextarea id="otxt-strAspectoEvualuar2" value="#{row.strdificultad}" readonly="true" cols="35" rows="3" />
                                                </rich:column>
                                                <rich:column id="tc-streliminarAvance" width="200px"
                                                             >
                                                    <f:facet name="header">
                                                        <h:outputText  styleClass="ikont-hot-eliminar"   value="#{var.eliminar}" />
                                                    </f:facet>

                                                    <a4j:commandLink execute="@this" value="#{var.eliminar}" action="#{Supervisor$Alimentar.removerAlimentacionCualitativa}"
                                                                     render="tablaAvancesCualitativos" >

                                                    </a4j:commandLink>
                                                </rich:column>
                                            </rich:dataTable>
                                        </center>
                                    </h:panelGroup>
                                </center>
                            </rich:collapsiblePanel>
                            <rich:collapsiblePanel header="#{var.impactoSocial}"  switchType="ajax">
                               
                                <h:panelGrid columns="3" columnClasses="inputsDetalle,inputsDetalle" width="60%">
                                    <interkont:spacer width="17" height="14"/>
                                    <interkont:spacer height="14"/>
                                    <interkont:spacer height="14"/>
                                    <interkont:spacer height="20"/>
                                    <h:panelGrid columns="3" >
                                        <h:panelGrid styleClass="ikont-hpg-gridali5"  />
                                        <h:outputLabel  styleClass="ikont-hol-numHabi"   id="lblnumHabitantes"  value="#{var.numeroHabitantesben}" for="numHabitantes" rendered="#{Supervisor$AdministrarObraNew.obra.sedeeducativa==null}"/>
                                        <h:outputLabel  styleClass="ikont-hol-poblaestu"   id="lblpoblacionestudiantil"  value="#{var.poblacionestudiantil}:" for="numHabitantes" rendered="#{Supervisor$AdministrarObraNew.obra.sedeeducativa!=null}"/>
                                        <rich:inputNumberSpinner  id="numHabitantes" value="#{Supervisor$Alimentar.alimentacion.numhabafectados}" minValue="0" maxValue="50000000" />

                                        <h:panelGrid styleClass="ikont-hpg-gridali5"  />
                                        <h:outputLabel  styleClass="ikont-hol-numEmpleoDirectogen"     value="#{var.numEmpleoDirectogen}"  rendered="#{Supervisor$AdministrarObraNew.obra.tipoobra.inttipoobra!=59}"/>
                                        <h:outputLabel  styleClass="ikont-hol-imp_inst"     value="#{var.imp_inst}"  rendered="#{Supervisor$AdministrarObraNew.obra.tipoobra.inttipoobra==59}"/>
                                        <rich:inputNumberSpinner  id="numEmpleoDirecto" value="#{Supervisor$Alimentar.alimentacion.numempdirectos}" minValue="0" maxValue="50000000" />

                                        <h:panelGrid styleClass="ikont-hpg-gridali5"  />
                                        <h:outputLabel  styleClass="ikont-hol-numEmpleoInDirectogen"    value="#{var.numEmpleoInDirectogen}" rendered="#{Supervisor$AdministrarObraNew.obra.tipoobra.inttipoobra!=59}"/>
                                        <h:outputLabel  styleClass="ikont-hol-imp_acto"     value="#{var.imp_acto}"  rendered="#{Supervisor$AdministrarObraNew.obra.tipoobra.inttipoobra==59}"/>
                                        <rich:inputNumberSpinner  id="numEmpleoInDirecto" value="#{Supervisor$Alimentar.alimentacion.numempindirectos}" minValue="0" maxValue="50000000" />

                                    </h:panelGrid>
                                </h:panelGrid>
                            </rich:collapsiblePanel>
                            <center>
                                <h:panelGrid id="layoutError">
                                    <rich:messages />
                                    <h:outputText  styleClass="ikont-hot-msjMatrix"    value="#{Supervisor$Alimentar.mensajeMatrix}" rendered="#{Supervisor$Alimentar.validezalimentacion}"/>
                                    <a4j:commandButton id="BTaceptarMatrix" rendered="#{!Supervisor$Alimentar.validezalimentacion}" render="gpPrincipalAlimentar"
                                                       action="#{Supervisor$Alimentar.cambioMatrix}" value="#{var.aceptar}"                      />

                                </h:panelGrid>
                            </center>
                        </rich:panel>
                    </rich:collapsiblePanel>
                </h:panelGroup>
                <h:panelGrid id="layoutComentafactor" columns="2" columnClasses="top_align"  rendered="#{!Supervisor$Alimentar.editarActividades}">

                    <rich:collapsiblePanel header="#{var.atencion}" id="layoutFactores"  rendered="#{Supervisor$Alimentar.desviado}" switchType="ajax">
                       
                        <h:outputText  styleClass="ikont-hot-factoresdeatraso"    value="#{var.factoresdeatraso}"/>
                        <h:panelGrid columns="3" columnClasses="labelsDatos,labelsDatos, labelsDatos ">
                            <h:outputText  styleClass="ikont-hot-tipodefactoratraso"    value="#{var.tipodefactoratraso}"/>
                            <h:selectOneMenu id="select_tipofactor" value="#{Supervisor$Alimentar.tipofactorselec}"  >
                                <f:selectItems value="#{Supervisor$Alimentar.tipoFactorOption}" />
                                <a4j:ajax event="valueChange" render="layoutFactor" listener="#{Supervisor$Alimentar.combotipoCambio_action}" execute="@this"/>
                            </h:selectOneMenu>
                            <interkont:spacer width="45"/>
                            <h:outputText  styleClass="ikont-hot-houtfactoresdeatraso"    value="#{var.houtfactoresdeatraso}"/>
                            <h:panelGroup id="layoutFactor">
                                <h:panelGrid>
                                    <h:selectOneMenu id="select_factor" value="#{Supervisor$Alimentar.factorselec}" >
                                        <f:selectItems value="#{Supervisor$Alimentar.factoresOption}" />
                                    </h:selectOneMenu>
                                    <a4j:commandButton  action="#{Supervisor$Alimentar.agregar_action}"  render="pgFactores"
                                                        value="#{var.btnanadirmas}"
                                                        />
                                </h:panelGrid>
                            </h:panelGroup>

                        </h:panelGrid>
                        <h:panelGrid columns="1" id="pgFactores" >
                            <h:panelGroup >
                                <rich:dataTable id="tablaFactores" binding="#{Supervisor$Alimentar.tablaFactores}" rows="4"
                                                onrowmouseout="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'"
                                                onrowmouseover="this.style.backgroundColor='#B4DDEC'" sortMode="single"
                                                value="#{Supervisor$Alimentar.listaFactores}" var="registros"  >
                                    <f:facet name="header">
                                        <rich:columnGroup>
                                            <rich:column width="150px" >
                                                <h:outputText  styleClass="ikont-hot-houtfactor"   value="#{var.houtfactor}"/>
                                            </rich:column>
                                            <rich:column width="150px">
                                                <h:outputText  styleClass="ikont-hot-houttipofactor"   value="#{var.houttipofactor}"/>
                                            </rich:column>
                                            <rich:column width="100px">
                                                <h:outputText  styleClass="ikont-hot-eliminar"   value="#{var.eliminar}"/>
                                            </rich:column>
                                        </rich:columnGroup>
                                    </f:facet>
                                    <rich:columnGroup>
                                        <rich:column id="descripcion" width="150px">
                                            <h:outputText  styleClass="ikont-hot-rcol1"   value="#{registros.strdescfactor}"/>
                                        </rich:column>
                                        <rich:column id="tipfactor" width="150px">
                                            <h:outputText  styleClass="ikont-hot-rcol2"   value="#{registros.tipofactoratraso.strdesctipoatraso}"/>
                                        </rich:column>
                                        <rich:column id="Eliminar" width="100">
                                            <a4j:commandButton id="btEliminar" value="#{var.eliminar}" immediate="true"
                                                               action="#{Supervisor$Alimentar.removerFactor}" render="pgFactores" />
                                        </rich:column>
                                    </rich:columnGroup>
                                    <f:facet name="footer">
                                        <rich:columnGroup >
                                            <rich:column colspan="3">
                                                <rich:dataScroller id="dsfactores" for="tablaFactores" render="tablaFactores"/>
                                            </rich:column>
                                        </rich:columnGroup>
                                    </f:facet>
                                </rich:dataTable>
                            </h:panelGroup>
                        </h:panelGrid>

                    </rich:collapsiblePanel>
                </h:panelGrid>

                <rich:collapsiblePanel header="#{var.anadirimagen}" switchType="ajax" id="gpSubirImagen" expanded="false"   rendered="#{!Supervisor$Alimentar.editarActividades}">
                   
                    <h:panelGrid id="layoutImagenDetalle" styleClass="ikont-hpg-imgdeta"   >
                        <h:graphicImage  styleClass="ikont-hgi-imgPeriodo"   id="imgPeriodo" url="#{Supervisor$Alimentar.pathImagen}" width="185" />
                        <a4j:commandButton id="btAdjuntarImagen" value="#{var.anadirimagen}"
                                           onclick="#{rich:component('modalImagen')}.show(); return true;"
                                           styleClass="ikont-acb-adjunimg" />
                    </h:panelGrid>
                </rich:collapsiblePanel>
                <rich:collapsiblePanel header="#{var.anadirotrosdoc}" switchType="ajax" id="gpSubirDocumentos" expanded="#{Supervisor$Alimentar.subiracta}"  rendered="#{!Supervisor$Alimentar.editarActividades}">
                  
                    <center>
                        <h:panelGrid id="layoutActa" columns="6">
                            <h:outputLabel  styleClass="ikont-hol-acta"   id="lblActa"  value="#{var.acta}:" for="txtActa">
                                
                            </h:outputLabel>
                            <interkont:spacer width="42"/>

                            <h:inputText size="40" id="txtActa" readonly="true" value="#{Supervisor$Alimentar.urlacta}" />
                            <a4j:commandButton id="btActa" value="#{var.examinar}" immediate="true"
                                               onclick="#{rich:component('panelActa')}.show();return true;"
                                               />
                        </h:panelGrid>
                    </center>
                </rich:collapsiblePanel>

                <rich:collapsiblePanel id="pnVideo" header="#{var.houtvideo}" switchType="ajax" expanded="false"   rendered="#{!Supervisor$Alimentar.editarActividades}">
                    
                    <center>
                        <h:panelGrid id="layoutVideoMemoria" columns="3">
                            <h:panelGroup>
                                <h:outputLabel  styleClass="ikont-hol-video"   id="lblVideo"  value="#{var.video}:">
                                    
                                </h:outputLabel>
                            </h:panelGroup>

                            <rich:dataGrid columns="1" rowKeyVar="row" value="#{Supervisor$Alimentar.cargadorVideo.archivos}" var="file" >
                                <h:inputText id="otxt_nombreVideo" value=" #{file.nombre}" disabled="true" size="60"/>
                            </rich:dataGrid>
                            <a4j:commandButton id="btVideo" value="#{var.examinar}" immediate="true"
                                               onclick="#{rich:component('modalVideo')}.show();"
                                               />
                            <interkont:spacer width="15"/>
                        </h:panelGrid>
                    </center>
                </rich:collapsiblePanel>




                <h:panelGrid style ="width:100%;text-align:center;" rendered="#{!Supervisor$Alimentar.editarActividades}">
                    <a4j:commandButton id="btFinAlimenta" value="#{var.finalizar}" immediate="true" 
                                       action="#{Supervisor$Alimentar.validarAlimentar}" render="layoutGuardar"
                                       oncomplete="#{rich:component('panelConfirmaGuardar')}.show();"
                                       >
                    </a4j:commandButton>
                </h:panelGrid>
           </h:panelGroup>
        </h:form>
       <ui:include src="/modal/panelConfirmaGuardarAlimentar.xhtml"/>
        <ui:include src="/modal/panelGuardadoModal.xhtml"/>
        <ui:include src="/modal/panelImagenModal.xhtml"/>
        <ui:include src="/modal/panelVideoModal.xhtml"/>
        <ui:include src="/modal/panelActaAlimentacionModal.xhtml"/>
        <ui:include src="/modal/confirmarGuardadoCualitativa.xhtml"/>                
        <ui:include src="/modal/alimentacion/modalAdicionarActividaes.xhtml"/>
        <ui:include src="/modal/alimentacion/panelActaPrecios.xhtml"/>
    </ui:define>

</ui:composition>

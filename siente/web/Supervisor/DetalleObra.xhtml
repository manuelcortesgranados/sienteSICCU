<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition    xmlns="http://www.w3.org/1999/xhtml"
                   xmlns:ui="http://java.sun.com/jsf/facelets"
                   template="./../facelets/template_main.xhtml"
                   xmlns:a4j="http://richfaces.org/a4j"
                   xmlns:interkont="http://www.interkont.com/jsf"
                   xmlns:f="http://java.sun.com/jsf/core"
                   xmlns:h="http://java.sun.com/jsf/html"
                   xmlns:rich="http://richfaces.org/rich"
                   xmlns:fn="http://java.sun.com/jsp/jstl/functions"
                   xmlns:m="http://code.google.com/p/gmaps4jsf/"  
                   >
    <ui:define name="head">
        <link href="/#{var.versioncobra}/resources/css/reloj.css" rel="stylesheet" type="text/css" />
        <link href="/#{var.versioncobra}/resources/css/style.css" rel="stylesheet" type="text/css" />
        <link href="/#{var.versioncobra}/resources/css/sliderman.css" rel="stylesheet" type="text/css" />
        <link href="/#{var.versioncobra}/resources/reloj/css/flipclock.css" rel="stylesheet" type="text/css" />


        <script src="/#{var.versioncobra}/resources/amcharts/amcharts.js" type="text/javascript"></script>
        <script src="/#{var.versioncobra}/resources/amcharts/serial.js" type="text/javascript"></script>
        <script type="text/javascript">
            localStorage.setItem('accionDetalleProyecto', "ikont-img-posicion-menu-proyecto ikont-posicion-detalle-proyecto");
        </script>
        <ui:include src="/includes/google_maps_key.xhtml" />   
    </ui:define>

    <ui:define name="title">
        <h:outputText styleClass="ikont-hot-houtdetalle" rendered="#{!var.nuevomapa}" value="#{var.houtdetalle}" />
        <h:outputText styleClass="ikont-hot-intcodobra" rendered="#{!var.nuevomapa}" value="(#{Supervisor$AdministrarObraNew.obra.intcodigoobra})" />
        <h:outputText styleClass="ikont-hot-strnombremedio" rendered="#{!var.nuevomapa}" value="#{Supervisor$AdministrarObraNew.obra.strnombremedio}" />
    </ui:define>

    <ui:define name="menu">
        <ui:include src="/facelets/menu_gestion.xhtml" />
    </ui:define>

    <ui:define name="menu_lateral">
        <h:panelGroup  rendered="#{!var.permisonuevodiseno}">
            <ui:include src="./../facelets/menu_lateral_gestion.xhtml" />
            <ui:include src="./../facelets/menu_lateral_administrar.xhtml" />  
        </h:panelGroup>
        <h:panelGroup rendered="#{var.permisonuevodiseno}">
            <ui:include src="/facelets/menu_lateral_novedades_zoom.xhtml" />
        </h:panelGroup>
    </ui:define>

    <ui:define name="menusuperior">
        <h:panelGroup rendered="#{SessionBeanCobra.cobraService.ciu and !var.permisonuevodiseno}">
            <ui:include src="/facelets/menu_superior_detalle_ciudadano.xhtml" />
        </h:panelGroup>
        <ui:include rendered="#{var.permisonuevodiseno}" src="/facelets/menu_superior_administrar_proyecto.xhtml" />
    </ui:define>

    <ui:define name="body">
        <h:body onload="cargarDetalle()">
            <h:form prependId="false">
                <a4j:jsFunction id="iniDetalle" name="cargarDetalle">
                    <a4j:ajax event="complete" oncomplete="showModal()" rendered="#{SessionBeanCobra.vermensajeinterventor and Supervisor$AdministrarObraNew.obra.solicitud_obra!=null and !SessionBeanCobra.cobraService.ciu and var.varmodalsupervisor}" />
                </a4j:jsFunction>

                <h:inputHidden id="finfecha" value="#{Supervisor$DetalleObra.finentrega}" />
               
            </h:form>

            <h:panelGroup rendered="#{var.nuevomapa}" layout="block" styleClass="ikont-hpg-zoom-detalleobra">
                <h:form prependId="false">
                    <h:inputHidden id="estaen-zoom" value="#{(Supervisor$AdministrarObraNew.obra.numvalejecobra/Supervisor$AdministrarObraNew.obra.numvaltotobra)*100}" />
                </h:form>
                <interkont:spacer height="10" />
                <h:panelGrid  id="gpPrincipalInfCiudad-zoom">
                    <h:form prependId="false">
                        <h:panelGroup layout="block">
                            <center>
                                <h:outputText styleClass="ikont-hot-zoom-intcodobra" value="(#{Supervisor$AdministrarObraNew.obra.intcodigoobra})" />
                                <br/>
                                <h:outputText styleClass="ikont-hot-zoom-strnombremedio" value="#{Supervisor$AdministrarObraNew.obra.strnombremedio}" />
                                <br/>
                                <h:outputLabel styleClass="ikont-hol-strDireccionProyectoOut" value="#{Supervisor$AdministrarObraNew.obra.strdireccion}" />
                                <br/>
                                <h:panelGroup rendered="#{SessionBeanCobra.usuarioObra.renderrecurso.btn_seguirproyecto}">
                                    <h:commandLink  styleClass="ikont-hcb-seguirspry" rendered="#{!Supervisor$DetalleObra.seguidorporobra}" action="#{Supervisor$DetalleObra.registrarSeguirobra}">
                                    </h:commandLink>
                                    <h:commandLink  styleClass="ikont-hcb-seguirspry-label" value="#{var.seguirproyectociu}" rendered="#{!Supervisor$DetalleObra.seguidorporobra}" action="#{Supervisor$DetalleObra.registrarSeguirobra}">
                                    </h:commandLink>
                                    <h:commandLink  styleClass="ikont-hcb-sinseguirpry" rendered="#{Supervisor$DetalleObra.seguidorporobra}" action="#{Supervisor$DetalleObra.eliminarSeguirobra}">
                                    </h:commandLink>
                                    <h:commandLink  styleClass="ikont-hcb-sinseguirpry-label" value="#{var.dejardeseguirproyecto}" rendered="#{Supervisor$DetalleObra.seguidorporobra}" action="#{Supervisor$DetalleObra.eliminarSeguirobra}">
                                    </h:commandLink>
                                </h:panelGroup>
                            </center>
                        </h:panelGroup>
                        <rich:collapsiblePanel switchType="client" header="Cómo va el proyecto" expanded="true">
                            <h:panelGrid columns="3">
                                <h:outputLabel styleClass="ikont-hol-detalle-proyecto">Tiempo para la entrega</h:outputLabel>
                                <h:outputLabel styleClass="ikont-hol-detalle-proyecto">Semáforo 
                                    <h:outputText value="#{Supervisor$AdministrarObraNew.obra.numvalejecobra/Supervisor$AdministrarObraNew.obra.numvaltotobra}" styleClass="ikont-hot-detalle-proyecto">
                                        <f:convertNumber pattern="###.## %" />
                                    </h:outputText>
                                </h:outputLabel>
                                <h:panelGroup layout="block">
                                    <h:outputLabel styleClass="ikont-hol-detalle-proyecto" value="#{var.modalciudadanoasiva}"></h:outputLabel>    
                                    <h:outputText styleClass="ikont-hot-detalle-proyecto" value=" vrs. " >
                                    </h:outputText>    
                                    <h:outputLabel styleClass="ikont-hol-detalle-proyecto" value="#{var.modalciudadanodeberiair}"></h:outputLabel>    
                                </h:panelGroup>
                                <div class="your-clock"></div>
                                <h:panelGrid  >
                                    <h:outputText styleClass="ikont-hcl-#{Supervisor$DetalleObra.semaforo} ikont-hot-semaforo dtsemafomoro" >
                                        <f:convertNumber pattern="###.## %" />
                                    </h:outputText>

                                </h:panelGrid>
                                <h:panelGroup layout="block" >
                                    <div id="graficoAvanceFisico" style="width: 350px; height: 80px; margin-top: -50px; margin-left: -15px;">
                                    </div>
                                    <h:outputText  styleClass="ikont-hot-scriptGraf"   value="#{Supervisor$GraficoAvanceFisico.grafico.scriptGrafico}" escape="false" />
                                </h:panelGroup>

                            </h:panelGrid>
                        </rich:collapsiblePanel>
                        <rich:collapsiblePanel switchType="client" header="Información" expanded="true" headerClass="estilo-prueba">
                            <h:panelGrid id="pg_valores_financieros" columns="2" >
                                <h:panelGrid styleClass="ikont-hpg-valoresproyecto" columns="2" columnClasses=",buttondetallevalor,,buttondetallevalor,,buttondetallevalor">
                                    <h:panelGrid >
                                        <h:outputLabel styleClass=" ikont-hol-detalle-proyecto" >Valor global del proyecto</h:outputLabel>    
                                        <h:outputText styleClass="ikont-hot-zoom-numvobra" value="#{Supervisor$DetalleObra.valorinterventoria + Supervisor$AdministrarObraNew.obra.numvaltotobra}">
                                            <f:convertNumber pattern="#{var.formatomoneda}" />
                                        </h:outputText>
                                    </h:panelGrid>
                                    <h:panelGroup>

                                    </h:panelGroup>
                                    <h:panelGrid >
                                        <h:outputLabel styleClass="ikont-hot-textobra9 ikont-hol-detalle-proyecto">Valor del proyecto</h:outputLabel>
                                        <h:outputText styleClass="ikont-hot-zoom-soliobra" value="#{Supervisor$AdministrarObraNew.obra.numvaltotobra }">
                                            <f:convertNumber pattern="#{var.formatomoneda}" />
                                        </h:outputText>
                                    </h:panelGrid>
                                    <h:commandLink  id="ver_objeto_zoom" value="#{var.verinfciu}" styleClass="ikont-hcb-ver_objeto">
                                        <rich:tooltip followMouse="true" direction="bottomRight" horizontalOffset="5" 
                                                      verticalOffset="5"  styleClass="tooltipinf_ciudadano" style="width: 400px;">
                                            <a4j:repeat id="rpNumContratos" value="#{Supervisor$AdministrarObraNew.listaContratoObra}" var="relacionContrato">
                                                <h:outputText  value="#{var.houtnrocontrato}"/><br/>
                                                <h:outputText value="- #{relacionContrato.contrato.strnumcontrato}"></h:outputText><br/>
                                                <h:outputText value="#{var.objetocontrato}: " /><br/>
                                                <h:outputText value="#{relacionContrato.contrato.strnombre}" /><br/><br/>
                                            </a4j:repeat>

                                        </rich:tooltip>
                                    </h:commandLink>
                                    <h:panelGrid>
                                        <h:outputLabel styleClass="ikont-hol-detalle-proyecto">Valor de la interventoría</h:outputLabel>
                                        <h:outputText styleClass="ikont-hot-zoom-numvaltotobra" value="#{Supervisor$DetalleObra.valorinterventoria}">
                                            <f:convertNumber pattern="#{var.formatomoneda}" />
                                        </h:outputText>
                                    </h:panelGrid>
                                    <h:panelGroup>
                                        <h:commandLink  styleClass="ikont-hcb-ver_objeto" id="otNumContratos" value="#{var.verinfciu}" rendered="#{Supervisor$DetalleObra.valorinterventoria > 0}">
                                            <rich:tooltip followMouse="true" direction="bottomRight" horizontalOffset="5"
                                                          verticalOffset="5"  styleClass="tooltipinf_ciudadano" style="width: 400px;">
                                                <a4j:repeat id="rpNumContratosInterventoria" value="#{Supervisor$AdministrarObraNew.listaContratoInterventoria}" var="relacionContratoInterventoria">
                                                    <h:outputText value="#{var.objetocontrato}: " /><br/>
                                                    <h:outputText value="#{relacionContratoInterventoria.contrato.strnombre}" /><br/>
                                                    <h:outputText  value="#{var.houtnrocontrato}"/><br/>
                                                    <h:outputText value="- #{relacionContratoInterventoria.contrato.strnumcontrato}"></h:outputText><br/><br/>
                                                </a4j:repeat>
                                            </rich:tooltip>
                                        </h:commandLink>
                                    </h:panelGroup>

                                </h:panelGrid>
                                <h:panelGrid columns="1">
                                    <h:panelGroup layout="block" styleClass="content-info-contrato">
                                        <h:panelGrid columns="2" columnClasses="verticalalingtop">
                                            <h:commandLink styleClass="ikont-hcl-zoom-contrante" />
                                            <h:panelGroup layout="block">
                                                <h:outputText styleClass="ikont-hot-contrataneciu" value="#{var.contrataneciu}: "></h:outputText>
                                                <h:outputLabel styleClass="ikont-hot-supervisorciu" value="#{Supervisor$AdministrarObraNew.obra.tercero.strnombrecompleto}"></h:outputLabel>
                                            </h:panelGroup>

                                        </h:panelGrid>
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" styleClass="content-info-contrato">
                                        <h:panelGrid columns="2" columnClasses="verticalalingtop">
                                            <h:commandLink styleClass="ikont-hcl-zoom-nocontrato" />
                                            <h:panelGroup layout="block">
                                                <h:outputText styleClass="ikont-hot-supervisorciu" value="#{var.supervisorciu}: " ></h:outputText>
                                                <h:outputLabel styleClass="ikont-hot-strinterventor" value="#{Supervisor$AdministrarObraNew.obra.strinterventor}" rendered="#{Supervisor$AdministrarObraNew.obra.strinterventor!='' and Supervisor$AdministrarObraNew.obra.strinterventor!= null}"></h:outputLabel>
                                            </h:panelGroup>
                                        </h:panelGrid>
                                    </h:panelGroup>

                                    <h:panelGroup rendered="#{!SessionBeanCobra.cobraService.ciu and SessionBeanCobra.logueadodesdemapa}"  styleClass="content-info-contrato" layout="block">
                                        <h:panelGrid columns="2" columnClasses="verticalalingtop">
                                            <h:commandLink styleClass="ikont-hcl-zoom-contratista" title="#{var.verconvenios}" rendered="#{!SessionBeanCobra.cobraService.ciu}" immediate="true"   action="#{Supervisor$Contrato.cargarContratoConvenio}">
                                                <a4j:param assignTo="#{Supervisor$Contrato.mostrarContratoConvenio}" value="#{Supervisor$AdministrarObraNew.obra.contrato.intidcontrato}" />
                                            </h:commandLink>
                                            <h:panelGroup layout="block">
                                                <h:outputText styleClass="ikont-hot-ncontratociu" value="N. DE CONVENIO: "></h:outputText>
                                                <h:outputLabel styleClass="ikont-hot-strnumcontrato" value="#{Supervisor$AdministrarObraNew.obra.contrato.strnumcontrato}" />                                                   
                                            </h:panelGroup>
                                        </h:panelGrid>
                                    </h:panelGroup>
                                    
                                    <h:panelGroup rendered="#{!SessionBeanCobra.cobraService.ciu and SessionBeanCobra.logueadodesdemapa}"  styleClass="content-info-contrato" layout="block">
                                        <h:panelGrid columns="2" columnClasses="verticalalingtop">
                                            <h:commandLink styleClass="ikont-hcl-zoom-contratista" title="#{var.verconvenios}" rendered="#{!SessionBeanCobra.cobraService.ciu}" immediate="true"   action="#{Supervisor$Contrato.cargarContratoConvenio}">
                                                <a4j:param assignTo="#{Supervisor$Contrato.mostrarContratoConvenio}" value="#{Supervisor$AdministrarObraNew.obra.contrato.intidcontrato}" />
                                            </h:commandLink>
                                            <h:panelGroup layout="block">
                                                <h:outputText styleClass="ikont-hot-ncontratociu" value="Nom. DEL CONVENIO: "></h:outputText>
                                                <h:outputLabel styleClass="ikont-hot-strnumcontrato" value="#{Supervisor$AdministrarObraNew.obra.contrato.textobjeto}" />                                                   
                                            </h:panelGroup>
                                        </h:panelGrid>
                                    </h:panelGroup>
                                    
                                    <h:panelGroup  styleClass="content-info-contrato" layout="block">
                                        <h:panelGrid columns="2" columnClasses="verticalalingtop">
                                            <h:commandLink rendered="#{!SessionBeanCobra.cobraService.ciu and SessionBeanCobra.logueadodesdemapa}" styleClass="ikont-hcl-zoom-contratista" title="#{var.vercontrato}"  immediate="true"   action="#{Supervisor$Contrato.cargarContratoConvenio}">
                                                <a4j:param assignTo="#{Supervisor$Contrato.mostrarContratoConvenio}" value="#{Supervisor$AdministrarObraNew.primerContratoObra.intidcontrato}" />
                                            </h:commandLink>
                                            <h:commandLink rendered="#{SessionBeanCobra.cobraService.ciu or !SessionBeanCobra.logueadodesdemapa}" styleClass="ikont-hcl-zoom-contratista" title="#{var.vercontrato}" />
                                            <h:panelGroup layout="block">
                                                <h:outputText styleClass="ikont-hot-ncontratociu" value="#{var.ncontratociu}: "></h:outputText>
                                                <h:outputLabel styleClass="ikont-hot-strnumcontrato" value="#{Supervisor$AdministrarObraNew.primerContratoObra.strnumcontrato}" />                                                   
                                            </h:panelGroup>
                                        </h:panelGrid>
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" styleClass="content-info-contrato">
                                        <h:panelGrid columns="2" columnClasses="verticalalingtop">
                                            <h:commandLink styleClass="ikont-hcl-zoom-supervosor " />
                                            <h:panelGroup layout="block">
                                                <h:outputText styleClass="ikont-hot-contraticiu" value="#{var.contratistaciu}: " />
                                                <h:outputLabel styleClass="ikont-hot-nbre" value="#{Supervisor$AdministrarObraNew.primerContratoObra.contratista.strnombre}" />
                                                <h:outputLabel styleClass="ikont-hot-otContratistas" id="otContratistas" value="#{Supervisor$AdministrarObraNew.numContratosObra} Contratistas">
                                                    <rich:tooltip followMouse="true" direction="bottomRight" horizontalOffset="5"
                                                                  verticalOffset="5" styleClass="ikont-rtt-tool">
                                                        <a4j:repeat id="rpContratistas" value="#{Supervisor$AdministrarObraNew.listaContratoObra}" var="relacionContrato">
                                                            <h:outputText styleClass="ikont-hot-nbre1" value="- #{relacionContrato.contrato.contratista.strnombre}"></h:outputText> <br/>
                                                        </a4j:repeat>
                                                    </rich:tooltip>
                                                </h:outputLabel>
                                            </h:panelGroup>
                                        </h:panelGrid>
                                    </h:panelGroup>

                                </h:panelGrid>
                            </h:panelGrid>
                        </rich:collapsiblePanel>
                        <rich:collapsiblePanel switchType="ajax" header="Contratos asociados" expanded="true" toggleListener="#{Supervisor$AdministrarObraNew.llenarContrato}" >
                            <ui:include src="/modal/contratoModal.xhtml"/>                        
                        </rich:collapsiblePanel>
                        <rich:collapsiblePanel switchType="client" header="Imágenes y evolución" expanded="true">
                            <h:panelGrid columns="2">
                                <h:panelGrid    >
                                    <h:panelGrid   rowClasses="alignverticaldetalle" columns="2">
                                        <h:outputLabel></h:outputLabel>
                                        <h:panelGrid  columnClasses="panelderecha" columns="2" width="5">
                                            <a4j:commandLink styleClass="ikont-acl-omvermas" onclick=" #{rich:component('modalImagenvermas')}.show();
                return  true;" action="#{Supervisor$DetalleObra.imagenEvolucion}" ></a4j:commandLink>
                                            <h:commandLink styleClass="ikont-" action="#{Supervisor$AdministrarObraNew.iniciarVideos}" rendered="false"></h:commandLink>
                                        </h:panelGrid>
                                    </h:panelGrid>
                                    <h:panelGrid columns="2" columnClasses="panelcenter">
                                        <h:panelGrid styleClass="ikont-hpg-griddetaob2" >
                                            <a4j:commandLink oncomplete=" #{rich:component('modalImagenvermas')}.show();
                                                             return  true;"  action="#{Supervisor$DetalleObra.imagenEvolucion}"  render="modalImagenvermas">
                                                <h:graphicImage styleClass="ikont-hgi-imganterior " width="169" height="150" value="#{Supervisor$DetalleObra.strimagenAnterior}" />
                                            </a4j:commandLink>
                                            <h:outputLabel styleClass="ikont-hol-detalle-proyecto" value="Antes" style="border-bottom: solid 1px #8D8D8D;"></h:outputLabel>
                                        </h:panelGrid>

                                        <h:panelGrid styleClass="ikont-hpg-griddetaob3" >
                                            <a4j:commandLink oncomplete=" #{rich:component('modalImagenvermas')}.show();
                                                             return  true;"  action="#{Supervisor$DetalleObra.imagenEvolucion}"  render="modalImagenvermas" >
                                                <h:graphicImage  styleClass="ikont-hgi-imgactual" width="169" height="150" value="#{Supervisor$DetalleObra.strimagenActual}" />
                                            </a4j:commandLink>

                                            <h:outputLabel styleClass="ikont-hol-detalle-proyecto" value="Ahora" style="border-bottom: solid 1px #8D8D8D;"></h:outputLabel>
                                        </h:panelGrid>
                                    </h:panelGrid>
                                </h:panelGrid>
                                <h:panelGrid id="pg_ubicacion_evolucion"  columns="1" >
                                    <h:outputLabel>Conozca la evolución</h:outputLabel>
                                    <h:panelGroup layout="block" styleClass="panelcenter">
                                        <h:outputText  styleClass="ikont-hot-scriptGrafico1"   value="#{Supervisor$GraficoEvolucionProyectoCiudadano.grafico.scriptGrafico}" escape="false"/>
                                        <!-- al div que va a contener el grafico debe tener los valores de width y heigth en su atriburo style -->
                                        <div id="graficoEvolucionProyecto" style="width: 550px; height: 200px; text-align: left;">
                                        </div>
                                    </h:panelGroup>
                                </h:panelGrid>
                            </h:panelGrid>
                        </rich:collapsiblePanel>
                        <rich:collapsiblePanel switchType="client" header="Datos relevantes" expanded="true">
                            <h:panelGrid columns="4" class="ikont-hpg-datosrelevantes" columnClasses="verticalalingtop,verticalalingtop,verticalalingtop,verticalalingtop,verticalalingtop,verticalalingtop,verticalalingtop">
                                <h:panelGrid styleClass="ikont-hpg-griddetaob">
                                    <h:commandLink styleClass="ikont-hcl-imgduracion img-detalle-proyecto" onclick="return false;"/>
                                    <h:outputLabel>Duración</h:outputLabel>
                                </h:panelGrid>
                                <h:panelGrid styleClass="ikont-hpg-pg_impactosocial">
                                    <h:commandLink styleClass="ikont-hcl-imgimpactosocial img-detalle-proyecto" onclick="return false;"/>
                                    <h:outputLabel>Impacto social</h:outputLabel>
                                </h:panelGrid>
                                <h:panelGrid  styleClass="ikont-hgi-imgestobra">
                                    <h:commandLink styleClass="ikont-hcl-imgestadoproyecto img-detalle-proyecto estado#{Supervisor$AdministrarObraNew.obra.tipoestadobra.intestadoobra}" onclick="return false;"/>
                                    <h:outputLabel>Estado</h:outputLabel>
                                </h:panelGrid>
                                <h:panelGrid styleClass="ikont-hpg-tipo_obra">
                                    <h:commandLink styleClass="ikont-hcl-imgtipoproyecto img-detalle-proyecto tipo#{Supervisor$AdministrarObraNew.obra.tipoobra.tipoproyecto.intidtipoproyecto} " onclick="return false;"/>
                                    <h:outputLabel>Tipo</h:outputLabel>
                                </h:panelGrid>
                                <h:panelGrid styleClass="ikont-hpg-griddetaob">
                                    <interkont:spacer height="15" />
                                    <h:outputText styleClass="ikont-hot-intplazoo" value="#{Supervisor$AdministrarObraNew.obra.intplazoobra} #{var.diasciu}"></h:outputText>

                                    <h:panelGrid columns="2" styleClass="panelcenter">
                                        <h:outputLabel styleClass="ikont-hot-desde" value="Desde:"></h:outputLabel>
                                        <h:outputLabel styleClass="ikont-hot-fecinob" value="#{Supervisor$AdministrarObraNew.obra.datefeciniobra}">
                                            <f:convertDateTime pattern="#{var.formatofecha}" />
                                        </h:outputLabel>
                                        <h:outputLabel styleClass="ikont-hot-hasta" value="Hasta:" ></h:outputLabel>
                                        <h:outputLabel styleClass="ikont-hot-fecfiob" value="#{Supervisor$AdministrarObraNew.obra.datefecfinobra}">
                                            <f:convertDateTime pattern="#{var.formatofecha}" />
                                        </h:outputLabel>
                                    </h:panelGrid>

                                </h:panelGrid>    
                                <h:panelGrid id="form_editarImpactosocial" styleClass="ikont-hpg-pg_impactosocial">
                                    <h:panelGrid  id="habilitarModificacionImpacto" columns="2" rendered="#{Supervisor$AdministrarObraNew.habilitarModificarimpacto}" >
                                        <h:outputLabel styleClass="ikont-hot-personasbeneficiadas" value="#{var.personasbeneficiadas}"></h:outputLabel>
                                        <h:outputLabel styleClass="ikont-hol-numhabbeneficiados" value="#{Supervisor$AdministrarObraNew.obra.numhabbeneficiados}"></h:outputLabel>
                                        <h:outputLabel styleClass="ikont-hot-empleosdirectos" value="#{var.empleosdirectos}:" ></h:outputLabel>
                                        <h:outputLabel styleClass="ikont-hol-numempdirectos" value="#{Supervisor$AdministrarObraNew.obra.numempdirectos}"></h:outputLabel>
                                        <h:outputLabel styleClass="ikont-hot-empleosindirectos" value="#{var.empleosindirectos}:" ></h:outputLabel>
                                        <h:outputLabel styleClass="ikont-hol-numempindirectos" value="#{Supervisor$AdministrarObraNew.obra.numempindirectos}"></h:outputLabel>

                                        <rich:column  colspan="2">
                                            <center>
                                                <h:panelGroup  rendered="#{SessionBeanCobra.usuarioObra.renderrecurso.mnu_administrador}">
                                                    <a4j:commandLink rendered="#{Supervisor$AdministrarObraNew.habilitarModificarimpacto }" 
                                                                     action="#{Supervisor$AdministrarObraNew.habilitarBotonModificarImpacto}"
                                                                     render="form_editarImpactosocial" execute="habilitarModificarImpacto,habilitarModificacionImpacto"
                                                                     title="#{var.editar}">
                                                        <h:graphicImage  styleClass="ikont-"    width="25" height="25" value="/resources/imgs/bt_editar.png" />
                                                    </a4j:commandLink>
                                                </h:panelGroup>
                                            </center>
                                        </rich:column>
                                    </h:panelGrid>
                                    <h:panelGrid  id="habilitarModificarImpacto" columns="2" rendered="#{Supervisor$AdministrarObraNew.habilitarGuardarimpacto}" >
                                        <h:outputLabel styleClass="ikont-hot-personasbeneficiadas" value="#{var.personasbeneficiadas}"></h:outputLabel>
                                        <h:inputText id="numpersonasbeneficiadas" styleClass="ikont-estilo-modificacion-impacto" value="#{Supervisor$AdministrarObraNew.obra.numhabbeneficiados}"></h:inputText>
                                        <h:outputLabel styleClass="ikont-hot-empleosdirectos" value="#{var.empleosdirectos}:" ></h:outputLabel>
                                        <h:inputText id="numpempleosdirectos" styleClass="ikont-estilo-modificacion-impacto" value="#{Supervisor$AdministrarObraNew.obra.numempdirectos}"></h:inputText>
                                        <h:outputLabel styleClass="ikont-hot-empleosindirectos" value="#{var.empleosindirectos}:" ></h:outputLabel>
                                        <h:inputText id="numpempleosindirectos" styleClass="ikont-estilo-modificacion-impacto" value="#{Supervisor$AdministrarObraNew.obra.numempindirectos}"></h:inputText>
                                        <rich:column colspan="2" >
                                            <center>
                                                <a4j:commandLink 
                                                    action="#{Supervisor$AdministrarObraNew.modificarImpactoSocialProyecto}"
                                                    render="form_editarImpactosocial" execute="habilitarModificarImpacto,habilitarModificacionImpacto"
                                                    title="#{var.editar}">
                                                    <h:graphicImage  styleClass="ikont-"    width="25"  height="25" value="/resources/imgs/bt_editar.png" />
                                                </a4j:commandLink>
                                                <a4j:commandLink immediate="true"  render="form_editarImpactosocial"
                                                                 action="#{Supervisor$AdministrarObraNew.cancelarModifcacionModificarImpacto}"
                                                                 execute="@this, habilitarModificarImpacto,habilitarModificacionImpacto">
                                                    <h:graphicImage  styleClass="ikont-"    width="25"  height="25" value="/resources/imgs/bt_eliminar.png" />
                                                </a4j:commandLink>  
                                            </center>
                                        </rich:column>
                                    </h:panelGrid>
                                </h:panelGrid>
                                <h:panelGrid  styleClass="ikont-hgi-imgestobra">
                                    <h:outputText styleClass="ikont-hot-estobra " value="#{Supervisor$AdministrarObraNew.obra.estadoObra}" ></h:outputText>
                                </h:panelGrid>
                                <h:panelGrid styleClass="ikont-hpg-tipo_obra">
                                    <h:panelGrid columns="2" >
                                        <h:outputLabel styleClass="ikont-hol-clspry " value="Sector : " />
                                        <h:outputLabel styleClass="ikont-hol-strdescclaseobra" value="#{Supervisor$AdministrarObraNew.obra.claseobra.strdescclaseobra}" />
                                        <h:outputLabel styleClass="ikont-hol-tipoPry" value="#{var.tipoProyecto}" />
                                        <h:outputLabel styleClass="ikont-hol-tipprynom" value="#{Supervisor$AdministrarObraNew.obra.tipoobra.tipoproyecto.strnombre}" />
                                        <h:outputLabel styleClass="ikont-hol-subtipo " value="Subtipo:"  />
                                        <h:outputLabel styleClass="ikont-hol-strdesctipoobra" value="#{Supervisor$AdministrarObraNew.obra.tipoobra.strdesctipoobra}" />
                                    </h:panelGrid>
                                </h:panelGrid>
                            </h:panelGrid>
                        </rich:collapsiblePanel>

                        <rich:collapsiblePanel id="rcp-mapa-detalle-obra" switchType="client" immediate="true" onswitch="true" header="Dónde está ubicado el proyecto" expanded="true" >                         
                            <h:panelGroup layout="block" styleClass="ikont-hpg">
                                <h:panelGrid columns="2" columnClasses="verticalalingtop" styleClass="panelcenter">
                                    <h:panelGrid  columnClasses="textalingright">
                                        <h:outputLabel styleClass="ikont-hot-strDireccionProyectoOut" value="#{Supervisor$AdministrarObraNew.obra.strdireccion}"/>
                                        <interkont:spacer width="20" />
                                        <h:outputText styleClass="ikont-hol-strDireccionProyecto" value="#{var.label_direccion}" />
                                        <interkont:spacer width="20" />
                                        <h:outputLabel styleClass="ikont-hol-strZonaOut" value="#{Supervisor$AdministrarObraNew.obra.strdireccion}" />
                                        <interkont:spacer width="20" />
                                        <h:outputText styleClass="ikont-hol-strZona" value="#{var.zona}" />
                                        <interkont:spacer width="20" />
                                        <h:outputLabel styleClass="ikont-hol-strZonaOut" value="#{Supervisor$AdministrarObraNew.obra.lugarobra.strdesclugarobra}" />
                                    </h:panelGrid>
                                    <h:panelGrid id="vistaMapa" width="350">
                                        <m:map  latitude="#{Supervisor$AdministrarObraNew.obra.floatlatitud}" longitude="#{Supervisor$AdministrarObraNew.obra.floatlongitud}" enableScrollWheelZoom="true"  id="map12" 
                                                jsVariable="mapa" zoom="#{var.zoommapa}"  partiallyTriggered="false"  height="150px" width="350px">                                                                 
                                            <m:marker latitude="#{Supervisor$AdministrarObraNew.obra.floatlatitud}"
                                                      longitude="#{Supervisor$AdministrarObraNew.obra.floatlongitud}"

                                                      jsVariable="#{HomeGestion.marcador.jsVariable}"
                                                      draggable="false" >
                                                <m:icon imageURL="/#{var.versioncobra}#{Supervisor$AdministrarObraNew.obra.obtenerPin()}" width="20" height="34" shadowHeight="25"  shadowWidth="40"/>

                                            </m:marker>
                                        </m:map>
                                    </h:panelGrid> 
                                </h:panelGrid> 
                            </h:panelGroup>
                        </rich:collapsiblePanel>

                        <rich:collapsiblePanel switchType="client" header="Reportes" expanded="true" rendered="#{!SessionBeanCobra.cobraService.ciu and SessionBeanCobra.logueadodesdemapa}">
                            <h:panelGrid columns="3" styleClass="panelcenter">
                                <h:commandLink id="pdf_infociu2" action="#{Supervisor$DetalleObra.reportePdf}" styleClass="butonreport zoom-pdf" target="_blank" />
                                <h:commandLink id="excel_infociu2" action="#{Supervisor$DetalleObra.reporteExcel}" styleClass="butonreport zoom-excel" target="_blank" />
                                <h:commandLink id="word_infociu2" action="#{Supervisor$DetalleObra.reporteWord}" styleClass="butonreport zoom-word" target="_blank" />
                            </h:panelGrid>
                        </rich:collapsiblePanel>
                        <rich:collapsiblePanel switchType="ajax" toggleListener="#{Supervisor$DetalleObra.cargarVisitasAuditoriaObra}" header="#{var.tituloseccionmatrizauditoria}" expanded="false" rendered="#{SessionBeanCobra.usuarioObra.renderrecurso.permiso_auditoria}"                                         >
                            <rich:dataTable id="tablalistavisitasfallidas" rows="5" 
                                    rowClasses="background_azul,background_blanco" styleClass="ikont-rdt-tablavisitasfallidas"  
                                    value="#{Supervisor$DetalleObra.listacalificacionesauditoriaobra}"
                                    var="actual" binding="#{Supervisor$DetalleObra.tablacalificacionesauditoriaobra}">
                                <f:facet name="header">
                                    <rich:columnGroup>
                                        <rich:column colspan="5">
                                            <h:outputText  styleClass="ikont-hot-titulolistavisitasfallidas"   value="#{var.titulolistavisitasauditoria}"  />
                                        </rich:column>
                                        <rich:column breakRowBefore="true">
                                            <h:outputText  styleClass="ikont-hot-tituloidvisita"   value="#{var.idvisitamatrizauditoria}"  />
                                        </rich:column>
                        .                <rich:column  >
                                            <h:outputText  styleClass="ikont-hot-titulodatefechainforme"   value="#{var.titulodatefechainforme}"  />
                                        </rich:column>
                        .                <rich:column  >
                                            <h:outputText  styleClass="ikont-hot-titulostrnombreinforme"   value="#{var.titulostrnombreinforme}" />
                                        </rich:column>
                                        <rich:column>
                                            <h:outputText  styleClass="ikont-hot-titulodatefecharegistro"   value="#{var.titulodatefecharegistro}"  />
                                        </rich:column>
                                        <rich:column>
                                            <h:outputText  styleClass="ikont-hot-titulodescargarerroresvisitafallida"   value="#{var.generarreporteerroresvisita}"  />
                                        </rich:column>
                                    </rich:columnGroup>
                                </f:facet>
                                <rich:column>
                                    <h:outputText  styleClass="ikont-hot-idvisita"   value="#{actual.idvisita}"/>
                                </rich:column>
                                <rich:column>
                                    <h:outputText  styleClass="ikont-hot-datefechainforme"   value="#{actual.visita.datefechainforme}"/>
                                </rich:column>
                                <rich:column>
                                    <h:outputText  styleClass="ikont-hot-strnombreinforme"   value="#{actual.visita.strnombreinforme}"/>
                                </rich:column>
                                <rich:column>
                                    <h:outputText  styleClass="ikont-hot-datefecharegistro"   value="#{actual.visita.datefecharegistro}"/>
                                </rich:column>
                                <rich:column>
                                    <h:commandLink value="#{var.generarreportevisitaauditoria}" action="#{Supervisor$DetalleObra.generarReporteVisitaAuditoria}" styleClass="ikont-acl-descargarerroresvisitafallida" type="submit" target="_blank" immediate="true" />
                                </rich:column>
                                <f:facet name="footer">
                                    <rich:dataScroller maxPages="10">
                                    </rich:dataScroller>
                                </f:facet>
                            </rich:dataTable>
                        </rich:collapsiblePanel>
                    </h:form>
                </h:panelGrid>
            </h:panelGroup>

            <h:panelGroup id="modalesDetalle">
                <ui:include src="/modal/verPolizasModal.xhtml"/>
                <ui:include src="/modal/objetoObra.xhtml"/>
                <ui:include src="/modal/costoContratomodal.xhtml"/>
                <ui:include src="/modal/modalImagenvermas.xhtml"/>
                <ui:include src="/modal/dificultadModalDetalle.xhtml"/>
                <ui:include src="/modal/logrosModalDetalle.xhtml"/>
                <ui:include src="/modal/modalLocalidadCiudadano.xhtml"/>

            </h:panelGroup>
            <!--El orden de estos scripst se deben consevar para el buen funcionamiento-->
            <script src="/#{var.versioncobra}/resources/reloj/js/jquery.js" type="text/javascript"></script>
            <script src="/#{var.versioncobra}/resources/script_supervisor.js" type="text/javascript"></script>
            <script src="/#{var.versioncobra}/resources/js/sliderman.1.3.6.js" type="text/javascript"></script>
            <script src="/#{var.versioncobra}/resources/reloj/js/flipclock/libs/prefixfree.min.js" type="text/javascript"></script>
            <script src="/#{var.versioncobra}/resources/reloj/js/flipclock/flipclock.min.js" type="text/javascript"></script>
            <script type="text/javascript">
            var $jpanel = jQuery.noConflict();
            $jpanel(document).ready(function() {
                var clock = $jpanel('.your-clock').FlipClock({
                    autoStart: true,
                    countdown: true,
                    clockFace: 'DailyCounter'
                });
                var timefalta = document.getElementById("finfecha").value;
                var futuro = new Date(timefalta).getTime();
              
                var ahora = #{SessionBeanCobra.fechaMilisegundosServidor} - (1000*60*60*24);
                var faltan = futuro - ahora;
                if (faltan > 0) {
                    var segundos = Math.round(faltan / 1000);
                }
                else {
                    var segundos = 00;
                }
                clock.setTime(segundos);
                clock.start();
            });

            </script>
        </h:body>

    </ui:define>
</ui:composition>

<ui:composition
    xmlns:a4j="http://richfaces.org/a4j" 
    xmlns:rich="http://richfaces.org/rich"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    >

    <rich:collapsiblePanel id="simpleTogglecontrhijo" switchType="ajax" header="Contratos Asociados"
                           expanded="#{Supervisor$Contrato.boolconthijo}" 
                           rendered="#{Supervisor$Contrato.contrato.booleantienehijos}"
                           toggleListener="#{Supervisor$Contrato.llenarContrMacroConvHijo}" style="width: 87%">
        <a4j:ajax event="switch" render="tContHijo" />

        <h:selectOneRadio id="ccRadio" value="Macro">
            <f:selectItem itemValue="Macro" itemLabel="Marco"/>
            <f:selectItem itemValue="Derivado" itemLabel="Derivado" />
            <f:ajax event="valueChange" render="tContHijo" listener="#{Supervisor$Contrato.llenarContrMacroConvHijo}" />
        </h:selectOneRadio>

        <center>
            <h:panelGrid columns="3" styleClass="font-general">
                <h:outputText  styleClass="ikont-"   value="#{var.consultar} #{var.contrato} "  />
                <h:inputText value="#{Supervisor$Contrato.buscarproyecto}" size="20" />
                <a4j:commandButton value="#{var.buscarProyecto}" action="#{Supervisor$Contrato.llenarContrConvHijoPorNombre}" render="tContHijo"  />
            </h:panelGrid >

            <h:panelGroup id="notieneContrato">
                <h:outputLabel  styleClass="ikont-"   rendered="#{Supervisor$Contrato.listaContrConvHijo.size()==0}" value="#{var.notienehijos}" />
            </h:panelGroup>
            <h:panelGroup id="pgtablaContratoHijo">

                <rich:dataTable id="tContHijo" styleClass="ikont-tabla-entidad-contratista"
                                rowKeyVar="filaSeleccionada"
                                value="#{Supervisor$Contrato.listaContrConvHijo}"
                                sortMode="single" var="_row"  rows="20"
                                rowClasses="cabezo_tabla01, cabezo_tabla02" style="width: 87%;">

                    <rich:column id="tc_strnrocontrato"   styleClass="ikont-rc-tcstrnrocontrato">
                        <f:facet class="ikont-colum-superior-consulta" name="header">
                            <h:outputText  styleClass="ikont-hot-houtnrocontrato"   value="#{var.noContrato} "/>
                        </f:facet>
                        <h:outputText  styleClass="ikont-hot-ststrnrocontrato"   id="st_strnrocontrato" value="#{_row.strnumcontrato}"/>
                    </rich:column>
                    <rich:column  styleClass="ikont-rc-tcstrnrocontrato">
                        <f:facet class="ikont-colum-superior-consulta" name="header">
                            <h:outputText  styleClass="ikont-hot-objetocontrato"   value="#{var.nombre} "/>
                        </f:facet>
                        <h:inputTextarea  value="#{_row.strnombre}" readonly="true" cols="35" rows="3" />
                    </rich:column>
                    <rich:column id="tc_strnomcontratista" styleClass="ikont-rc-tcstrnomcontratista">
                        <f:facet class="ikont-colum-superior-consulta" name="header">
                            <h:outputText  styleClass="ikont-hot-houtcontratis"   value="#{var.houtcontratis}"/>
                        </f:facet>
                        <h:outputText  styleClass="ikont-hot-ststrnomcontratista"   id="st_strnomcontratista" value="#{_row.contratista.tercero.strnombre} #{row.contratista.tercero.strapellido1}"/>
                    </rich:column>
                    <rich:column id="tc_valor" styleClass="ikont-rc-tcvalor">
                        <f:facet class="ikont-colum-superior-consulta" name="header">
                            <h:outputText  styleClass="ikont-hot-vlrcontra"   value="#{var.vlrcontra}"/>
                        </f:facet>
                        <h:outputText  styleClass="ikont-hot-numvlrcontrato"   value="#{_row.numvlrcontrato}">
                            <f:convertNumber pattern="#{var.formatomoneda}"/>
                        </h:outputText>
                    </rich:column>
                    <rich:column id="tc_consultar_contrato"  >
                        <f:facet name="header" >
                            <h:outputText value="#{var.consultar}"/>
                        </f:facet>
                        <h:commandLink rendered="#{!SessionBeanCobra.cobraService.ciu and SessionBeanCobra.logueadodesdemapa}" styleClass="ikont-hcl-zoom-contratista" title="#{var.contrato}" immediate="true"   action="#{Supervisor$AdministrarObraNew.detalleContrato}">
                            <a4j:param assignTo="#{Supervisor$AdministrarObraNew.mostrarContratoConvenio}" value="#{_row.intidcontrato}" />
                        </h:commandLink>
                    </rich:column>
                    <f:facet name="footer">

                        <rich:column colspan="10" breakRowBefore="true">
                            <center>
                                <h:panelGrid columns="4">
                                    <a4j:commandButton id="btPriCont" value="#{var.primeroCiu}" disabled="#{!Supervisor$Contrato.primeraPagina}" action="#{Supervisor$Contrato.getFirstContracts}"
                                                       render="tContHijo">
                                    </a4j:commandButton>

                                    <a4j:commandButton id="btAntCont" value="#{var.anteriorCiu}" disabled="#{!Supervisor$Contrato.anteriorPagina}" action="#{Supervisor$Contrato.getBackContracts}"
                                                       render="tContHijo">
                                    </a4j:commandButton>

                                    <a4j:commandButton id="btSigCont" value="#{var.siguienteCiu}" disabled="#{!Supervisor$Contrato.siguientePagina}" action="#{Supervisor$Contrato.getNextContracts}"
                                                       render="tContHijo">
                                    </a4j:commandButton>

                                    <a4j:commandButton id="btUltCont" value="#{var.ultimoCiu}" disabled="#{!Supervisor$Contrato.ultimoPagina}" action="#{Supervisor$Contrato.getLastContracts}"
                                                       render="tContHijo">
                                    </a4j:commandButton>
                                </h:panelGrid>
                            </center>
                        </rich:column>

                    </f:facet>

                </rich:dataTable>

            </h:panelGroup>
        </center>
    </rich:collapsiblePanel>

</ui:composition>


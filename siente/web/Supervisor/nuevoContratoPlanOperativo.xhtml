<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="./../facelets/template_main.xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:a4j="http://richfaces.org/a4j"
                xmlns:rich="http://richfaces.org/rich"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:interkont="http://www.interkont.com/jsf">
    <ui:define name="menu">
        <ui:include src="/facelets/menu_gestion.xhtml"/>
    </ui:define>
    <ui:define name="menu_lateral">
        <h:panelGroup  rendered="#{!var.permisonuevodiseno}">
            <ui:include src="./../facelets/menu_lateral_gestion.xhtml"/>
            <ui:include src="./../facelets/menu_lateral_administrar.xhtml"/>  
        </h:panelGroup>
        <h:panelGroup rendered="#{var.permisonuevodiseno}">
            <ui:include src="/facelets/menu_lateral_novedades_zoom.xhtml"/>
        </h:panelGroup>
    </ui:define>
    <ui:define name="body">
        <script type="text/javascript">
            localStorage.setItem('accionNuevoConvenio', "ikont-acl-datosbasicos img-button-ncpo");
        </script>
        <h:form id="frmpanelgeneral" styleClass="ikont-hf-nuevocontratoplanoperativo">
            <ui:include src="/facelets/menu_superior_administrar.xhtml"/>
            <a4j:region id="datosBasicosErrores" >
                <rich:messages id="messagesPlanOpeGen" globalOnly="true"
                               styleClass="ikont-rm-messages"   ajaxRendered="true"                               >
                    <f:facet name="infoMarker">
                        <h:graphicImage  styleClass="ikont-hgi-msginfopng"   height="20px" width="20px" url="/resources/imgs/msginfo.png" />
                    </f:facet>
                    <f:facet name="warnMarker">
                        <h:graphicImage  styleClass="ikont-hgi-msgwarnpng"   height="10px" width="20px" url="/resources/imgs/msgwarn.png" />
                    </f:facet>
                    <f:facet name="errorMarker">
                        <h:graphicImage  styleClass="ikont-hgi-msgerrorpng"   height="20px" width="20px" url="/resources/imgs/msgerror.png" />
                    </f:facet>
                    <f:facet name="fatalMarker">
                        <h:graphicImage  styleClass="ikont-hgi-msgerrorpngfatal"    height="20px" width="20px" url="/resources/imgs/msgerror.png" />
                    </f:facet>
                </rich:messages>
            </a4j:region>
            <center>
                <h:panelGroup  styleClass="ikont-hpg-infogeneral"  id="hpg-infogeneral" rendered="#{Supervisor$Contrato.panelPantalla==1 or Supervisor$Contrato.panelPantalla==2 or Supervisor$Contrato.panelPantalla==3 or Supervisor$Contrato.panelPantalla==4 or Supervisor$Contrato.panelPantalla==5 }">
                    <br/>
                    <h:outputText styleClass="ikont-title-1-convenio" value="#{var.nuevoconvenio}"/>
                    <br/>
                    <h:outputText styleClass="ikont-title2-convenio" value="#{Supervisor$Contrato.variabletitulo}"/>
                    <br/>                
                    <h:outputText styleClass="ikont-title-3-convenio" value="#{Supervisor$Contrato.infogeneralcrearconvenio}"/>
                    <br/>
                    <h:outputText styleClass="ikont-title-3-convenio" value="#{var.infogeneralconvenio}"/>
                    <br/>
                    <br/>
                    <hr class="ikont-hr-separador-convenio" />
                    <br/>
                </h:panelGroup>
            </center>
            <a4j:region rendered="#{Supervisor$Contrato.panelPantalla==1}" id="reg-datos-basicos" >
                <h:panelGroup layout="block" style="width: 900px;" styleClass="ikont-rp-db">
                    <ui:include src="/NuevoProyecto/datosBasicosplanoperativo.xhtml"/>     
                </h:panelGroup>
            </a4j:region>

            <a4j:region rendered="#{Supervisor$Contrato.panelPantalla==2}" id="reg-plan-operativo"  >
                <h:panelGrid columns="3" cellspacing="15" cellpadding="0" id="menu-plan-operativo" styleClass="ikont-hpg-menu-plan-operativo">
                    <a4j:commandLink value="#{var.planificacion}" action="#{Supervisor$Contrato.planOperativo}" render="frmpanelgeneral" immediate="true"/>

                    <h:commandLink value="#{var.flujocaja}" action="#{Supervisor$Contrato.actualizarSubpantallaPlanOperativo}"  immediate="true">
                        <a4j:param assignTo="#{Supervisor$Contrato.subpantalla}" value="2"/>
                    </h:commandLink>
                    <a4j:commandLink value="#{var.reportes}" action="#{Supervisor$Contrato.actualizarSubpantallaPlanOperativo}" render="frmpanelgeneral" immediate="true">
                        <a4j:param assignTo="#{Supervisor$Contrato.subpantalla}" value="3"/>
                    </a4j:commandLink>
                </h:panelGrid>


                <a4j:region rendered="#{Supervisor$Contrato.subpantalla==2}"  id="reg-plan-operativo-flujocaja" >
                    <h:panelGroup layout="block" style="width: 900px;" styleClass="ikont-rp-flujocaja">
                        <ui:include src="/Supervisor/Flujocaja.xhtml" />
                    </h:panelGroup>
                </a4j:region>

                <a4j:region rendered="#{Supervisor$Contrato.subpantalla==3}"  id="reg-plan-operativo-presupuesto">

                    <h:panelGroup id="hpg-rpt-planoperativo" layout="block" style="width:800px;height:400px;" styleClass="ikont-rp-po">
                        <center>
                            <h:panelGrid id="rpt-planoperativo" columns="3" cellpadding="0" cellspacing="20" columnClasses="panelcenter,panelcenter,panelcenter,panelcenter,panelcenter,panelcenter">

                                <h:panelGrid columnClasses="panelcenter,panelcenter,panelcenter,panelcenter">
                                    <h:commandLink styleClass="ikont-hcl-img-rptconsolidado img-button-plao"   >
                                        <a4j:param assignTo="#{Supervisor$Contrato.tipoReporteVarTmp}" value="1"/>
                                        <a4j:ajax oncomplete="#{rich:component('mp-seleccionar-formatoreporte')}.show();"
                                                  render="hpg-rpt-planoperativo" execute="hpg-rpt-planoperativo" />
                                    </h:commandLink>    
                                    <h:outputText styleClass="vtitle21"  value="Consolidado"  />                               
                                    <h:commandLink styleClass="ikont-hcl-rptconsolidado vtitle23"    value="Descargas" >
                                        <a4j:param assignTo="#{Supervisor$Contrato.tipoReporteVarTmp}" value="1"/>
                                        <a4j:ajax oncomplete="#{rich:component('mp-seleccionar-formatoreporte')}.show();"
                                                  render="hpg-rpt-planoperativo" execute="hpg-rpt-planoperativo" />                                    
                                    </h:commandLink>
                                </h:panelGrid>                          

                                <h:panelGrid columnClasses="panelcenter,panelcenter,panelcenter,panelcenter">
                                    <h:commandLink styleClass="ikont-hcl-img-rptcronograma img-button-plao">
                                        <a4j:param assignTo="#{Supervisor$Contrato.tipoReporteVarTmp}" value="2"/>
                                        <a4j:ajax oncomplete="#{rich:component('mp-seleccionar-formatoreporte')}.show();"
                                                  render="hpg-rpt-planoperativo" execute="hpg-rpt-planoperativo" />
                                    </h:commandLink>
                                    <h:outputText styleClass="vtitle21"  value="Cronograma"  />                                    
                                    <h:commandLink styleClass="ikont-hcl-rptcronograma vtitle23"  value="Descargas" >
                                        <a4j:param assignTo="#{Supervisor$Contrato.tipoReporteVarTmp}" value="2"/>
                                        <a4j:ajax oncomplete="#{rich:component('mp-seleccionar-formatoreporte')}.show();"
                                                  render="hpg-rpt-planoperativo" execute="hpg-rpt-planoperativo" />
                                    </h:commandLink>
                                </h:panelGrid>



                                <h:panelGrid columnClasses="panelcenter,panelcenter,panelcenter,panelcenter">
                                    <h:commandLink styleClass="ikont-hcl-img-rptpresupuesto img-button-plao"  >
                                        <a4j:param assignTo="#{Supervisor$Contrato.tipoReporteVarTmp}" value="3"/>
                                        <a4j:ajax oncomplete="#{rich:component('mp-seleccionar-formatoreporte')}.show();"
                                                  render="hpg-rpt-planoperativo" execute="hpg-rpt-planoperativo" />
                                    </h:commandLink>
                                    <h:outputText styleClass="vtitle21"  value="Presupuesto"  />

                                    <h:commandLink styleClass="ikont-hcl-rptpresupuesto vtitle23"  value="Descargas"  >
                                        <a4j:param assignTo="#{Supervisor$Contrato.tipoReporteVarTmp}" value="3"/>
                                        <a4j:ajax oncomplete="#{rich:component('mp-seleccionar-formatoreporte')}.show();"
                                                  render="hpg-rpt-planoperativo" execute="hpg-rpt-planoperativo"/>
                                    </h:commandLink>
                                </h:panelGrid>

                                <h:panelGrid columnClasses="panelcenter,panelcenter,panelcenter,panelcenter">
                                    <h:commandLink styleClass="ikont-hcl-img-rptflujocaja img-button-plao"  >
                                        <a4j:param assignTo="#{Supervisor$Contrato.tipoReporteVarTmp}" value="4"/>
                                        <a4j:ajax oncomplete="#{rich:component('mp-seleccionar-formatoreporte')}.show();"
                                                  render="hpg-rpt-planoperativo" execute="hpg-rpt-planoperativo"/>
                                    </h:commandLink>
                                    <h:outputText styleClass="vtitle21"  value="Flujo de caja"  />

                                    <h:commandLink styleClass="ikont-hcl-rptflujocaja vtitle23"  value="Descargas" >
                                        <a4j:param assignTo="#{Supervisor$Contrato.tipoReporteVarTmp}" value="4"/>
                                        <a4j:ajax oncomplete="#{rich:component('mp-seleccionar-formatoreporte')}.show();"
                                                  render="hpg-rpt-planoperativo" execute="hpg-rpt-planoperativo" />
                                    </h:commandLink>
                                </h:panelGrid>


                                <h:panelGrid columnClasses="panelcenter,panelcenter,panelcenter,panelcenter">
                                    <h:commandLink styleClass="ikont-hcl-img-rptplanoperativo img-button-plao"   >
                                        <a4j:param assignTo="#{Supervisor$Contrato.tipoReporteVarTmp}" value="5"/>
                                        <a4j:ajax oncomplete="#{rich:component('mp-seleccionar-formatoreporte')}.show();"
                                                  render="hpg-rpt-planoperativo" execute="hpg-rpt-planoperativo" />
                                    </h:commandLink>
                                    <h:outputText styleClass="vtitle21"  value="Plan operativo"  />

                                    <h:commandLink styleClass="ikont-hcl-rptplanoperativo vtitle23" value="Descargas" >
                                        <a4j:param assignTo="#{Supervisor$Contrato.tipoReporteVarTmp}" value="5"/>
                                        <a4j:ajax oncomplete="#{rich:component('mp-seleccionar-formatoreporte')}.show();"
                                                  render="hpg-rpt-planoperativo" execute="hpg-rpt-planoperativo" />
                                    </h:commandLink>
                                </h:panelGrid>



                                <h:panelGrid columnClasses="panelcenter,panelcenter,panelcenter,panelcenter">
                                    <h:commandLink styleClass="ikont-hcl-img-rptplancontratacion img-button-plao" >
                                        <a4j:param assignTo="#{Supervisor$Contrato.tipoReporteVarTmp}" value="6"/>
                                        <a4j:ajax oncomplete="#{rich:component('mp-seleccionar-formatoreporte')}.show();"
                                                  render="hpg-rpt-planoperativo" execute="hpg-rpt-planoperativo" />
                                    </h:commandLink>
                                    <h:outputText styleClass="vtitle21"  value="Plan de contrataciÃ³n"  />

                                    <h:commandLink styleClass="ikont-hcl-rptplancontratacion vtitle23" value="Descargas" >
                                        <a4j:param assignTo="#{Supervisor$Contrato.tipoReporteVarTmp}" value="6"/>
                                        <a4j:ajax oncomplete="#{rich:component('mp-seleccionar-formatoreporte')}.show();"
                                                  render="hpg-rpt-planoperativo" execute="hpg-rpt-planoperativo" />
                                    </h:commandLink>
                                </h:panelGrid>
                            </h:panelGrid>
                        </center>

                        <ui:include src="/modal/seleccionarFormatoReporte.xhtml" />
                    </h:panelGroup>   
                </a4j:region>      
            </a4j:region> 

            <a4j:region rendered="#{Supervisor$Contrato.panelPantalla==3}" id="reg-polizas">
                <h:panelGroup layout="block" style="width:800px;">                   
                    <ui:include src="/Supervisor/PolizasPlanOperativo.xhtml" />                        
                </h:panelGroup>
            </a4j:region>  

            <a4j:region rendered="#{Supervisor$Contrato.panelPantalla==4}" id="reg-formas-pago">
                <h:panelGroup layout="block" style="width:800px;height:400px;">
                    forma pago
                </h:panelGroup>

            </a4j:region>

            <a4j:region rendered="#{Supervisor$Contrato.panelPantalla==5}" id="reg-documentos">
                <h:panelGroup layout="block" style="width:900px">
                    <ui:include src="/Supervisor/DocumentosPlanOperativo.xhtml"/>                    
                </h:panelGroup>
            </a4j:region> 

            <h:panelGrid styleClass="ikont-hpg-botones" columns="3" cellspacing="15" cellpadding="0">                
                <a4j:commandLink styleClass="ikont-po-img-posicion-borrador-finalizar ikont-po-img-finalizar" title="Finalizar"  action="#{Supervisor$Contrato.finalizarGuardado}" render="@form, panelConfirmaguardadoplano"
                                 oncomplete="#{rich:component('panelConfirmaguardadoplano')}.show(); return false" 
                                 execute="hit-nro-convenio,id-fechasuscripcion,hit-valorest-convenio,hit-nom-convenio,id-datefechafin,hit-obj-convenio,id-datefechaini,select-gerente-convenio"/> 

                <a4j:commandLink styleClass="ikont-po-img-posicion-borrador-finalizar ikont-po-img-borrador"  title="Guardar borrador"  action="#{Supervisor$Contrato.guardarBorradorConvenio}" 
                                 render="@form"
                                 execute="hit-nro-convenio,id-fechasuscripcion,hit-valorest-convenio,hit-nom-convenio,id-datefechafin,hit-obj-convenio,id-datefechaini,select-gerente-convenio">
                    <a4j:param assignTo="#{Supervisor$Contrato.guardarborradorconvenio}" value="false"/>
                </a4j:commandLink>

            </h:panelGrid>


        </h:form>
        <ui:include src="/modal/editarDocumentoModal.xhtml"/>
        <ui:include src="/modal/panelUploadDocumentoContratoBasico.xhtml"/>
        <!--<ui:include src="/modal/FuenteRecursosConvenio.xhtml"/>-->
        <ui:include src="/modal/confirmarguardadoconveniopo.xhtml"/>

    </ui:define>

</ui:composition>

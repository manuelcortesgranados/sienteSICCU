<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="./../facelets/template_main.xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:a4j="http://richfaces.org/a4j"
                xmlns:rich="http://richfaces.org/rich"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:interkont="http://www.interkont.com/jsf">

    <ui:define name="head">       
    </ui:define>

    <ui:define name="menu">
        <ui:include src="/facelets/menu_gestion.xhtml" />
    </ui:define>

    <ui:define name="menu_lateral">
        <ui:include src="/facelets/menu_lateral_gestion.xhtml"/>
        <ui:include src="/facelets/menu_lateral_novedades.xhtml"/>
    </ui:define>

    <ui:define name="title">
        <h:form>  
            <h:panelGrid id="menu-nuevo-convenio" styleClass="ikont-hpg-menu-nuevo-convenio"  columns="5"   cellspacing="15" cellpadding="0">
                <a4j:commandLink value="#{var.datosbasicos}" action="#{Supervisor$Contrato.actualizarPanel(1)}"  render="frmpanelgeneral" immediate="true"/>
                <h:commandLink value="#{var.planoperativo}" action="#{Supervisor$Contrato.planOperativo()}"  immediate="true"/>
                <a4j:commandLink value="#{var.polizas}" action="#{Supervisor$Contrato.actualizarPanel(3)}"  render="frmpanelgeneral" immediate="true"/>
                <a4j:commandLink value="#{var.formadepago}" action="#{Supervisor$Contrato.actualizarPanel(4)}" render="frmpanelgeneral" immediate="true"/>
                <a4j:commandLink value="#{var.documento}" action="#{Supervisor$Contrato.actualizarPanel(5)}" render="frmpanelgeneral" immediate="true"/>
            </h:panelGrid>
        </h:form>

    </ui:define>

    <ui:define name="body">
        <h:form id="frmpanelgeneral">
            <h:panelGroup  styleClass="ikont-hpg-infogeneral"  id="hpg-infogeneral" style="width: 500px;height:200px;" rendered="#{Supervisor$Contrato.panelPantalla==1 or Supervisor$Contrato.panelPantalla==2 or Supervisor$Contrato.panelPantalla==3 or Supervisor$Contrato.panelPantalla==4 or Supervisor$Contrato.panelPantalla==5 }">
                <center>
                    <h:outputText value="#{var.nuevoconvenio}"/>
                    <br/>
                    <h:outputText value="#{Supervisor$Contrato.variabletitulo}"/>
                    <br/>                
                    <h:outputText value="#{Supervisor$Contrato.infogeneralcrearconvenio}"/>
                </center>
            </h:panelGroup>
            
            <a4j:region rendered="#{Supervisor$Contrato.panelPantalla==1}" id="reg-datos-basicos" >
                   <ui:include src="/NuevoProyecto/datosBasicosplanoperativo.xhtml"/>
            </a4j:region>

            <a4j:region rendered="#{Supervisor$Contrato.panelPantalla==2}" id="reg-plan-operativo"  >
                <h:panelGrid columns="3" cellspacing="15" cellpadding="0" id="menu-plan-operativo" styleClass="ikont-hpg-menu-plan-operativo">
                    <a4j:commandLink value="#{var.planificacion}" action="#{Supervisor$Contrato.actualizarSubpantallaPlanOperativo(1)}" render="frmpanelgeneral" immediate="true"/>
                    <a4j:commandLink value="#{var.flujocaja}" action="#{Supervisor$Contrato.actualizarSubpantallaPlanOperativo(2)}" render="frmpanelgeneral" immediate="true"/>
                    <a4j:commandLink value="#{var.reportes}" action="#{Supervisor$Contrato.actualizarSubpantallaPlanOperativo(3)}" render="frmpanelgeneral" immediate="true" />
                </h:panelGrid>
                
                <a4j:region rendered="#{Supervisor$Contrato.subpantalla==1}"  id="reg-plan-operativo-planificacion" >
                    <h:panelGroup layout="block" style="width: 900px;" styleClass="ikont-rp-planificacion">
                      planoperativo
                       
                    </h:panelGroup>
                </a4j:region>
                
                 <a4j:region rendered="#{Supervisor$Contrato.subpantalla==2}"  id="reg-plan-operativo-flujocaja" >
                     <h:panelGroup layout="block" style="width: 900px;" styleClass="ikont-rp-flujocaja">
                         flujo caja
                     </h:panelGroup>
                </a4j:region>

                <a4j:region rendered="#{Supervisor$Contrato.subpantalla==3}"  id="reg-plan-operativo-presupuesto">
                    <h:panelGroup layout="block" style="width:800px;height:400px;" styleClass="ikont-rp-po">
                        <center>
                            <h:panelGrid id="rpt-planoperativo" rendered="#{Supervisor$Contrato.boolreporte}" columns="3" cellpadding="0" cellspacing="20" >
                                <h:panelGrid columnClasses="panelcenter">
                                    <h:commandLink styleClass="ikont-hcl-rptconsolidado"   action="#{Supervisor$Contrato.ReportesPlanOperativo(1)}" value="Consolidado"  />
                                </h:panelGrid>
                                <h:panelGrid columnClasses="panelcenter">
                                    <h:commandLink styleClass="ikont-hcl-rptcronograma"   action="#{Supervisor$Contrato.ReportesPlanOperativo(2)}" value="Cronograma" />
                                </h:panelGrid>
                                <h:panelGrid columnClasses="panelcenter">
                                    <h:commandLink styleClass="ikont-hcl-rptpresupuesto"   action="#{Supervisor$Contrato.ReportesPlanOperativo(3)}" value="Presupuesto"  />
                                </h:panelGrid>                     
                                <h:panelGrid columnClasses="panelcenter">
                                    <h:commandLink styleClass="ikont-hcl-rptflujocaja"   action="#{Supervisor$Contrato.ReportesPlanOperativo(4)}" value="Flujo de caja" />
                                </h:panelGrid>
                                <h:panelGrid columnClasses="panelcenter">
                                    <h:commandLink styleClass="ikont-hcl-rptplanoperativo"   action="#{Supervisor$Contrato.ReportesPlanOperativo(5)}" value="Plan operativo" />
                                </h:panelGrid>
                                <h:panelGrid columnClasses="panelcenter">
                                    <h:commandLink styleClass="ikont-hcl-rptplancontratacion"   action="#{Supervisor$Contrato.ReportesPlanOperativo(6)}"  value="Plan de contrataciÃ³n" />
                                </h:panelGrid>  
                            </h:panelGrid>
                        </center>
                        plan operativo
                    </h:panelGroup>   
                </a4j:region>      
            </a4j:region> 

            <a4j:region rendered="#{Supervisor$Contrato.panelPantalla==3}" id="reg-polizas">
                <h:panelGroup layout="block" style="width:800px;height:400px;">
                    <center>

                        <h:panelGrid id="gpPolizaSelec" columns="2"   rendered="#{Supervisor$Contrato.verEliminar==0}" >

                            <h:outputLabel  styleClass="ikont-hol-tipopoliza" id="lblTipoPoliza"  value="#{var.tipoPolizaContrato}:" for="comboTipoPoliza">

                            </h:outputLabel>
                            <h:selectOneMenu id="comboTipoPoliza" value="#{Supervisor$Contrato.tipointpoli}">
                                <f:selectItems value="#{Supervisor$Contrato.tipoPolizas}"/>
                                <a4j:ajax event="valueChange" listener="#{Supervisor$Contrato.probar}" />
                            </h:selectOneMenu>

                            <h:outputLabel  styleClass="ikont-hol-numpolcont" id="lblnumPolizaContrato"  value=" #{var.numPolizaContrato}:" for="numPolizaContrato">

                            </h:outputLabel>
                            <h:inputText  styleClass="ikont-hit-strnumpoliza" id="numPolizaContrato" value="#{Supervisor$Contrato.polizacontrato.strnumpoliza}"/>

                            <h:outputLabel  styleClass="ikont-hol-vencepoliza" id="lblVencimientoPoliza"  value=" #{var.vencimientoPoliza}:" for="calendarVenciPoliza">

                            </h:outputLabel>
                            <rich:calendar locale="#{var.rcalendarlocale}" datePattern="yyyy-MM-dd" id="calendarVenciPoliza" inputSize="10"
                                           value="#{Supervisor$Contrato.polizacontrato.datefechavecimiento}" />


                            <h:outputLabel  styleClass="ikont-hol-entipoliza" id="lblEntidadPoliza"  value=" #{var.entidadPoliza}:" for="comboentidadPoliza">
                            </h:outputLabel>
                            <h:selectOneMenu id="comboentidadPoliza" value="#{Supervisor$Contrato.polizacontrato.aseguradora.intnumnitentidad}">
                                <f:selectItems value="#{Supervisor$Contrato.companias}"/>
                            </h:selectOneMenu>

                            <h:panelGrid  columnClasses="inputsDetalle,inputsDetalle"  rendered="#{Supervisor$Contrato.verEliminar==0}">
                                <a4j:commandButton value="#{var.agregar}" id="agregar_poliza"  action="#{Supervisor$Contrato.agregarPoliza}" render="gpPolizaSelec,pgpolis,rsgtpoliz,dtPolizas"
                                                   styleClass="ikont-acb-addpoliza">
                                    <a4j:ajax event="click" render="pgpolis" immediate="true"/>
                                </a4j:commandButton>
                            </h:panelGrid>
                        </h:panelGrid>
                        <interkont:spacer height="14"/>
                        <h:panelGrid id="pgpolis">
                            <rich:dataTable id="dtPolizas"
                                            rows="4"  
                                            value="#{Supervisor$Contrato.listapolizas}"
                                            var="registro" rowKeyVar="filaSeleccionada">
                                <rich:column id="tc-strTipoPoliza" width="100px">
                                    <f:facet name="header">
                                        <h:outputText  styleClass="ikont-hot-policont" value="#{var.tipoPolizaContrato}:" />
                                    </f:facet>
                                    <h:outputText  styleClass="ikont-hot-descpoliza" id="otxt-strTipoPoliza" value="#{registro.tipopoliza.strdesctipopoliza}"/>
                                </rich:column>
                                <rich:column id="tc-strnumPolizaContrato" 
                                             >
                                    <f:facet name="header">
                                        <h:outputText  styleClass="ikont-hot-numpolizacont" value="#{var.numPolizaContrato}:" />
                                    </f:facet>
                                    <h:outputText  styleClass="ikont-hot-numpoliza" id="otxt-strnumPolizaContrato" value="#{registro.strnumpoliza}"/>
                                </rich:column>
                                <rich:column id="tc-strVencimientoPoliza" width="100px"
                                             >
                                    <f:facet name="header">
                                        <h:outputText  styleClass="ikont-hot-vencepoliza" value="#{var.vencimientoPoliza}:" />
                                    </f:facet>
                                    <h:outputText  styleClass="ikont-hot-fechavence" id="otxt-strVencimientoPoliza" value="#{registro.datefechavecimiento}">
                                        <f:convertDateTime pattern="yyyy-MM-dd"/>
                                    </h:outputText>
                                </rich:column>
                                <rich:column id="tc-strEntidadPoliza" 
                                             >
                                    <f:facet name="header">
                                        <h:outputText  styleClass="ikont-hot-entipoliza" value="#{var.entidadPoliza}:" />
                                    </f:facet>
                                    <h:outputText  styleClass="ikont-hot-nomentipoliza"   id="otxt-strEntidadPoliza" value="#{registro.aseguradora.strnombreentidad}"/>
                                </rich:column>
                                <rich:column id="tc-streliminarPoliza" width="250px"
                                             >
                                    <f:facet name="header">
                                        <h:outputText  styleClass="ikont-hot-eliminars"   value="#{var.eliminar}" />
                                    </f:facet>
                                    <a4j:commandButton styleClass="ikont-acb-elipoliza" id="eliminarpol" value="#{var.eliminar}" render="pgpolis" execute="@this"
                                                       action="#{Supervisor$Contrato.eliminarPoliza(filaSeleccionada)}">
                                    </a4j:commandButton>
                                </rich:column>
                                <f:facet name="footer">
                                    <rich:dataScroller id="dspolizas" for="dtPolizas"/>
                                </f:facet>
                            </rich:dataTable>
                        </h:panelGrid>
                    </center>
                </h:panelGroup>
            </a4j:region>  

            <a4j:region rendered="#{Supervisor$Contrato.panelPantalla==4}" id="reg-formas-pago">
                <h:panelGroup layout="block" style="width:800px;height:400px;">
                    forma pago
                </h:panelGroup>

            </a4j:region>

            <a4j:region rendered="#{Supervisor$Contrato.panelPantalla==5}" id="reg-documentos">
                <h:panelGroup layout="block" style="width:800px;height:400px;">
                    <h:panelGrid id="pgdocumentoscc"  columns="6" columnClasses=",,,,,buttonsmall">

                        <a4j:commandButton styleClass="ikont-acb-adjdocumento" id="adjuntarDocumentocc" value="#{var.examinar}" immediate="true" 
                                           onclick="#{rich:component('panelUploadDocumentocc')}.show();">
                        </a4j:commandButton>
                        <h:outputText  styleClass="ikont-hot-descdocumento" id="Documentocc" value="#{var.descipcionDocumento}:"/>
                        <h:inputText id="inputDescDocument" value="#{Supervisor$Contrato.documentoobra.strnombre}" />
                        <h:outputText  styleClass="ikont-hot-tipodocumento" id="tipodocc"  value="#{var.tipoDocumento}:"/>
                        <h:selectOneMenu id="selecttipodocumentocc" value="#{Supervisor$Contrato.tipodoc}">
                            <f:selectItems value="#{Supervisor$Contrato.tipodocumento}"/>
                        </h:selectOneMenu>

                        <a4j:commandLink id="bt_agregar" styleClass="ikont-acl-agregar" title="#{var.agregar}" value="agregar"
                                         action="#{Supervisor$Contrato.subirDocContrato}" 
                                         render="tablaDocumentoscont,panelUploadDocumentocc,pgdocumentoscc,rdDoccontrato">
                        </a4j:commandLink>                          

                    </h:panelGrid>
                    <interkont:spacer height="14"/>
                    <rich:dataGrid id="rdDoccontrato" columns="1" rowKeyVar="row" value="#{Supervisor$Contrato.cargadorDocumento.archivos}" var="file" >
                        <h:outputText  styleClass="ikont-nomarch" id="txt_nombrearchivocc" value=" #{file.nombre}"/>
                    </rich:dataGrid>
                    <rich:dataTable id="tablaDocumentoscont"  sortMode="single"
                                    var="currentRow"
                                    rows="7" rowKeyVar="filaSeleccionada"
                                    value="#{Supervisor$Contrato.listadocumentos}"                                        >
                        <f:facet name="header" >
                            <rich:columnGroup >
                                <rich:column colspan="5">
                                    <h:outputText  styleClass="ikont-hot-docseleccion" value="#{var.docseleccionados}"/>
                                </rich:column>
                                <rich:column breakRowBefore="true">
                                    <h:outputText  styleClass="ikont-hot-tipodocuments" value="#{var.tipoDocumento}:"/>
                                </rich:column>
                                <rich:column>
                                    <h:outputText  styleClass="ikont-hot-nombredoc" value="#{var.nombre}"/>
                                </rich:column>
                                <rich:column>
                                    <h:outputText  styleClass="ikont-hot-eliminardoc" value="#{var.eliminar}:"/>
                                </rich:column>
                            </rich:columnGroup>
                        </f:facet>
                        <rich:column>
                            <h:outputText  styleClass="ikont-hot-desciptdocs" value="#{currentRow.tipodocumento.strdesctipodoc}" />
                        </rich:column>
                        <rich:column>
                            <h:outputText  styleClass="ikont-hot-nombredocs" value="#{currentRow.strnombre}" />
                        </rich:column>
                        <rich:column >
                            <a4j:commandButton styleClass="ikont-acb-eliminardocs" id="eliminardoc" value="#{var.eliminar}" render="tablaDocumentoscont" execute="@this"
                                               action="#{Supervisor$Contrato.eliminardocu(filaSeleccionada)}">
                            </a4j:commandButton>
                        </rich:column>
                        <f:facet name="footer">
                            <rich:columnGroup>
                                <rich:column colspan="4" breakRowBefore="true" >
                                    <rich:dataScroller id="scrolltablaDocumentos" for="tablaDocumentoscont" render="tablaDocumentoscont"/>
                                </rich:column>
                            </rich:columnGroup>
                        </f:facet>
                    </rich:dataTable>
                </h:panelGroup>
            </a4j:region>           

            <h:panelGrid styleClass="ikont-hpg-botones" columns="3" cellspacing="15" cellpadding="0">
                <a4j:commandLink value="#{var.finalizar}" action="#{Supervisor$Contrato.finalizarGuardado}" immediate="true" />
                <a4j:commandLink value="#{var.guardarbo}" action="#{Supervisor$Contrato.guardarBorradorConvenio}" immediate="true" />

            </h:panelGrid>

        </h:form>
        <ui:include src="/modal/editarDocumentoModal.xhtml"/>
        <ui:include src="/modal/panelUploadDocumentoContratoBasico.xhtml"/>
        <ui:include src="/modal/FuenteRecursosConvenio.xhtml"/>
        
    </ui:define>

</ui:composition>

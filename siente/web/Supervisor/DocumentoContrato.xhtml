<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:a4j="http://richfaces.org/a4j" 
                xmlns:interkont="http://www.interkont.com/jsf"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:rich="http://richfaces.org/rich"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="/facelets/template_main.xhtml">
    <ui:define name="head">
        <title>Cobra - Supervisor</title>
        <h:outputScript name="script_supervisor.js"/>
    </ui:define>

    <ui:define name="menu">
        <ui:include src="/facelets/menu_gestion.xhtml"/>
    </ui:define>
    <ui:define name="menu_lateral">
        <ui:include src="/facelets/menu_lateral_gestion.xhtml"/>
        <ui:include src="/facelets/menu_lateral_contrato.xhtml"/>
    </ui:define>
    <ui:define name="title">
        <h:outputText  stylestyleClassikont- "   value="#{var.resumencontrato} #{Supervisor$Contrato.tipoContCon}"/>
    </ui:define>
    <ui:define name="body">
        <h:form target="_blank" > 
            <h:panelGroup >
                <div >
                    <marquee scrolldelay="200" behavior="alternate" >
                        <rich:message for="txt_strnombre_documento" stylestyleClassikont-"  />
                    </marquee>
                </div>
                <interkont:spacer height="20px" />
                <h:panelGroup id="panel_docu_contrato">
                    <rich:dataTable id="tablaDocumentosContrato"
                                    sortMode="single"
                                    
                                    value="#{SessionBeanCobra.cobraService.listaDocumentosContrato}"
                                    var="currentRow" 
                                    rowKeyVar="filaSeleccionada"
                                    rows="7"
                                    rowClasses="cabezo_tabla01, cabezo_tabla02" >
                        <rich:column width="320px">
                            <f:facet name="header">
                                <h:outputText  stylestyleClassikont- "   value="#{var.houtnomdocu} "/>
                            </f:facet>
                            <h:outputText  stylestyleClassikont- "   value="#{currentRow.strnombre}"/>
                        </rich:column>
                        <rich:column width="150px">
                            <f:facet name="header">
                                <h:outputText  stylestyleClassikont- "   value="#{var.tipo}"/>
                            </f:facet>
                            <h:outputText  stylestyleClassikont- "   value="#{currentRow.tipodocumento.strdesctipodoc}"/>
                        </rich:column>
                        <rich:column width="150px">
                            <f:facet name="header">
                                <h:outputText  stylestyleClassikont- "    value="#{var.fechadeldocumento}"/>
                            </f:facet>
                            <h:outputText  stylestyleClassikont- "   value="#{currentRow.datefecha}">
                                <f:convertDateTime pattern="yyyy-MMM-dd"/>
                            </h:outputText>
                        </rich:column>
                        <rich:column  width="60px">
                            <f:facet name="header">
                                <h:outputText  stylestyleClassikont- "   value="#{var.Ver}"/>
                            </f:facet>
                            <h:commandLink action="#{Supervisor$Contrato.bt_download_documento_action_modulo(filaSeleccionada)}"  immediate="true">
                                <h:graphicImage  stylestyleClassikont- "    width="25" height="25" value="/resources/imgs/bt_ver.png"/>
                            </h:commandLink>
                        </rich:column>
                        <rich:column  width="60px" rendered="#{SessionBeanCobra.usuarioObra.renderrecurso.btndetalleproyecto}">
                            <f:facet name="header">
                                <h:outputText  stylestyleClassikont- "    value="#{var.eliminar}"/>
                            </f:facet>
                            <a4j:commandLink action="#{Supervisor$Contrato.bt_eliminar_documento_action(filaSeleccionada)}"
                                             rendered="#{!currentRow.tipodocumento.obligatorio}" execute="@this"
                                             title="#{var.eliminar}"  immediate="true" render="tablaDocumentosContrato">
                                <h:graphicImage  stylestyleClassikont- "    width="25" height="25" value="/resources/imgs/bt_eliminar.png"/>
                            </a4j:commandLink>
                        </rich:column>
                        <f:facet name="footer">
                            <rich:dataScroller renderIfSinglePage="false"/>

                        </f:facet>
                    </rich:dataTable>
                </h:panelGroup>
            </h:panelGroup>
            <interkont:spacer height="20px"/>
        </h:form>
        <h:form>
            <rich:dataTable id="docsubir"  rendered="#{SessionBeanCobra.usuarioObra.renderrecurso.btndetalleproyecto}">
                <f:facet name="header">
                    <rich:columnGroup>
                        <rich:column colspan="4" >
                            <h:outputText  stylestyleClassikont- "   value="#{var.subidarapidadedocumentos}"/>
                        </rich:column>
                        <rich:column breakRowBefore="true" >
                            <h:outputText  stylestyleClassikont- "    value="#{var.nombre}"/>
                        </rich:column>
                        <rich:column >
                            <h:outputText  stylestyleClassikont- "   value="#{var.tipo}"/>
                        </rich:column>
                        <rich:column >
                            <h:outputText  stylestyleClassikont- "   value="#{var.fechadeldocumento}"/>
                        </rich:column>
                        <rich:column >
                            <h:outputText  stylestyleClassikont- "   value="#{var.subir}"/>
                        </rich:column>
                    </rich:columnGroup>
                </f:facet>
                <f:facet name="footer">
                    <rich:columnGroup id="contrasubido">
                        <rich:column >
                            <h:inputText maxlength="255" value="#{Supervisor$Contrato.documentoobra.strnombre}" required="true" requiredMessage="#{var.debeproporcinarelnombredeldocu}"/>
                        </rich:column>
                        <rich:column >
                            <h:selectOneMenu value="#{Supervisor$Contrato.documentoobra.tipodocumento.inttipodoc}">
                                <f:selectItems value="#{Supervisor$Contrato.tipodocumento}" />
                            </h:selectOneMenu>
                        </rich:column>
                        <rich:column >
                            <rich:calendar locale="#{var.rcalendarlocale}" value="#{Supervisor$Contrato.documentoobra.datefecha}" required="true" inputSize="10"/>
                        </rich:column>
                        <rich:column >
                            <h:panelGrid id="panelsubido" columns="3">
                               <a4j:commandButton stylestyleClassikont-"   value="#{var.examinar}" immediate="true"
                                                           oncomplete="#{rich:component('panelUploadDocumentoContrato')}.show();" render="paneldocucontra"/>
                                 <rich:dataGrid columns="1" rowKeyVar="row" value="#{Supervisor$Contrato.subirDocumentoContrato.archivos}" var="file" >
                                            <h:outputText  stylestyleClassikont- "   value=" #{file.nombre}"/>
                                        </rich:dataGrid>
                               <a4j:commandButton action="#{Supervisor$Contrato.bt_agregar_documento_action}"
                                                           title="#{var.agregar}" value="#{var.agregar}"
                                                           rendered="#{Supervisor$Contrato.cargadorDocumento.numArchivos>0}"
                                                           render="docsubir, tablaDocumentosContrato, paneldocucontra"/>
                                 </h:panelGrid>
                                </rich:column>
                    </rich:columnGroup>
                </f:facet>

            </rich:dataTable>
        </h:form>
        <ui:include src="/modal/panelUploadDocuModalContra.xhtml"/>
    </ui:define>
</ui:composition>


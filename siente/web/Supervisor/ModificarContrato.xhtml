<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition  
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:a4j="http://richfaces.org/a4j" xmlns:interkont="http://www.interkont.com/jsf"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:fn="http://java.sun.com/jsp/jstl/functions"
    xmlns:m="http://code.google.com/p/gmaps4jsf/"  
    template="/facelets/template_main.xhtml">

    <ui:define name="head">
        <title>Modificar Contrato</title>
        <link rel="stylesheet" type="text/css" href="/#{var.versioncobra}/resources/css/estilos.css" media="all" />
        <h:outputScript name="script_supervisor.js"/>
        <h:outputScript name="/js/csspopup.js"/>
        <h:outputScript name="/js/jquery.timers-1.0.0.js"/>
        <h:outputScript name="/js/validarletra.js"/>
        <link href="/#{var.versioncobra}/resources/css/style.css" rel="stylesheet" type="text/css"/>
    </ui:define>

    <ui:define name="title">
        <h:outputText  styleClass="ikont-hot-modificarcontrato"   value="#{var.modificarcontrato}"/>
    </ui:define>
    <ui:define name="menu">
        <ui:include src="/facelets/menu_gestion.xhtml"/>
    </ui:define>
    <ui:define name="menu_lateral">
        <h:panelGroup  rendered="#{!var.permisonuevodiseño}">
            <ui:include src="/facelets/menu_lateral_gestion.xhtml"/>
            <ui:include src="/facelets/menu_lateral_contrato.xhtml"/>
        </h:panelGroup>
        <h:panelGroup rendered="#{var.permisonuevodiseño}">
            <ui:include src="/facelets/menu_lateral_novedades_zoom.xhtml"/>
        </h:panelGroup>
    </ui:define>
    <ui:define name="body">

        <rich:panel id="modificar">
            <f:facet name="header" >
                <h:panelGroup >
                    <h:outputText  styleClass="ikont-hot-modificarcontrato"   value="#{var.modificarcontrato}"   />
                </h:panelGroup>
            </f:facet>
            <h:form prependId="false" >
                <h:inputHidden id="finfecha" value="#{Supervisor$Contrato.finentrega}" />
            </h:form>
            <h:form id="form_modifi_contrato" >
                <h:panelGrid id="layoutdetalleModificar"   rendered="true">
                    <h:panelGrid id="detallecontrato" styleClass="ikont-hpg-detallecontrato"   columns="4"
                                 columnClasses="column-grid-panel,column-grid-panel,column-grid-panel,column-grid-panel">
                        <rich:panel  id="tipo" header="#{var.tipo}" bodyClass="rich-panel-grid-body" styleClass="ikont-rp-tipo"   headerClass="font-header-panel"
                                     rendered="#{!Supervisor$Contrato.contrato.booltipocontratoconvenio}">
                            <h:panelGrid columns="1" >
                                <interkont:spacer height="30"/>
                                <h:panelGroup>
                                    <center>
                                        <h:outputText  styleClass="ikont-hot-tipocontrato"   id="tipocontrato" value="#{Supervisor$Contrato.contrato.tipocontrato.strdesctipocontrato}" />
                                    </center>
                                </h:panelGroup>
                                <interkont:spacer height="20"/>
                            </h:panelGrid>
                        </rich:panel>

                        <rich:panel id="valor" header="#{var.valor}" bodyClass="rich-panel-grid-body" styleClass="ikont-rp-valor"   headerClass="font-header-panel">
                            <interkont:spacer height="50"/>

                            <h:panelGrid columns="1"  columnClasses="column-grid-detail">
                                <h:panelGroup>
                                    <h:panelGrid columns="1">
                                        <h:outputText  styleClass="ikont-hot-vlrcc"   id="vlrcc" value="#{Supervisor$Contrato.contrato.numvlrcontrato}"    >
                                            <f:convertNumber pattern="$ ###,###"/>
                                        </h:outputText>
                                    </h:panelGrid>
                                </h:panelGroup>
                            </h:panelGrid>
                        </rich:panel>

                        <rich:panel id="duracioncontra" header="#{var.intduracion}" bodyClass="rich-panel-grid-body"  styleClass="ikont-"   headerClass="font-header-panel">
                            <h:panelGrid id="pnduracion" columns="1" columnClasses="column-grid-detail" >
                                <h:outputText  styleClass="ikont-hot-pnduraciondias"   value="#{Supervisor$Contrato.contrato.intduraciondias} #{var.dias}" />
                                <h:outputText  styleClass="ikont-hot-pnduraciondesde"   value="desde" />
                                <h:outputText  styleClass="ikont-hot-pnduracionda"  value="#{Supervisor$Contrato.contrato.datefechaini}" >
                                    <f:convertDateTime pattern="yyyy-MMM-dd" />
                                </h:outputText>
                                <h:outputText  styleClass="ikont-hot-"   value="#{var.diashasta}" />
                                <h:outputText  styleClass="ikont-hot-"   value="#{Supervisor$Contrato.contrato.datefechafin}" >
                                    <f:convertDateTime pattern="yyyy-MMM-dd"/>
                                </h:outputText>
                            </h:panelGrid>
                        </rich:panel>

                        <rich:panel id="tiempoentrcontra" header="#{var.tiempoentrega}" bodyClass="rich-panel-grid-body" styleClass="ikont-rp-tiempoentrcontra"   headerClass="font-header-panel">

                            <div id="refreshMe" >
                                <center>
                                    <table width="149" border="0">
                                        <tr>
                                            <td width="45"></td>
                                            <td width="49">
                                                <h1 align="center"  id="refreshMeDias">0</h1>
                                            </td>
                                            <td width="41">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td height="20"></td>
                                            <td>
                                                <p align="center" >Dias</p>
                                            </td>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <h2 align="center"  id="refreshMeHoras">00</h2>
                                            </td>
                                            <td>
                                                <h2 align="center"  id="refreshMeMinutos">00</h2>
                                            </td>
                                            <td>
                                                <h2 align="center"  id="refreshMeSeg">00</h2>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <p align="center" >Horas</p>
                                            </td>
                                            <td>
                                                <p align="center" >Minutos</p>
                                            </td>
                                            <td>
                                                <p align="center" >seg</p>
                                            </td>
                                        </tr>
                                    </table>
                                </center>
                            </div>
                        </rich:panel>
                    </h:panelGrid>
                </h:panelGrid>
                <interkont:spacer height="20px" />

                <rich:collapsiblePanel header="#{var.registrarmodificacion}" switchType="client">
                    <h:panelGroup id="pgprincipal">                            
                        <rich:panel rendered="#{Supervisor$ModificarContrato.cual==1}">
                            <f:facet name="header" >
                                <h:panelGroup >
                                    <h:outputText  styleClass="ikont-hot-prorrogascontrato"   value="1.#{var.prorrogascontrato}" />
                                </h:panelGroup>
                            </f:facet>
                            <h:panelGrid id="modificar1" columnClasses="aiu" columns="2" >
                                <h:outputLabel  styleClass="ikont-hol-lblFecmodi"   id="lblFecmodi"  value="#{var.fechamodificacion}:" for="fecmodifi"/>
                                <h:panelGrid columns="5">
                                    <rich:calendar  datePattern="yyyy-MM-dd" direction="topRight" id="fecmodifi" inputSize="10"
                                                    value="#{Supervisor$ModificarContrato.modificarcontrato.datefechamodificacionseleccionada}" required="true">
                                    </rich:calendar>
                                    <rich:message for="fecmodifi" />
                                </h:panelGrid>
                                <h:outputLabel  styleClass="ikont-hol-modificarprorrogarcontrato"   value="#{var.modificarprorrogarcontrato}:"/>
                                <h:selectOneMenu id="prorroga" value="#{Supervisor$ModificarContrato.modificarcontrato.prorroga}"  >
                                    <f:selectItem itemValue="0" itemLabel="No"/>
                                    <f:selectItem itemValue="1" itemLabel="Adicionar plazo"/>
                                    <f:selectItem itemValue="2" itemLabel="Disminuir plazo"/>
                                    <a4j:ajax event="change" render="pgprorroga, pgprorrogalabel"  execute="@this">
                                    </a4j:ajax>
                                </h:selectOneMenu>
                                <h:panelGroup id="pgprorrogalabel">
                                    <h:outputLabel  styleClass="ikont-hol-lblFectermi"   id="lblFectermi"  value="#{var.nuevafechatermincacion}:" rendered="#{Supervisor$ModificarContrato.modificarcontrato.prorroga>=1}"/>
                                </h:panelGroup>
                                <h:panelGroup id="pgprorroga">
                                    <rich:calendar  datePattern="yyyy-MM-dd" direction="topRight" id="fectermi" inputSize="10" rendered="#{Supervisor$ModificarContrato.modificarcontrato.prorroga>=1}"
                                                    value="#{Supervisor$ModificarContrato.modificarcontrato.datefechafinalizacion}">
                                    </rich:calendar>

                                </h:panelGroup>


                                <h:outputText  styleClass="ikont-hot-justificar"   id="justificar"  value="#{var.porfavorjustifique}:" />
                                <h:panelGrid columns="2">
                                    <h:inputTextarea required="true" requiredMessage="#{var.justimodcontratoreq}"  id="textjustificar" cols="75" rows="4" value="#{Supervisor$ModificarContrato.modificarcontrato.strrazonmodificacion}">
                                        <f:validateLength maximum="255"/>
                                    </h:inputTextarea>
                                    <rich:message for="textjustificar" />
                                </h:panelGrid>
                            </h:panelGrid>

                        </rich:panel>
                        <rich:panel  rendered="#{Supervisor$ModificarContrato.cual==2}">
                            <f:facet name="header" >
                                <h:panelGroup >
                                    <h:outputText  styleClass="ikont-hot-presupuestocontrato"   value="2.#{var.presupuestocontrato}" />
                                </h:panelGroup>
                            </f:facet>
                            <h:panelGrid id="modificar2" columnClasses="aiu" columns="2" >
                                <h:outputLabel  styleClass="ikont-hol-modificar2 "   value="#{var.modificarpresupuestocontrato}"/>
                                <h:selectOneMenu id="presupuesto" immediate="true" value="#{Supervisor$ModificarContrato.modificarcontrato.presupuesto}">
                                    <f:selectItem itemValue="0" itemLabel="No"/>
                                    <f:selectItem itemValue="1" itemLabel="Adicionar"/>
                                    <f:selectItem itemValue="2" itemLabel="Disminuir"/>
                                    <a4j:ajax event="change" render="pgpresupuesto" listener="#{Supervisor$ModificarContrato.calcularValorNuevoContrato}" execute="@this"/>
                                </h:selectOneMenu>

                                <h:panelGroup id="pgpresupuesto">
                                    <h:panelGrid id="pgpresupuesto1" rendered="#{Supervisor$ModificarContrato.modificarcontrato.presupuesto!=0}" columns="2">

                                        <h:outputLabel  styleClass="ikont-hol-lblnumvlractual"    id="lblnumvlractual"  value=" #{var.presupuestoactual}:" rendered="#{Supervisor$ModificarContrato.modificarcontrato.presupuesto!=3}"  />
                                        <h:outputLabel  styleClass="ikont-hol-lblnumvlractumostrar "    id="lblnumvlractumostrar"  value="#{Supervisor$Contrato.contrato.numvlrcontrato}"  rendered="#{Supervisor$ModificarContrato.modificarcontrato.presupuesto!=3}">
                                            <f:convertNumber pattern="$ ###,###"/>
                                        </h:outputLabel>
                                        <h:outputText  styleClass="ikont-hot-lblnumrecursospropios"   id="lblnumrecursospropios"  value="#{var.numrecursospropios} (Entidad Contratante):"/>
                                        <h:inputText id="innumrecursospropios"
                                                     value="#{Supervisor$ModificarContrato.modificarcontrato.numnuevorecursospropios}"
                                                     size="20"  maxlength="20"
                                                     onkeypress="return validar(event)">
                                            <a4j:ajax event="change" render="pgnumvlrtotal" listener="#{Supervisor$ModificarContrato.calcularValorNuevoContrato}" execute="@this"/>
                                            <f:convertNumber  maxFractionDigits="2" minFractionDigits="2" type="number" />
                                        </h:inputText>
                                        <h:outputText  styleClass="ikont-hot-lblnumrecursosch"   id="lblnumrecursosch"  value="#{var.numrecursosch}:" rendered="#{var.varrecurosoch}" />
                                        <h:inputText id="innumrecursosch" rendered="#{var.varrecurosoch}"
                                                     value="#{Supervisor$ModificarContrato.modificarcontrato.numnuevorecursosch}"
                                                     size="20"  maxlength="20"
                                                     onkeypress="return validar(event)">
                                            <a4j:ajax event="change" render="pgnumvlrtotal" listener="#{Supervisor$ModificarContrato.calcularValorNuevoContrato}" execute="@this"/>
                                            <f:convertNumber maxFractionDigits="2" minFractionDigits="2" type="number"/>
                                        </h:inputText>
                                        <h:outputText  styleClass="ikont-hot-lblnumrecursoster"   id="lblnumrecursoster"  value="#{var.numrecursoster}:"/>
                                        <h:inputText id="innumrecursoster"
                                                     value="#{Supervisor$ModificarContrato.modificarcontrato.numnuevorecursostercero}"
                                                     size="20"  maxlength="20"
                                                     onkeypress="return validar(event)">
                                            <a4j:ajax event="change" render="pgnumvlrtotal" listener="#{Supervisor$ModificarContrato.calcularValorNuevoContrato}" execute="@this"/>
                                            <f:convertNumber maxFractionDigits="2" minFractionDigits="2" type="number"/>
                                        </h:inputText>

                                        <h:outputText  styleClass="ikont-hot-lblnumvlrtotal"   id="lblnumvlrtotal"  value="#{var.presupuestoconadicion}:"/>
                                        <h:panelGroup id="pgnumvlrtotal">
                                            <h:inputText id="innumvlrtotal"  value="#{Supervisor$ModificarContrato.modificarcontrato.numvlrnuevo}"
                                                         size="20"  maxlength="20" disabled="true">
                                                <f:convertNumber maxFractionDigits="2" minFractionDigits="2" type="number"/>
                                            </h:inputText>
                                        </h:panelGroup>
                                    </h:panelGrid>

                                </h:panelGroup>
                            </h:panelGrid>
                        </rich:panel>
                        <rich:panel  rendered="#{Supervisor$ModificarContrato.cual==3}">
                            <f:facet name="header" >
                                <h:panelGroup >
                                    <h:outputText  styleClass="ikont-hot-polizas"   value="3.#{var.polizas}"/>
                                </h:panelGroup>
                            </f:facet>

                            <h:outputLabel  styleClass="ikont-hol-modificarpolizascontrato "   value="#{var.modificarpolizascontrato}"/>

                            <h:selectOneMenu id="polizas" immediate="true" value="#{Supervisor$ModificarContrato.modificarcontrato.polizas}">
                                <f:selectItem itemValue="0" itemLabel="No"/>
                                <f:selectItem itemValue="1" itemLabel="Si"/>
                                <a4j:ajax event="change" render="gpPolizasMod" listener="#{Supervisor$ModificarContrato.llenarPolizas}" execute="@this"/>
                            </h:selectOneMenu>
                            <interkont:spacer height="15" />

                            <h:panelGroup id="gpPolizasMod" > 
                                <rich:panel  rendered="#{Supervisor$ModificarContrato.modificarcontrato.polizas==1}">
                                    <f:facet name="header" >
                                        <h:panelGroup >
                                            <h:outputText  styleClass="ikont-hot-gpPolizasModpolizas"   value="#{var.polizas}"/>
                                        </h:panelGroup>
                                    </f:facet>


                                    <h:panelGrid id="gpPolizaModi" columns="2"   >

                                        <h:outputLabel  styleClass="ikont-lblTipoPolizaModi"   id="lblTipoPolizaModi"  value="#{var.tipoPolizaContrato}:" for="comboTipoPolizaModi">

                                        </h:outputLabel>
                                        <h:selectOneMenu id="comboTipoPolizaModi" value="#{Supervisor$Contrato.tipointpoli}">
                                            <f:selectItems value="#{Supervisor$Contrato.tipoPolizas}"/>                                           
                                        </h:selectOneMenu>

                                        <h:outputLabel  styleClass="ikont-hol-lblnumPolizaContratoModi"    id="lblnumPolizaContratoModi"  value=" #{var.numPolizaContrato}:" for="numPolizaContratoModi">
                                        </h:outputLabel>
                                        <h:inputText id="numPolizaContratoModi" value="#{Supervisor$Contrato.polizacontrato.strnumpoliza}"  />
                                        <h:outputLabel  styleClass="ikont-hol-lblVencimientoPolizaModi"   id="lblVencimientoPolizaModi"  value=" #{var.vencimientoPoliza}:" for="calendarVenciPolizaModi">

                                        </h:outputLabel>

                                        <rich:calendar locale="#{var.rcalendarlocale}" datePattern="yyyy-MM-dd" id="calendarVenciPolizaModi" inputSize="10"
                                                       value="#{Supervisor$Contrato.polizacontrato.datefechavecimiento}" />


                                        <h:outputLabel  styleClass="ikont-hol-calendarVenciPolizaModi"   id="lblEntidadPolizaModi"  value=" #{var.entidadPoliza}:" for="comboentidadPolizaModi">
                                        </h:outputLabel>
                                        <h:selectOneMenu id="comboentidadPolizaModi" value="#{Supervisor$Contrato.polizacontrato.aseguradora.intnumnitentidad}">
                                            <f:selectItems value="#{Supervisor$Contrato.companias}"/>
                                        </h:selectOneMenu>

                                        <h:panelGrid  columnClasses="inputsDetalle,inputsDetalle"  >
                                            <a4j:commandButton value="#{var.agregar}" id="agregar_poliza"  action="#{Supervisor$Contrato.agregarPoliza}" render="gpPolizaModi,pgpoliza,tblaPolizasModi"
                                                               >
                                                <a4j:ajax event="click" render="pgpoliza" immediate="true"/>
                                            </a4j:commandButton>
                                        </h:panelGrid>
                                    </h:panelGrid>
                                    <h:panelGroup id="pgpoliza">
                                        <rich:dataTable id="tblaPolizasModi" sortMode="single"  var="localRow"                                                           
                                                        value="#{Supervisor$Contrato.listaPolizacontratos}"
                                                        rowKeyVar="filaSeleccionada">
                                            <rich:column id="tc-strTipoPolizaModi" styleClass="ikont-rc-tcstrTipoPolizaModi" >
                                                <f:facet name="header">
                                                    <h:outputText  styleClass="ikont-hot-tcstrTipoPolizaModi"   value="#{var.tipoPolizaContrato}"/>
                                                </f:facet>
                                                <h:outputText  styleClass="ikont-hot-otxtTipoPolizaModi"   id="otxt-TipoPolizaModi"  value="#{localRow.tipopoliza.strdesctipopoliza}" />
                                            </rich:column>
                                            <rich:column id="tc-strnumPolizaModi" styleClass="ikont-rc-tcstrnumPolizaModi" >
                                                <f:facet name="header">
                                                    <h:outputText  styleClass="ikont-hot-strnumPolizaModinumPolizaContrato"   value="#{var.numPolizaContrato}" />
                                                </f:facet>
                                                <h:outputText  styleClass="ikont-hot-otxtstrnumPolizaModi"   id="otxt-strnumPolizaModi" value="#{localRow.strnumpoliza}"/>
                                            </rich:column>

                                            <rich:column id="tc-strVencimientoPolizaModi"  styleClass="ikont-rc-tcstrVencimientoPolizaModi">
                                                <f:facet name="header">
                                                    <h:outputText  styleClass="ikont-hot-vencimientoPoliza"   value="#{var.fecha} #{var.vencimientoPoliza}" />
                                                </f:facet>
                                                <h:outputText  styleClass="ikont-hot-otxtstrVencimientoPolizaModi"   id="otxt-strVencimientoPolizaModi" value="#{localRow.datefechavecimiento}">
                                                    <f:convertDateTime pattern="yyyy-MMM-dd"/>
                                                </h:outputText>
                                            </rich:column>

                                            <rich:column id="tc-strEntidadContr" styleClass="ikont-rc-strEntidadContr">
                                                <f:facet name="header">
                                                    <h:outputText  styleClass="ikont-hot-entidadPoliza"   value="#{var.entidadPoliza}" />
                                                </f:facet>
                                                <h:outputText  styleClass="ikont-hot-otxtstrEntidadModi"   id="otxt-strEntidadModi" value="#{localRow.aseguradora.strnombreentidad}"/>
                                            </rich:column>
                                            <rich:column id="otxt-Editar" styleClass="ikont-rc-otxtEditar">
                                                <f:facet name="header">
                                                    <h:outputText  styleClass="ikont-hot-otxtEditar"   value="#{var.editar}" />
                                                </f:facet>
                                                <a4j:commandButton id="btnPolizas" value="#{var.editar}" oncomplete="#{rich:component('mp-editar-polizas')}.show();" execute="@this"
                                                                   action="#{Supervisor$ModificarContrato.seleccionareditarPoliza(filaSeleccionada)}" render="rpPolizas">
                                                </a4j:commandButton>

                                            </rich:column>
                                            <rich:column id="tc-streliminarPolizaModi" styleClass="ikont-rc-tcstrnumPolizaModi">
                                                <f:facet name="header">
                                                    <h:outputText  styleClass="ikont-hot-streliminarPolizaModi"   value="#{var.eliminar}" />
                                                </f:facet>
                                                <a4j:commandButton id="eliminarpolModi" value="#{var.eliminar}" render="pgpoliza" execute="@this"
                                                                   action="#{Supervisor$ModificarContrato.eliminarPoliza(filaSeleccionada)}">
                                                </a4j:commandButton>
                                            </rich:column>


                                        </rich:dataTable>
                                    </h:panelGroup>

                                    <h:panelGrid id="pgdocumentosModi" columns="6">
                                        <h:panelGroup>
                                            <h:outputLabel  styleClass="ikont-hol-lblPoliza"   id="lblPoliza"  value="#{var.anadirpolizas}:" for="txtPoliza"/>
                                            <rich:message for="txtPoliza"/>
                                        </h:panelGroup>
                                        <interkont:spacer width="42"/>

                                        <h:inputText size="40" id="txtPoliza" readonly="true" value="#{Supervisor$ModificarContrato.nombreArchivoPoliza}" />
                                        <a4j:commandButton id="bt_agregarModi" value="#{var.examinar}"
                                                           onclick="#{rich:component('panelUploadDocumentopoliza')}.show();
                                                             return true;"
                                                           />
                                    </h:panelGrid>

                                </rich:panel> 
                                <h:panelGrid id="pgdocumentosOtrosi" columns="6" rendered="#{Supervisor$ModificarContrato.modificarcontrato.presupuesto>=1 or Supervisor$ModificarContrato.modificarcontrato.prorroga>=1}" >
                                    <h:panelGroup>
                                        <h:outputLabel  styleClass="ikont-hol-lblOtrosi"   id="lblOtrosi"  value="#{var.adjuntarotrosi}:" for="txtOtrosi"/>
                                        <rich:message for="txtOtrosi"/>
                                    </h:panelGroup>
                                    <interkont:spacer width="42"/>

                                    <h:inputText size="40" id="txtOtrosi" readonly="true" value="#{Supervisor$ModificarContrato.nombreArchivoOtroSi}" />
                                    <a4j:commandButton id="bt_agregarOtrosi" value="#{var.examinar}"  render="gpUploadDocAt"
                                                       onclick="#{rich:component('panelUploadDocumentoOtrosi')}.show();
                                                             return true;"
                                                       />
                                </h:panelGrid>
                            </h:panelGroup>

                        </rich:panel>

                        <rich:panel  rendered="#{Supervisor$ModificarContrato.cual==4}">
                            <f:facet name="header" >
                                <h:panelGroup >
                                    <h:outputText  styleClass="ikont-hot-outformapago"   value="4.#{var.outformapago}"   />
                                </h:panelGroup>
                            </f:facet>
                            <h:outputLabel  styleClass="ikont-hol-modificarpagoscontrato"   value="#{var.modificarpagoscontrato}"/>

                            <h:selectOneMenu id="pagos" immediate="true" value="#{Supervisor$ModificarContrato.modificarcontrato.planificacion}">
                                <f:selectItem itemValue="0" itemLabel="No"/>
                                <f:selectItem itemValue="1" itemLabel="Si"/>
                                <a4j:ajax event="change" render="gpPagosMod"  execute="@this" listener="#{Supervisor$Contrato.llenarplanificacionpagos}"/>
                            </h:selectOneMenu>
                            <interkont:spacer height="15" />


                            <h:panelGroup id="gpPagosMod" > 
                                <rich:panel  rendered="#{Supervisor$ModificarContrato.modificarcontrato.planificacion==1}">
                                    <f:facet name="header" >
                                        <h:panelGroup >
                                            <h:outputText  styleClass="ikont-hot-planificacionpagos"   value="Planificación de pagos"   />
                                        </h:panelGroup>
                                    </f:facet>

                                    <h:panelGrid id="formaanti" columns="3" columnClasses="panelderecha, panelizquierda, panelizquierda">

                                        <h:outputLabel  styleClass="ikont-hol-formadepago"   value="#{var.formadepago}:"/>
                                        <interkont:spacer width="20"/>
                                        <h:outputLabel  styleClass="ikont-hol-strdescformapago"    value="#{Supervisor$Contrato.contrato.formapago.strdescformapago}"/>

                                        <h:outputLabel  styleClass="ikont-hol-porcentajeanticipopago"   value="#{var.porcentaje} #{var.anticipopago}:" rendered="#{Supervisor$Contrato.anticiforma==1}"/>
                                        <interkont:spacer width="20" rendered="#{Supervisor$Contrato.anticiforma == 1}"/>
                                        <h:outputLabel  styleClass="ikont-hol-porcenanticipo"    value="% #{Supervisor$Contrato.porcenanticipo}" rendered="#{Supervisor$Contrato.anticiforma == 1}"/>

                                        <h:outputLabel  styleClass="ikont-hol-valoranticipo"   value="#{var.valoranticipo}:" rendered="#{Supervisor$Contrato.anticiforma == 1 or Supervisor$Contrato.anticiforma == 3}"/>
                                        <interkont:spacer width="20" rendered="#{Supervisor$Contrato.anticiforma == 1 or Supervisor$Contrato.anticiforma == 3}"/>
                                        <h:outputText  styleClass="ikont-hot-vloranticipo"    value="#{Supervisor$Contrato.vloranticipo}" rendered="#{Supervisor$Contrato.anticiforma == 1 or Supervisor$Contrato.anticiforma == 3}">
                                            <f:convertNumber pattern="$###,###"/>
                                        </h:outputText>

                                        <h:outputLabel  styleClass="ikont-anticipopago"   value="#{var.fecha} #{var.anticipopago}:" rendered="#{Supervisor$Contrato.anticiforma == 1 or Supervisor$Contrato.anticiforma == 3}"/>
                                        <interkont:spacer width="20" rendered="#{Supervisor$Contrato.anticiforma == 1 or Supervisor$Contrato.anticiforma == 3}"/>
                                        <h:outputText  styleClass="ikont-hot-fechapago"      value="#{Supervisor$Contrato.fechapago}" rendered="#{Supervisor$Contrato.anticiforma == 1 or Supervisor$Contrato.anticiforma == 3}">
                                            <f:convertDateTime pattern="EEEEEEEE, MMM dd, yyyy"/>
                                        </h:outputText>

                                    </h:panelGrid>

                                    <h:panelGrid  rendered="#{Supervisor$Contrato.anticiforma == 1 or Supervisor$Contrato.anticiforma == 2}">
                                        <interkont:spacer height="5" />
                                        <rich:dataTable id="tablaPlanificacion"
                                                        rows="5"
                                                        var ="planificacion"
                                                        rowKeyVar="filaSeleccionada"
                                                        sortMode="single"
                                                        value="#{SessionBeanCobra.cobraService.listaPlanificacionpagos}"
                                                        >
                                            <f:facet name="header">
                                                <rich:columnGroup>
                                                    <rich:column  breakRowBefore="true" colspan="3">
                                                        <h:outputText  styleClass="ikont-hot-numeroactas"   value="#{var.numero} de Actas Parciales"/>
                                                    </rich:column>
                                                    <rich:column  breakRowBefore="true">
                                                        <h:outputText  styleClass="ikont-hot-tablaPlanificacionporcentajeacta"   value="#{var.porcentaje} #{var.deCiu}l #{var.acta}"/>
                                                    </rich:column>
                                                    <rich:column >
                                                        <h:outputText  styleClass="ikont-hot-tablaPlanificacionvaloracta"   value="#{var.valor} #{var.deCiu}l #{var.acta}" />
                                                    </rich:column>
                                                    <rich:column >
                                                        <h:outputText  styleClass="ikont-hot-tablaPlanificacionfechaacta"   value="#{var.fecha} #{var.deCiu}l #{var.acta}" />
                                                    </rich:column>
                                                    <rich:column >
                                                        <h:outputText  styleClass="ikont-hot-tablaPlanificacioneditar"   value="#{var.editar}" />
                                                    </rich:column>
                                                </rich:columnGroup>
                                            </f:facet>
                                            <rich:columnGroup>
                                                <rich:column   breakRowBefore="true">
                                                    <h:outputText  styleClass="ikont-hot-numvlrporcentage"   value="% #{planificacion.numvlrporcentage}"/>
                                                </rich:column>
                                                <rich:column>
                                                    <h:outputText  styleClass="ikont-hot-numvlrpago"   value="#{planificacion.numvlrpago}">
                                                        <f:convertNumber pattern="$###,###"/>
                                                    </h:outputText>
                                                </rich:column>
                                                <rich:column >
                                                    <h:outputText  styleClass="ikont-hot-datefechapago"   value="#{planificacion.datefechapago}">
                                                        <f:convertDateTime pattern="EEEEEEEE, MMM dd, yyyy"/>
                                                    </h:outputText>
                                                </rich:column>
                                                <rich:column >
                                                    <a4j:commandButton value="#{var.editar}" action="#{Supervisor$Contrato.editarGirodirecto(filaSeleccionada)}" render="mp-crear-girodirecto"
                                                                       oncomplete="#{rich:component('mp-crear-girodirecto')}.show();">
                                                    </a4j:commandButton>
                                                </rich:column>
                                            </rich:columnGroup>

                                        </rich:dataTable>                                            
                                    </h:panelGrid>
                                </rich:panel>
                            </h:panelGroup>

                        </rich:panel>
                        <a4j:commandButton   value="#{var.cancelar}" action="#{Supervisor$ModificarContrato.volverContrato}" immediate="true" render="pgprincipal"/>
                        <a4j:commandButton   value="#{var.volver}"  action="#{Supervisor$ModificarContrato.volver}" rendered="#{Supervisor$ModificarContrato.cual!=1}" render="pgprincipal"/>
                        <a4j:commandButton  value="#{var.siguienteCiu}" action="#{Supervisor$ModificarContrato.siguiente}" rendered="#{Supervisor$ModificarContrato.cual!=3}" render="pgprincipal" />
                        <a4j:commandButton  value="#{var.finalizar}" action="#{Supervisor$ModificarContrato.guardarModificarContrato}" rendered="#{Supervisor$ModificarContrato.cual==3}" render="pgprincipal, layoutdetalleModificar" />
                        <a4j:outputPanel id="panelErrorModpolizas">
                            <rich:messages id="messagesModPolizas" globalOnly="true"
                                           styleClass="ikont-rm-messagesModPolizas"   ajaxRendered="true"
                                           >
                                <f:facet name="infoMarker">
                                    <h:graphicImage  styleClass="ikont-hgi-msginfo "    url="/resources/imgs/msginfo.png" />
                                </f:facet>
                                <f:facet name="warnMarker">
                                    <h:graphicImage  styleClass="ikont-hgi-msgwarn "    url="/resources/imgs/msgwarn.png" />
                                </f:facet>
                                <f:facet name="errorMarker">
                                    <h:graphicImage  styleClass="ikont-hgi-msgerror "    url="/resources/imgs/msgerror.png" />
                                </f:facet>
                                <f:facet name="fatalMarker">
                                    <h:graphicImage  styleClass="ikont-hgi-msgerror"     url="/resources/imgs/msgerror.png" />
                                </f:facet>
                            </rich:messages>

                        </a4j:outputPanel>

                    </h:panelGroup>

                </rich:collapsiblePanel>
            </h:form>

        </rich:panel>
        <ui:include src="/modal/editarPoliza.xhtml"/>
        <ui:include src="/modal/panelUploadDocumentoEditarPoliza.xhtml"/>
        <ui:include src="/modal/panelUploadDocumentoEditarOtrosi.xhtml"/>
        <script type="text/javascript" language="JavaScript">
                                                         window.onload = iniciarFunciones();

                                                         function iniciarFunciones() {
                                                             var timefalta = document.getElementById("finfecha").value;
                                                             var futuro = new Date(timefalta);

                                                             setInterval(function() {
                                                                 var ahora = new Date();
                                                                 var faltan = futuro - ahora;

                                                                 if (faltan > 0) {
                                                                     var segundos = Math.round(faltan / 1000);
                                                                     var minutos = Math.floor(segundos / 60);
                                                                     var segundos_s = segundos % 60;
                                                                     var horas = Math.floor(minutos / 60);
                                                                     var minutos_s = minutos % 60;
                                                                     var dias = Math.floor(horas / 24);
                                                                     var horas_s = horas % 24;
                                                                     horas_s = (!(horas_s > 9)) ? '0' + horas_s : horas_s;
                                                                     dias = (!(dias > 9)) ? '0' + dias : dias;
                                                                     minutos_s = (!(minutos_s > 9)) ? '0' + minutos_s : minutos_s;
                                                                     segundos_s = (!(segundos_s > 9)) ? '0' + segundos_s : segundos_s;
                                                                     document.getElementById('refreshMeDias').innerHTML = dias;
                                                                     document.getElementById('refreshMeHoras').innerHTML = horas_s;
                                                                     document.getElementById('refreshMeMinutos').innerHTML = minutos_s;
                                                                     document.getElementById('refreshMeSeg').innerHTML = segundos_s;
                                                                 }
                                                             }, 100);
                                                         }
        </script>
    </ui:define>

</ui:composition>

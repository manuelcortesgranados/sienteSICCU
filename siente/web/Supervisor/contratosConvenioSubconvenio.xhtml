<ui:composition
    xmlns:a4j="http://richfaces.org/a4j" 
    xmlns:rich="http://richfaces.org/rich"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    >

    <rich:collapsiblePanel id="simpleToggleSubconvenios" switchType="ajax" header="Subconvenios" 
                           toggleListener="#{Supervisor$Contrato.llenarSubconvenios}" style="width: 87%">
        <a4j:ajax event="switch" render="tableSubconvenios" />
        
                <rich:dataTable id="tableSubconvenios" styleClass="ikont-tabla-entidad-contratista"
                                rowKeyVar="filaSeleccionada"
                                value="#{Supervisor$Contrato.listaSubconvenios}"
                                sortMode="single" var="_row"  rows="20"
                                rowClasses="cabezo_tabla01, cabezo_tabla02" style="width: 87%;">

                    <rich:column id="tc_strnrocontrato"   styleClass="ikont-rc-tcstrnrocontrato">
                        <f:facet class="ikont-colum-superior-consulta" name="header">
                            <h:outputText  styleClass="ikont-hot-houtnrocontrato"   value="#{var.nroConvenio} "/>
                        </f:facet>
                        <h:outputText  styleClass="ikont-hot-ststrnrocontrato"   id="st_strnrocontrato" value="#{_row.strnumcontrato}"/>
                    </rich:column>
                    <rich:column  styleClass="ikont-rc-tcstrnrocontrato">
                        <f:facet class="ikont-colum-superior-consulta" name="header">
                            <h:outputText  styleClass="ikont-hot-objetocontrato"   value="#{var.nombre} "/>
                        </f:facet>
                        <h:inputTextarea  value="#{_row.strnombre}" readonly="true" cols="35" rows="3" />
                    </rich:column>
                    <rich:column id="tc_strnomcontratista" styleClass="ikont-rc-tcstrnomcontratista">
                        <f:facet class="ikont-colum-superior-consulta" name="header">
                            <h:outputText  styleClass="ikont-hot-houtcontratis"   value="#{var.entidad}"/>
                        </f:facet>
                        <h:outputText  styleClass="ikont-hot-ststrnomcontratista"   id="st_strnomcontratista" value="#{_row.contratista.strnombre} #{row.contratista.strapellido1}"/>
                    </rich:column>
                    <rich:column id="tc_valor" styleClass="ikont-rc-tcvalor">
                        <f:facet class="ikont-colum-superior-consulta" name="header">
                            <h:outputText  styleClass="ikont-hot-vlrcontra"   value="#{var.vlrcontra}"/>
                        </f:facet>
                        <h:outputText  styleClass="ikont-hot-numvlrcontrato"   value="#{_row.numvlrcontrato}">
                            <f:convertNumber pattern="#{var.formatomoneda}"/>
                        </h:outputText>
                    </rich:column>
                    <rich:column id="tc_consultar_contrato"  >
                        <f:facet name="header" >
                            <h:outputText value="#{var.consultar}"/>
                        </f:facet>
                        <h:commandLink rendered="#{!SessionBeanCobra.cobraService.ciu and SessionBeanCobra.logueadodesdemapa}" styleClass="ikont-hcl-zoom-contratista" title="#{var.contrato}" immediate="true"   action="#{Supervisor$AdministrarObraNew.detalleContrato}">
                            <a4j:param assignTo="#{Supervisor$AdministrarObraNew.mostrarContratoConvenio}" value="#{_row.intidcontrato}" />
                            <a4j:param assignTo="#{Supervisor$Contrato.isFromContracts}" value="false" />
                            <a4j:param assignTo="#{Supervisor$AdministrarObraNew.isFromContracts}" value="false" />    
                        </h:commandLink>
                    </rich:column>
                    <f:facet name="footer">

                        <rich:column colspan="10" breakRowBefore="true">
                            <center>
                                <h:panelGrid columns="4">
                                    <a4j:commandButton id="btPriCont" value="#{var.primeroCiu}" disabled="#{!Supervisor$Contrato.primeraPagina}" action="#{Supervisor$Contrato.getFirstContracts}"
                                                       render="tContHijo">
                                    </a4j:commandButton>

                                    <a4j:commandButton id="btAntCont" value="#{var.anteriorCiu}" disabled="#{!Supervisor$Contrato.anteriorPagina}" action="#{Supervisor$Contrato.getBackContracts}"
                                                       render="tContHijo">
                                    </a4j:commandButton>

                                    <a4j:commandButton id="btSigCont" value="#{var.siguienteCiu}" disabled="#{!Supervisor$Contrato.siguientePagina}" action="#{Supervisor$Contrato.getNextContracts}"
                                                       render="tContHijo">
                                    </a4j:commandButton>

                                    <a4j:commandButton id="btUltCont" value="#{var.ultimoCiu}" disabled="#{!Supervisor$Contrato.ultimoPagina}" action="#{Supervisor$Contrato.getLastContracts}"
                                                       render="tContHijo">
                                    </a4j:commandButton>
                                </h:panelGrid>
                            </center>
                        </rich:column>

                    </f:facet>

                </rich:dataTable>

        
    </rich:collapsiblePanel>

</ui:composition>


<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:a4j="http://richfaces.org/a4j" xmlns:interkont="http://www.interkont.com/jsf"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:rich="http://richfaces.org/rich"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:fn="http://java.sun.com/jsp/jstl/functions"
                >


    
    <center>
        <h:outputLabel  styleClass="ikont-hol-diligenciarvlrcont"   rendered="#{Supervisor$Contrato.contrato.numvlrcontrato==0}" value="#{var.debediligenciarvalorcontrato}" />
    </center>
    <h:panelGroup id="gpPrincipalFormaPago" rendered="#{Supervisor$Contrato.contrato.numvlrcontrato!=0}">
        <center><!--acta unica-->
            <h:panelGrid columns="2">
                <h:outputText  styleClass="ikont-hot-formapago font-general" id="lblformaPagoC"  value="(*)#{var.formadepago}:"/>
                <h:selectOneMenu styleClass="ikont-hsom-formapago" id="cmbformaPagoC" value="#{Supervisor$Contrato.contrato.formapago.intidformapago}" >
                    <f:selectItems value="#{Supervisor$Contrato.formaPago}" />
                    <a4j:ajax event="valueChange" render="gpFormas, gpCuotas, pgformapago,stpformadepago" listener="#{Supervisor$Contrato.validacionFormadePago}" />
                </h:selectOneMenu>
            </h:panelGrid>
            <h:panelGroup id="pgformapago">                                     
                <h:panelGrid cellspacing="6" columns="2" id="gpFormas">
                    <h:panelGrid rendered="#{var.fechaformapago and Supervisor$Contrato.contrato.formapago.intidformapago==3}">
                        <h:outputText  styleClass="ikont-hot-fechaformadepa font-general" id="lbfechaformadepa"  value="Fecha de Pago: " rendered="#{Supervisor$Contrato.contrato.formapago.intidformapago==3}"/>

                        <rich:calendar  datePattern="#{var.formatofecha}" id="fecpagoactaunica"
                                        rendered="#{Supervisor$Contrato.contrato.formapago.intidformapago==3}"
                                        inputSize="10" value="#{Supervisor$Contrato.planificacionpago.datefechapago}" >
                        </rich:calendar>
                    </h:panelGrid>
                    <h:outputText  styleClass="ikont-hot-porcanticipo font-general" value="Porcentaje Anticipo:" rendered="#{Supervisor$Contrato.contrato.formapago.intidformapago==1}" />
                    <h:panelGrid columns="3" rendered="#{Supervisor$Contrato.contrato.formapago.intidformapago==1}">
                        <h:inputText id ="poranti" value = "#{Supervisor$Contrato.porcentapagoanticipo}"
                                                 rendered="#{Supervisor$Contrato.contrato.formapago.intidformapago==1}"
                                             maxlength="15" >
                                    <f:convertNumber maxFractionDigits="15"  minIntegerDigits="1" maxIntegerDigits="2" pattern="##.00"/>
                                    <f:validateDoubleRange maximum="99.999999999999" minimum="0" />
                                    <a4j:ajax event="change"  listener="#{Supervisor$Contrato.calculoActasParciales}" render="vlranti" />
                                </h:inputText>
                                <rich:message for="poranti" style="color: red;"/>                       
                       
                        <h:outputText  styleClass="ikont-hot-porcentaje" value="%" rendered="#{Supervisor$Contrato.contrato.formapago.intidformapago==1}"/>
                    </h:panelGrid>
                    <h:outputText  styleClass="ikont-hot-vlranticipo font-general" value="Valor Anticipo:" rendered="#{Supervisor$Contrato.contrato.formapago.intidformapago==1}" />
                    <h:outputText  styleClass="ikont-hot-vlranti font-general" id = "vlranti" value = "#{Supervisor$Contrato.valorpagoanticipo}" rendered="#{Supervisor$Contrato.contrato.formapago.intidformapago==1}">
                        <f:convertNumber pattern="#{var.formatomoneda}"/>
                    </h:outputText>


                    <h:outputText  styleClass="ikont-hot-fecanticipo font-general" value="Fecha Anticipo:" rendered="#{Supervisor$Contrato.contrato.formapago.intidformapago==1 and var.fechaformapago}"/>

                    <rich:calendar  datePattern="#{var.formatofecha}" direction="topRight" id="fecpagoantic" rendered="#{Supervisor$Contrato.contrato.formapago.intidformapago==1 and var.fechaformapago}"
                                    inputSize="10" value="#{Supervisor$Contrato.fechapagoanticipo}"   />

                    <h:outputText  styleClass="ikont-hot-numactparc font-general" id="lbnumactasparciales"  value="NÃºmero de Actas Parciales: " rendered="#{var.fechaformapago and Supervisor$Contrato.contrato.formapago.intidformapago==1 || var.fechaformapago and  Supervisor$Contrato.contrato.formapago.intidformapago==2 }"/>
                    <rich:inputNumberSpinner id="innumactasparciales"  minValue="0" maxValue="100" rendered="#{var.fechaformapago and Supervisor$Contrato.contrato.formapago.intidformapago==1 ||var.fechaformapago and Supervisor$Contrato.contrato.formapago.intidformapago==2}"
                                             inputSize="20" value="#{Supervisor$Contrato.numdeactasparciales}">
                        <a4j:ajax event="change"  listener="#{Supervisor$Contrato.calculoActasParciales}" render="gpCuotas" />
                    </rich:inputNumberSpinner>                                       
                </h:panelGrid>
                <h:panelGrid id="gpCuotas"  rendered="#{var.fechaformapago}">

                    <rich:dataTable value="#{Supervisor$Contrato.lisplanifiactapar}" var="arr"
                                    rendered="#{Supervisor$Contrato.contrato.formapago.intidformapago==1 ||Supervisor$Contrato.contrato.formapago.intidformapago==2}">
                        <rich:column id="porcub" width="40px">
                            <f:facet name="header">
                                <h:outputText  styleClass="ikont-hot-vlrporcentaje" value="#{var.valorporcentaje}:" />
                            </f:facet>
                            <h:panelGrid columns="3">
                                
                                <h:inputText id ="otxt-strTipoPolizab" value = "#{arr.numvlrporcentage}" 
                                             maxlength="15" >
                                    <f:convertNumber maxFractionDigits="15"  minIntegerDigits="1" maxIntegerDigits="2" pattern="##.00"/>
                                    <f:validateDoubleRange maximum="99.999999999999" minimum="0" />
                                </h:inputText>
                                <rich:message for="otxt-strTipoPolizab" style="color: red;"/>
                                <h:outputText  styleClass="ikont-hot-txtporcentaje" value=" %"/>
                            </h:panelGrid>
                        </rich:column>

                        <rich:column id="fecuo" >
                            <f:facet name="header">
                                <h:outputText  styleClass="ikont-hot-fechagiro" value="#{var.fechagiro}:" />
                            </f:facet>
                            <rich:calendar  datePattern="#{var.formatofecha}" direction="topRight" id="fecpagoactapargir"
                                            inputSize="10" value="#{arr.datefechapago}" >
                            </rich:calendar>
                        </rich:column>
                    </rich:dataTable>


                </h:panelGrid>
            </h:panelGroup>                            
        </center>
    </h:panelGroup>
</ui:composition>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition
    xmlns:rich="http://richfaces.org/rich"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:a4j="http://richfaces.org/a4j" 
    xmlns:interkont="http://www.interkont.com/jsf"
    >

    <div id="ingreso-usuario" class="ikont-div-ingreso-usuario">
            <div  class="ikont-cerrar-panel2">
                <center>

                    <h:commandLink  immediate="true" styleClass="ikont-bt-cerrar-login2" value="X"  onclick="esconderIngresoAnimado();
                            return  false;"/>
                </center>
            </div>
        <hr class="ikont-hr-separador-inicio-registo"/>
            <h:panelGrid  styleClass="ikont-panel-registo-inicio" columns="3" >
                <h:form styleClass="ikont-panel-sesion" >
                    <h:panelGroup styleClass="ikont-panel-sesion" id="inicio_nuevo">
                        <center>                   
                            <h:outputText styleClass="ikont-outtext-titulo" value="#{var.iniciarsesion}"    />
                        </center>
                        <h:panelGrid columns="2" styleClass="ikont-panel-registro"  id="ikont-hpg-ingresarusu">
                            <h:inputText id="usuarionuevo" styleClass="ikont-hit-usuLogin" value="#{SessionBeanCobra.usuarioService.usuarioObra.usuLogin}">
                                <rich:placeholder styleClass="" value="Usuario" />
                            </h:inputText>
                            <h:inputSecret id="contrasenanuevo"  styleClass="inputText_registro" required="true" maxlength="20" value="#{SessionBeanCobra.usuarioService.usuarioObra.usuPasswd}">
                                <f:validateLength maximum="20" minimum="8"/>
                                <rich:placeholder value="Contraseña" />
                            </h:inputSecret>
                        </h:panelGrid>

                        <center>

                            <a4j:commandLink rendered="false" value="#{var.logintabentrarolvidocontrasenia}"   
                                             oncomplete="#{rich:component('panelRecordarContra')}.show(); return false; " execute="@this"/>
                            <br/>
                            <h:panelGrid columns="3">
                                <h:commandButton id="enviardosnuevo" value="Ingresar" action="#{login.enviar_action}"                              
                                                 type="submit"  
                                                 onclick="#{rich:component('ajaxLoadingModalBox')}.show();
                            return true;"
                                                 /> 
                                <h:outputLabel rendered="false" value="o"/>
                                <h:commandLink rendered="false" type="button" id="linkfb" styleClass="ikont-link-fb"/>

                                <h:panelGroup layout="block"  styleClass="tab-login-label-error">
                                    <rich:message for="usuarionuevo" />
                                </h:panelGroup>

                                <h:panelGroup layout="block"  styleClass="tab-login-label-error">
                                    <rich:message for="contrasenanuevo" />
                                </h:panelGroup>


                            </h:panelGrid>
                        </center>
                    </h:panelGroup>
                </h:form> 
                <hr  class="ikont-hr-separador-inicio-registo" />
                <h:form>
                    <h:panelGroup   styleClass="ikont-hpg-gpLogPrinci"   id="gpLogPrinci">
                        <center>
                            <h:outputText styleClass="ikont-outtext-titulo" value="#{var.encabezadoregistro}"    />
                        </center>
                        <rich:panel>
                            <a4j:region id="form_">

                                <h:panelGrid id="ingresarciudadanonuevo" columns="2" styleClass="ikont-panel-registro" >
                                    <h:inputText required="true" maxlength="250" id="textnombre" value="#{SessionBeanCobra.ciudadanoservice.ciudadano.tercero.strnombre}" styleClass="ikont-hit-textnombre"  >
                                        <rich:placeholder value="Nombre" />
                                    </h:inputText>
                                    <h:inputSecret required="true" id="textpassword" size="25" value="#{SessionBeanCobra.ciudadanoservice.password}" styleClass="ikont-hit-textpassword"  >
                                        <rich:placeholder value="Contraseña" />
                                    </h:inputSecret>
                                    <h:inputText required="true"  id="textusuario" maxlength="25" value="#{SessionBeanCobra.ciudadanoservice.ciudadano.usuLogin}" styleClass="ikont-hittextusuario"  >
                                        <rich:placeholder value="Usuario" />
                                    </h:inputText>

                                    <h:inputSecret  required="true" id="textrepassword" size="25" value="#{SessionBeanCobra.ciudadanoservice.repassword}" styleClass="ikont-hit-textrepassword"  >
                                        <rich:placeholder value="Confirmar Contraseña" />
                                    </h:inputSecret>

                                    <h:inputText required="true" maxlength="80" id="textcorreo"  value="#{SessionBeanCobra.ciudadanoservice.ciudadano.tercero.stremail}" styleClass="ikont-hit-textcorreo" >
                                        <rich:placeholder value="Em@il" />
                                    </h:inputText>
                                    <h:selectOneMenu id="combodepartamentoCiudadanuevo" value="2"  >
                                        <f:selectItems value="#{Perfil$Usuario.localidadusuario}" />
                                    </h:selectOneMenu> 

                                    <h:outputLabel styleClass="ikont-outtext-subtitulo"  value="#{var.fechadeNacimiento}"/>
                                    <rich:calendar id="fechaciudadanonuevo" locale="#{var.rcalendarlocale}" datePattern="yyyy-MM-dd"  styleClass="inputText_registro"  
                                                   value="#{SessionBeanCobra.ciudadanoservice.ciudadano.tercero.datefechanacimiento}"/>
                                    <h:outputLabel styleClass="ikont-outtext-subtitulo"  value="#{var.generoContratista}"/>
                                    <h:selectOneMenu id="combogeneronuevo" value="genero">
                                        <f:selectItems value="#{Perfil$Usuario.generosoption}" />
                                    </h:selectOneMenu>
                                </h:panelGrid>
                                <hr class="ikont-hr-separador" />
                                <br/>
                                <center>
                                    <h:panelGroup styleClass="ikont-hpanel-img-registro">
                                    <h:panelGroup>
                                        <h:panelGroup styleClass="ikont-hpg-imagenciudadano"   layout="block">

                                            <h:panelGroup styleClass="ikont-hpg-pgfotografia"   layout="block" id="pgfotografia">
                                                <h:graphicImage  styleClass="ikont-hgi-pathImaCiu"   url="#{SessionBeanCobra.ciudadanoservice.pathImaCiu}" style="width:100% "  height="100%"/>
                                            </h:panelGroup>

                                        </h:panelGroup>
                                        <a4j:commandLink styleClass="ikont-enlace-cargar-imagen-registro"   value="#{var.examinar}" action="#{SessionBeanCobra.visualizarModalImagenCiudadano}" render="panelImagen" oncomplete="#{rich:component('modalImagenCorreo')}.show(); return true;" execute="@this">   
                                        </a4j:commandLink> 

                                    </h:panelGroup>
                                    <br/>
                                    <h:panelGrid columns="3">
                                        <a4j:commandButton id="btnGuardarCiudadano"  
                                                           value="#{var.registrarme}"  
                                                           action="#{Ciudadano$PerfilCiudadano.MostrarMensaje}" render="pgguardarCiudadano"  execute="@form"
                                                           oncomplete="#{rich:component('confirmarCiudadano')}.show();">
                                        </a4j:commandButton> 
                                        <h:outputLabel rendered="false" value="o" />
                                        <h:commandLink  rendered="false" type="button" id="linkfb" styleClass="ikont-link-fb"/>
                                    </h:panelGrid>
                                 </h:panelGroup>
                                </center>
                            </a4j:region>
                        </rich:panel></h:panelGroup>
                </h:form>
            </h:panelGrid>

            <div  class="ikont-div-cerrar-panel">
                    <h:commandLink styleClass="ikont-btn-cerrar-flecha-session"   onclick="esconderIngresoAnimado();
                            return  false;"/>
            </div>
        </div>
        
        
        <br/>
        <br/>


        <div class="ikont-div-scroll-menu" >
            <h:panelGrid rendered="#{var.permisonuevodiseno}" onmouseover="mostrarMenuAnimado();
                            return  false;" styleClass="ikont-panel-spacing-menu" columns="3">        
                <h:commandLink styleClass="ikont-menu-inicio-zoom_1 ikont-div-menu-zoom"/>
                <h:outputLabel  styleClass="ikont-label-estructura-menu  ikont-label-menu"  value="INICIO" rendered="#{!SessionBeanCobra.cobraService.ciu}"/>  
                <h:outputLabel  styleClass="ikont-label-estructura-menu  ikont-label-menu"  value="#{var.menuProyecto}" rendered="#{SessionBeanCobra.cobraService.ciu}"/> 
                <h:graphicImage styleClass="imagen_flecha_inicio" value="/resources/imgs/flecha_roja_inicio.png" />
            </h:panelGrid>
            <h:panelGrid rendered="#{SessionBeanCobra.logueadodesdemapa}">
            <div id="header_content"  style="width: 152px !important; bottom: 50px;float: none;position: relative;top: -64px;left: 46px;" /> 
            </h:panelGrid>
            <div style="top: -50px; left: 43px; position: relative;">
                <a4j:commandLink rendered="#{SessionBeanCobra.logueadodesdemapa}" action="#{SessionBeanCobra.limpirarUsuario}" type="button" id="Ingresar" styleClass="ikont-acb-btn_ingreso_nuevo" onclick="mostrarIngresoAnimado();"  execute="@this" immediate="true" render="ikont-hpg-ingresarusu">
                    <a4j:status id="loginzoom"/>
                </a4j:commandLink>
            </div>
            <h:panelGroup rendered="#{var.permisonuevodiseno}" style="top:">

            </h:panelGroup>
        </div>
        <div id="menuprincipal" class="ikont-div-menu-principal">              
            <h:panelGroup styleClass="kont-contenedor-menu">
                <h:panelGrid styleClass="ikont-panel-spacing-menu" columns="3">
                    <h:commandLink styleClass="ikont-menu-inicio-zoom ikont-div-menu-zoom"/>
                    <h:outputLabel styleClass="ikont-label-estructura-menu  ikont-label-menu"  value="#{var.menuNuevo}" rendered="#{!SessionBeanCobra.cobraService.ciu}"/>
                    <h:outputLabel  styleClass="ikont-label-estructura-menu  ikont-label-menu"  value="#{var.menuProyecto}" rendered="#{SessionBeanCobra.cobraService.ciu}"/> 
                </h:panelGrid>
                <br/>
                <br/>
                <h:panelGrid columns="2" styleClass="ikont-panel-spacing-menu">
                    <h:commandLink action="#{HomeGestion.activarvistamapa}"  immediate="true" styleClass="ikont-menu-inicio-zoom ikont-div-menu-zoom-inicio"/>
                    <h:commandLink action="#{HomeGestion.activarvistamapa}"  immediate="true" value="#{var.menuInicio}" styleClass="ikont-label-estructura-menu ikont-label-menu-item"/>              
                </h:panelGrid>
                <h:commandLink styleClass="ikont-label-estructura-menu ikont-label-menu-buscar-proyecto ikont-espacio-sub-menu" action="#{HomeGestion.activarvistamapa}"  immediate="true" value="#{var.menuBuscarProyecto}"/>
                <hr class="ikont-hr-separador-menu "/>
                <h:panelGrid  columns="2" rendered="#{SessionBeanCobra.usuarioObra.renderrecurso.btnproyecto and var.varnproyecto}">
                    <h:commandLink action="#{Supervisor$IngresarNuevaObra.crearProyecto}"  immediate="true" styleClass="ikont-menu-inicio-zoom ikont-div-menu-zoom-crear-proyecto"/>
                    <h:commandLink action="#{Supervisor$IngresarNuevaObra.crearProyecto}"  immediate="true" styleClass="ikont-label-estructura-menu ikont-label-menu-item" value="#{var.menuCrearProyecto}"/>    
                </h:panelGrid>
                <h:panelGrid columns="2" rendered="false">
                    <h:commandLink action="reportes" immediate="true" styleClass="ikont-menu-inicio-zoom ikont-div-menu-zoom-reportes"/>
                    <h:commandLink action="reportes" immediate="true" styleClass="ikont-label-estructura-menu ikont-label-menu-item" value="#{var.menuReportes}"/>
                </h:panelGrid>
                <h:panelGroup rendered="#{SessionBeanCobra.usuarioObra.renderrecurso.btnver_convenios}"> 
                    <h:panelGrid columns="2">
                        <h:commandLink styleClass="ikont-menu-inicio-zoom ikont-div-menu-zoom-convenios"/> 
                        <h:outputLabel styleClass="ikont-label-estructura-menu ikont-label-menu-item" value="#{var.menuConvenio}"/>
                    </h:panelGrid>
                    <h:panelGroup styleClass="ikont-espacio-sub-menu">
                        <h:commandLink styleClass="ikont-label-menu-estr-sub-titulo" value="-#{var.nuevoconvenio}" actionListener="#{Supervisor$Contrato.iniciarConvenio}" action="#{Supervisor$Contrato.irApaginaconvenio}" immediate="true" rendered="#{SessionBeanCobra.usuarioObra.renderrecurso.btnconvenio}" />
                        <br/>
                        <h:commandLink styleClass="ikont-label-menu-estr-sub-titulo" value="-#{var.menuConsultarConvenio}" action="#{Supervisor$Contrato.iniciarDetaConvenio}" immediate="true"/>    
                    </h:panelGroup>
                </h:panelGroup>
                <hr  class="ikont-hr-separador-menu " rendered="#{SessionBeanCobra.usuarioObra.renderrecurso.btnver_convenios}" />
                <h:panelGroup rendered="#{SessionBeanCobra.usuarioObra.renderrecurso.btnver_contratos}"> 
                    <h:panelGrid columns="2">
                        <h:commandLink styleClass="ikont-menu-inicio-zoom ikont-div-menu-zoom-contratos"/> 
                        <h:outputLabel styleClass="ikont-label-estructura-menu ikont-label-menu-item" value="#{var.menuContratos}"/>
                    </h:panelGrid> 
                    <h:panelGroup styleClass="ikont-espacio-sub-menu"> 
                        <h:commandLink styleClass="ikont-label-menu-estr-sub-titulo" value="-#{var.menuNuevocontrato}" actionListener="#{Supervisor$Contrato.iniciarContrato}" action="nuevoContrato"  immediate="true" rendered="#{SessionBeanCobra.usuarioObra.renderrecurso.btncontratos}"/>
                        <br/> 
                        <h:commandLink styleClass="ikont-label-menu-estr-sub-titulo"  value="-#{var.menuConsultarContrato}" action="#{Supervisor$Contrato.iniciarDetaContrato}" immediate="true"/>   
                    </h:panelGroup>
                </h:panelGroup>
                <hr class="ikont-hr-separador-menu "  rendered="#{SessionBeanCobra.usuarioObra.renderrecurso.btnver_contratos}"/>
                <h:panelGroup rendered="#{SessionBeanCobra.usuarioObra.renderrecurso.btnayuda}"> 
                    <h:panelGrid columns="2">
                        <h:commandLink styleClass="ikont-menu-inicio-zoom ikont-div-menu-zoom-ayuda"/> 
                        <h:outputLabel styleClass="ikont-label-estructura-menu ikont-label-menu-item" value="#{var.menuAyuda}"/>
                    </h:panelGrid>
                    <h:panelGroup styleClass="ikont-espacio-sub-menu">
                        <h:commandLink styleClass="ikont-label-menu-estr-sub-titulo" value="-#{var.menuSoporteLinea}"   onclick="window.open(document.location.href = '#{var.linksoporte}', '_blank');" />
                        <br/>
                        <h:commandLink styleClass="ikont-label-menu-estr-sub-titulo" value="-#{var.menuTutorial}"  immediate="true"
                                       onclick="window.open(document.location.href = '#{facesContext.externalContext.requestContextPath}/ayuda/manual.xhtml', '_blank');"/>
                        <br/>
                        <h:commandLink styleClass="ikont-label-menu-estr-sub-titulo" value="-#{var.menuPreguntasFrecuentes}" immediate="true" action="pregfrecuentes"/>
                    </h:panelGroup>
                </h:panelGroup>
                <hr class="ikont-hr-separador-menu "  rendered="#{SessionBeanCobra.usuarioObra.renderrecurso.mnu_administrador}"/>
                <h:panelGroup rendered="#{SessionBeanCobra.usuarioObra.renderrecurso.mnu_administrador}"> 
                    <h:panelGrid columns="2">
                        <h:commandLink styleClass="ikont-menu-inicio-zoom-administrador " />
                        <h:outputLabel styleClass="ikont-label-estructura-menu ikont-label-menu-item" value="#{var.administrarmodulo}"/>
                    </h:panelGrid>
                      <h:panelGroup styleClass="ikont-espacio-sub-menu">
                        <h:commandLink styleClass="ikont-label-menu-estr-sub-titulo" value="-#{var.gestionarUsuario}"   immediate="true" action="#{Perfil$Usuario.iniciarperfilusuario}" rendered="true" />
                        <br/>
                        <h:commandLink styleClass="ikont-label-menu-estr-sub-titulo" value="-#{var.asociarentidadusuario}"  immediate="true" action="#{Administrador$AdministrarEntidad.asociarEntidad}"/>
                        <br/>
                        <h:commandLink styleClass="ikont-label-menu-estr-sub-titulo" value="-#{var.crearentidad}" immediate="true" action="#{Administrador$AdministrarEntidad.ingresarEntidad}"/>
                    </h:panelGroup>
                </h:panelGroup>

            </h:panelGroup>
        </div>
        <script type="text/javascript">
                        j = jQuery;
                        jQuery(document).ready(inicializar());
                        function  inicializar() {
                            // esconderIngreso();
                            var divMenuPrincipal = j('.ikont-div-menu-principal');
                            divMenuPrincipal.mouseleave(esconderMenuAnimado);
                        }

                        function esconderIngreso() {
                            var divIngresoUsuario = j('.ikont-div-ingreso-usuario');
                            divIngresoUsuario.hide();
                        }

                        function mostrarIngresoAnimado() {
                            var divIngresoUsuario = j('.ikont-div-ingreso-usuario');
                            divIngresoUsuario.stop().animate({height: '572px'});
                        }
                        function esconderIngresoAnimado() {
                            var divIngresoUsuario = j('.ikont-div-ingreso-usuario');
                            divIngresoUsuario.stop().animate({height: '0px'});
                        }
                        //Menu
                        function mostrarMenuAnimado() {
                            var cbMostrarMenu = j('.ikont-cb-mostrar-menu');
                            cbMostrarMenu.hide();
                            var divIngresoUsuario = j('.ikont-div-menu-principal');
                            divIngresoUsuario.stop().animate({width: '268px'});
                        }
                        function esconderMenuAnimado() {
                            var divIngresoUsuario = j('.ikont-div-menu-principal');
                            divIngresoUsuario.stop().animate({width: '0px'});
                            mostrarCbMostrarMenu();
                        }

                        function mostrarCbMostrarMenu() {
                            var cbMostrarMenu = j('.ikont-cb-mostrar-menu');
                            cbMostrarMenu.show();
                        }

        </script>
        <ui:include src="/Ciudadano/modalCiudadano/ImagenCiudadano.xhtml"/>
        <ui:include src="/Ciudadano/modalCiudadano/ConfirmarCiudadano.xhtml"/>
        <ui:include src="/modal/modalRecordarContra.xhtml"/>
</ui:composition>


<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="./../facelets/template_proyecto.xhtml"
                xmlns:a4j="http://richfaces.org/a4j"
                xmlns:interkont="http://www.interkont.com/jsf"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:rich="http://richfaces.org/rich"
                xmlns:fn="http://java.sun.com/jsp/jstl/functions"
                >

    <ui:define name="head">
        <title>#{var.nuevoproyectosupervisor}</title>
        <h:outputScript  name="script_supervisor.js" library="js"/>
        <h:outputScript  name="validarletra.js" library="js"/>
    </ui:define>

    <ui:define name="title">
        <h:outputText  class="ikont-hot-datosbasicos"   value="#{var.ingresarnuevoproyecto} - #{var.datosbasicos}"/>
    </ui:define>

    <ui:define name="menu">
        <ui:include src="./../facelets/menu_gestion.xhtml"/>
    </ui:define>


    <ui:define name="body">

        <h:form id="form_datos_basicos"  >
            <a4j:jsFunction oncomplete="#{rich:component('modalAvisoSupervisor')}.show();" rendered="#{SessionBeanCobra.vermensajeinterventor and var.varmodalsupervisor}"
                            id="editdatosbasicos" name="showModal" action="#{SessionBeanCobra.visualizoModal}" ></a4j:jsFunction> 
        </h:form>        
        <table   align="center" border="0" cellspacing="8" cellpadding="0">
            <tr>
                <h:form>
                    <td rowspan="6" valign="top" >
                        <ui:include src="./../facelets/menu_lateral_gestion.xhtml"/>
                        <ui:include src="./../facelets/menu_lateral_proyecto.xhtml"/>
                    </td>
                </h:form>                
                <td valign="top" height="35" >
                    <h:form>
                        <rich:panel id="mp-proyectosPadres">
                            <f:facet name="header" >
                                <h:panelGroup >
                                    <h:outputText  class="ikont-hot-pasosIniciales"  value="#{var.pasosIniciales}"   />
                                </h:panelGroup>
                            </f:facet>

                            <rich:collapsiblePanel switchType="client" header="3. #{var.datosbasicos}"  >
                                <h:outputText  class="ikont-hot-intcodigoobra"    value="(#{Supervisor$IngresarNuevaObra.obranueva.intcodigoobra})" rendered="#{Supervisor$IngresarNuevaObra.obranueva.intcodigoobra!=0}"/>
                                <h:panelGrid id="layoutPrincipalTab" columnClasses="aiu" columns="2" >

                                    <h:panelGroup>
                                        <h:outputLabel  class="ikont-hol-nomabrev"   id="lblnomabrev"  value="#{var.nombreabre}:" for="txtNombreAbrev"/>
                                        <rich:message for="txtNombreAbrev" />
                                    </h:panelGroup>

                                    <h:inputTextarea  id="txtNombreAbrev" value="#{Supervisor$IngresarNuevaObra.obranueva.strnombreobra}" 
                                                      cols="60" rows="2" >

                                    </h:inputTextarea>


                                    <h:panelGroup>
                                        <h:outputLabel  class="ikont-hol-FecIni"   id="lblFecIni"  value="#{var.fechaactainicio}" for="fecIni"/>
                                        <rich:message for="fecIni" />
                                    </h:panelGroup>

                                    <rich:calendar locale="#{var.rcalendarlocale}" datePattern="yyyy-MM-dd" direction="topRight" id="fecIni" inputSize="10" value="#{Supervisor$IngresarNuevaObra.obranueva.datefeciniobra}" disabled="#{Supervisor$IngresarNuevaObra.cargadorCronograma.numArchivos>0}" >
                                        <a4j:ajax listener="#{Supervisor$IngresarNuevaObra.feciniCambio}" event="change" render="layoutPeriodo" />
                                    </rich:calendar>

                                    <h:outputLabel  class="ikont-hol-FecFin"   id="lblFecFin"  value="#{var.fechaterminacion}"/>

                                    <h:panelGroup id="layoutFechaFin" >
                                        <rich:calendar locale="#{var.rcalendarlocale}" datePattern="yyyy-MM-dd" id="fecFin" inputSize="10" value="#{Supervisor$IngresarNuevaObra.obranueva.datefecfinobra}" disabled="#{Supervisor$IngresarNuevaObra.cargadorCronograma.numArchivos>0}"  >
                                            <a4j:ajax listener="#{Supervisor$IngresarNuevaObra.fechaCambio}" event="change" render="layoutPeriodo"/>
                                        </rich:calendar>
                                    </h:panelGroup>
                                    <h:outputLabel  class="ikont-hol-periodomedida"    value="#{var.periodomedida}"/>
                                    <h:panelGroup id="layoutPeriodoMedi2">
                                        <h:selectOneMenu id="comboperiodomedida" value="#{Supervisor$IngresarNuevaObra.obranueva.periodomedida.intidperiomedida}"  >
                                            <f:selectItems value="#{Supervisor$IngresarNuevaObra.periodoMedida}" />
                                            <a4j:ajax event="change" render="layoutPeriodo, layoutPeriodoMedi2 " />
                                        </h:selectOneMenu>
                                    </h:panelGroup>

                                    <h:panelGroup>
                                        <h:outputLabel  class="ikont-hol-plazodias"   id="lblPlazodias"  value="#{var.plazodias}" for="plazodias"/>
                                        <rich:message for="plazodias" />
                                    </h:panelGroup>

                                    <h:panelGroup id="layoutPeriodo">
                                        <h:inputText  size="15" id="plazodias" value="#{Supervisor$IngresarNuevaObra.obranueva.intplazoobra}" disabled="true">
                                            <f:validateLongRange minimum="0"/>
                                            <f:validateLength maximum="6" minimum="1"/>
                                            <a4j:ajax event="change" listener="#{Supervisor$IngresarNuevaObra.feciniCambio}" render="layoutPeriodo"/>
                                        </h:inputText>
                                    </h:panelGroup>

                                    <h:outputLabel  class="ikont-hol-entidadContratantec"   id="lblEntidadContratantec"  value="#{var.entidadcontratante}"/>
                                    <h:panelGroup id="layoutenco">
                                        <h:selectOneMenu   id="cmbEntidadContratantec" 
                                                          label="Ingrese Entidad" value="#{Supervisor$IngresarNuevaObra.obranueva.tercero.strnombrecompleto}"
                                                          disabled="#{Supervisor$IngresarNuevaObra.validacion.contratos or Supervisor$IngresarNuevaObra.desdeconvenio or Supervisor$IngresarNuevaObra.obranueva.solicitudmaestro!=null}">
                                            <f:selectItems value="#{Supervisor$IngresarNuevaObra.terceroOption}" />
                                            <a4j:ajax event="valueChange" listener="#{Supervisor$IngresarNuevaObra.comboEntidadesObraguardar}" render="gpentidadministerios">
                                            </a4j:ajax>
                                        </h:selectOneMenu>
                                    </h:panelGroup>

                                    <h:outputLabel  class="ikont-hol-interventor"   id="lblinterventor"  value="#{var.houtsupervisor}" for="txtInterventor"/>
                                    <h:inputText  id="txtInterventor" value="#{Supervisor$IngresarNuevaObra.obranueva.strinterventor}" disabled="#{Supervisor$IngresarNuevaObra.obranueva.solicitudmaestro!=null}"
                                                  maxlength="100" size="40"/>

                                    <h:outputLabel  class="ikont-hol-solicitante"   id="lblsolicitante"  value="#{var.solicitante}:" for="txtSolicitante" rendered="#{Supervisor$IngresarNuevaObra.obranueva.solicitud_obra!=null}"/>
                                    <h:panelGroup id="gpsolicitante" rendered="#{Supervisor$IngresarNuevaObra.obranueva.solicitud_obra!=null}">
                                        <h:outputText  class="ikont- "   id="txtSolicitante" value="#{Supervisor$IngresarNuevaObra.solicitante.strnombrecompleto}"/>
                                    </h:panelGroup>

                                    <h:outputLabel  class="ikont-hol-cargo"   id="lblcargo"  value="#{var.cargo}" for="txtCargo" rendered="#{Supervisor$IngresarNuevaObra.obranueva.solicitudmaestro != null || Supervisor$IngresarNuevaObra.obranueva.solicitud_obra!=null}"/>
                                    <h:panelGroup id="gpsolicitanteCargo" rendered="#{Supervisor$IngresarNuevaObra.obranueva.solicitudmaestro != null || Supervisor$IngresarNuevaObra.obranueva.solicitud_obra!=null}">
                                        <h:outputText  class="ikont-hot-cargo"    id="txtCargo" value="#{Supervisor$IngresarNuevaObra.solicitante.cargo.strdescripcion}"/>
                                    </h:panelGroup>

                                </h:panelGrid>
                                <h:panelGrid columns="2" id="gpentidadministerios" >
                                    <h:outputLabel  class="ikont-hol-ruta"   id="lblruta"  value="#{var.seleccionruta}:" rendered="#{Supervisor$EntidadConvenio.intentidadconvenio==2}" />
                                    <h:panelGroup id="pginvias" rendered="#{Supervisor$EntidadConvenio.intentidadconvenio==2}">
                                        <h:inputText  id="txtruta" size="25" maxlength="250" disabled="true" value="#{Supervisor$IngresarNuevaObra.obranueva.ruta.strcodigotramo} #{Supervisor$IngresarNuevaObra.obranueva.ruta.strnombretramo}" >
                                        </h:inputText>
                                        <a4j:commandButton id="btnBuscarRuta" value="#{var.asociar}" action="#{Supervisor$EntidadConvenio.llenarRuta}"  
                                                           render="mp-listado-rutas,tabla-listado-ruta,layoutPrincipalTab,gpTotalRuta" immediate="true"
                                                           oncomplete="#{rich:component('mp-listado-rutas')}.show();"                                                           
                                                           >
                                        </a4j:commandButton>
                                        <a4j:commandButton id="btndesasociarrRuta" value="#{var.desasociar}" action="#{Supervisor$IngresarNuevaObra.desasociarRuta}" render="pginvias,layoutPrincipalTab,mp-proyectosPadres" rendered="#{Supervisor$IngresarNuevaObra.obranueva.ruta!=null}">
                                        </a4j:commandButton>
                                    </h:panelGroup>
                                    <h:outputLabel  class="ikont-hol-sede"   id="lbsede"  value="#{var.seleccionar} Sede:" rendered="#{Supervisor$EntidadConvenio.intentidadconvenio==1}"/>
                                    <h:panelGroup id="gpEducacion" rendered="#{Supervisor$EntidadConvenio.intentidadconvenio==1}">

                                        <h:inputText  id="txtsede" size="25" maxlength="250" disabled="true" value="#{Supervisor$IngresarNuevaObra.obranueva.sedeeducativa.strnombre}">
                                        </h:inputText>

                                        <h:panelGroup>
                                            <a4j:commandButton id="btnBus" value="#{var.buscar} Sede Educativa" action="#{Supervisor$EntidadConvenio.llenarlistaSedes}"
                                                               render="mp-listado-sedeseducativas,tablasedeseducativas" immediate="true"
                                                               oncomplete="#{rich:component('mp-listado-sedeseducativas')}.show();">
                                                <a4j:ajax event="complete"   oncomplete="#{rich:component(mp-listado-sedeseducativa)}.show();" render="tablasedeseducativas"/>
                                            </a4j:commandButton>
                                            <a4j:commandButton id="btndesasociarrSede" value="Desasociar" action="#{Supervisor$IngresarNuevaObra.desasociarSede}" render="gpEducacion,layoutPrincipalTab,mp-proyectosPadres"
                                                               rendered="#{Supervisor$IngresarNuevaObra.obranueva.sedeeducativa!=null}" >
                                            </a4j:commandButton>
                                        </h:panelGroup>
                                    </h:panelGroup>

                                </h:panelGrid>
                                <h:panelGrid columns="1">
                                    <h:outputLabel  class="ikont-hol-objetoObra"   id="lblObjetoObra"  value="#{var.objetodeobra}" />
                                    <h:inputTextarea cols="80" id="txtObjetoObra" rows="4" value="#{Supervisor$IngresarNuevaObra.obranueva.strobjetoobra}" disabled="#{Supervisor$IngresarNuevaObra.objeto}"/>
                                    <h:outputLabel  class="ikont-hol-logroObra"   id="lblLogroObra"  value="#{var.logroProyecto}" />
                                    <h:inputTextarea cols="80" id="txtLogroProyecto" rows="4" value="#{Supervisor$IngresarNuevaObra.obranueva.strlogros}"/>
                                    <h:outputLabel  class="ikont-hol-obseroObra"   id="lblObseroObra"  value="#{var.observacionesProyecto}" />
                                    <h:inputTextarea cols="80" id="txtObserProyecto" rows="4" value="#{Supervisor$IngresarNuevaObra.obranueva.strconclucompro}"/>
                                </h:panelGrid>

                                <h:panelGrid id="valores" columns="3" >

                                    <h:outputText  class="ikont-hot-numbeneficiarios"   value="#{var.numbeneficiarios}:" rendered="#{Supervisor$EntidadConvenio.intentidadconvenio!=1 and Supervisor$IngresarNuevaObra.obranueva.tipoobra.inttipoobra!=59}"  />
                                    <h:outputText  class="ikont-hot-poblacionestudiantil"   value="#{var.poblacionestudiantil}:" rendered="#{Supervisor$EntidadConvenio.intentidadconvenio==1 and Supervisor$IngresarNuevaObra.obranueva.tipoobra.inttipoobra!=59}" />
                                    <h:outputText  class="ikont-hot-otrosactores"   value="#{var.otrosactores}" rendered="#{Supervisor$IngresarNuevaObra.obranueva.tipoobra.inttipoobra==59}" />
                                    <rich:inputNumberSpinner id="numBeneficiarios" value="#{Supervisor$IngresarNuevaObra.obranueva.numhabbeneficiados}" minValue="0" maxValue="50000000" inputSize="20" />
                                    <rich:tooltip value="#{var.numbeneficiarios}" followMouse="true" direction="topRight" horizontalOffset="5"
                                                  verticalOffset="5" layout="block"/>

                                    <h:outputText  class="ikont-hot-numempleosdirectos"   value="#{var.numempleosdirectos}:" rendered="#{Supervisor$IngresarNuevaObra.obranueva.tipoobra.inttipoobra!=59}"/>
                                    <h:outputText  class="ikont-hot-institucionesfortalecidas"   value="#{var.institucionesfortalecidas}:" rendered="#{Supervisor$IngresarNuevaObra.obranueva.tipoobra.inttipoobra==59}"/>
                                    <rich:inputNumberSpinner id="numEmpleosDirectos" value="#{Supervisor$IngresarNuevaObra.obranueva.numempdirectos}" minValue="0" maxValue="50000000" inputSize="20" />
                                    <rich:tooltip value="#{var.numempleosdirectos}"  followMouse="true" direction="topRight" horizontalOffset="5"
                                                  verticalOffset="5" layout="block" rendered="#{Supervisor$IngresarNuevaObra.obranueva.tipoobra.inttipoobra!=59}"/>
                                    <rich:tooltip value="#{var.institucionesfortalecidas}" followMouse="true" direction="topRight" horizontalOffset="5"
                                                  verticalOffset="5" layout="block" rendered="#{Supervisor$IngresarNuevaObra.obranueva.tipoobra.inttipoobra==59}"/>

                                    <h:outputText  class="ikont-hot-numempleosindirectos"   value="#{var.numempleosindirectos}:" rendered="#{Supervisor$IngresarNuevaObra.obranueva.tipoobra.inttipoobra!=59}"/>
                                    <h:outputText  class="ikont-hot-organizacionesfortalecidas"   value="#{var.organizacionesfortalecidas}:" rendered="#{Supervisor$IngresarNuevaObra.obranueva.tipoobra.inttipoobra==59}"/>
                                    <rich:inputNumberSpinner id="numEmpleosIndirectos" value="#{Supervisor$IngresarNuevaObra.obranueva.numempindirectos}" minValue="0" 
                                                             maxValue="50000000" inputSize="20" />

                                    <rich:tooltip value="#{var.numempleosindirectos}" followMouse="true" direction="topRight" horizontalOffset="5"
                                                  verticalOffset="5" layout="block" rendered="#{Supervisor$IngresarNuevaObra.obranueva.tipoobra.inttipoobra!=59}"/>
                                    <rich:tooltip value="#{var.organizacionesfortalecidas}" followMouse="true" direction="topRight" horizontalOffset="5"
                                                  verticalOffset="5" layout="block" rendered="#{Supervisor$IngresarNuevaObra.obranueva.tipoobra.inttipoobra==59}"/>                                        


                                </h:panelGrid>
                                <h:panelGrid id="valores2" columns="2" rendered="#{Supervisor$IngresarNuevaObra.obranueva.contrato!=null and var.vervlrsdeclaradosentipifiobra}">
                                    <h:outputLabel  class="ikont-hol-numvaldeclarado"   id="lblnumvaldeclarado"  value="#{var.numvaldeclarado}" >
                                    </h:outputLabel>
                                    <h:inputText value="#{Supervisor$IngresarNuevaObra.obranueva.numvaldeclarado}"
                                                 size="20"  maxlength="20"
                                                 onkeypress="return validar(event);">
                                        <f:convertNumber maxFractionDigits="2" minFractionDigits="2" type="number"  />

                                    </h:inputText>



                                    <h:outputLabel  class="ikont-hol-numvalavanfisicodeclarado"   id="lblnumvalavanfisicodeclarado"  value="#{var.numvalavanfisicodeclarado}" >
                                    </h:outputLabel>
                                    <h:panelGrid columns="2">
                                        %
                                        <h:inputText value="#{Supervisor$IngresarNuevaObra.obranueva.numvalavanfisicodeclarado}"
                                                     size="20"  maxlength="20">                                             
                                            <f:convertNumber maxFractionDigits="2" minFractionDigits="2" type="number" />
                                        </h:inputText>
                                    </h:panelGrid>


                                    <h:outputLabel  class="ikont-hol-numvalavanfinancierodeclarado"   id="lblnumvalavanfinancierodeclarado"  value="#{var.numvalavanfinancierodeclarado}" >
                                    </h:outputLabel>
                                    <h:inputText value="#{Supervisor$IngresarNuevaObra.obranueva.numvalavanfinanciaerodeclarado}"
                                                 size="20"  maxlength="20"
                                                 onkeypress="return validar(event);" >
                                        <f:convertNumber maxFractionDigits="2" minFractionDigits="2" type="number"  />
                                    </h:inputText>

                                    <h:outputLabel  class="ikont-hol-numvalprogramadoejecicion"   id="lblnumvalprogramadoejecicion"   value="#{var.numvalprogejecucion}" >
                                    </h:outputLabel>
                                    <h:inputText value="#{Supervisor$IngresarNuevaObra.obranueva.numvalprogramejec}"
                                                 size="20"  maxlength="20"
                                                 onkeypress="return validar(event);" >
                                        <f:convertNumber maxFractionDigits="2" minFractionDigits="2" type="number"  />
                                    </h:inputText>
                                </h:panelGrid>
                                <h:panelGrid id="valores3" columns="2" rendered="#{Supervisor$IngresarNuevaObra.obranueva.contrato!=null}">
                                    <h:outputLabel  class="ikont-hol-sector"   value="Sector:"/>
                                    <h:outputText  class="ikont-hot-nombresector "   value="#{Supervisor$IngresarNuevaObra.obranueva.contrato.tercero.sector.strnombre}"/>

                                    <h:outputLabel  class="ikont-hol-numconvenio"   value="Número de Convenio:"/>
                                    <h:outputText  class="ikont-hot-strnumcontrato"   value="#{Supervisor$IngresarNuevaObra.obranueva.contrato.strnumcontrato}"/>

                                    <h:outputLabel  class="ikont-hol-contratista"   value="Contratista:"/>
                                    <h:outputText  class="ikont-hot-strcontratista"   value="#{Supervisor$IngresarNuevaObra.obranueva.contrato.contratista.strnombre}"/>
                                </h:panelGrid>


                            </rich:collapsiblePanel>
                            <interkont:spacer height="10px" />
                            <h:panelGroup >
                                <h:commandButton id="btVolverTipif"  value="#{var.volver}"
                                                 action="#{Supervisor$IngresarNuevaObra.volverTipificacion}" />

                                <h:commandButton value="#{var.continuar}"  action="#{Supervisor$IngresarNuevaObra.validabasicos}" />
                                <h:commandButton id="btCancelarNuevaObra"  value="#{var.cancelar}" immediate="true"
                                                 action="#{Supervisor$IngresarNuevaObra.cancelar_action}" >
                                </h:commandButton>
                                <a4j:outputPanel id="panelErrorDB">
                                    <rich:messages id="messagesDB" globalOnly="true"
                                                   class="ikont-rm-messagesdb"   ajaxRendered="true"
                                                   >
                                        <f:facet name="infoMarker">
                                            <h:graphicImage  class="ikont-hgi-infoMarker"   height="20px" width="20px" url="/resources/imgs/msginfo.png" />
                                        </f:facet>
                                        <f:facet name="warnMarker">
                                            <h:graphicImage  class="ikont-hgi-warnMarker"   height="10px" width="20px" url="/resources/imgs/msgwarn.png" />
                                        </f:facet>
                                        <f:facet name="errorMarker">
                                            <h:graphicImage  class="ikont-hgi-errorMarker"   height="20px" width="20px" url="/resources/imgs/msgerror.png" />
                                        </f:facet>
                                        <f:facet name="fatalMarker">
                                            <h:graphicImage  class="ikont-hgi-fatalMarker"    height="20px" width="20px" url="/resources/imgs/msgerror.png" />
                                        </f:facet>
                                    </rich:messages>

                                </a4j:outputPanel>
                            </h:panelGroup>

                        </rich:panel>
                    </h:form>
                </td>

            </tr>
        </table>

        <ui:include src="/modal/listadoRuta.xhtml"/>
        <ui:include src="/modal/modallistadosedes.xhtml"/>
    </ui:define>

</ui:composition>

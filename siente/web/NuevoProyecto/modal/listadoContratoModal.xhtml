<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
        xmlns:a4j="http://richfaces.org/a4j" xmlns:interkont="http://www.interkont.com/jsf"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:rich="http://richfaces.org/rich"
        xmlns:ui="http://java.sun.com/jsf/facelets">


    <rich:popupPanel id="mp-listado-contratos" moveable="true"   headerClass="rich-panel-header" autosized="true">
        <f:facet name="header" >
            <h:panelGroup >
                <h:outputText  styleClass="ikont-hot-listarcontratos"   value="#{var.listarcontratos}" />
            </h:panelGroup>
        </f:facet>
        <f:facet name="controls">
            <h:form>
                <h:panelGroup>
                    <a4j:commandLink id="esconder-mp-listado-contratos" immediate="true"
                                       styleClass="ikont-hcl-listadocontratos"    onclick="#{rich:component('mp-listado-contratos')}.hide(); return false;"/>
                </h:panelGroup>
            </h:form>
        </f:facet>
        <center>
                <h:panelGroup id="gpTotalCont">
                    <h:panelGrid columns="2" >
                        <h:outputText  styleClass="ikont-hot-buscar"   value="#{var.buscar} " />
                        <h:panelGroup>
                            <h:inputText value="#{Supervisor$IngresarNuevaObra.filtrocontrato.palabraClave}" size="20"/>
                            <a4j:commandButton value="#{var.buscar}" action="#{Supervisor$IngresarNuevaObra.buscarContrato}" render="tablacontratos,gpTotalCont"/>

                        </h:panelGroup>
                        
                    </h:panelGrid>

                    <rich:panel >
                        <h:panelGrid >
                            <h:outputText  styleClass="ikont-hot-dilienidad"   value="Debe diligenciar el campo Entidad Contratante"  rendered="#{Supervisor$IngresarNuevaObra.obranueva.tercero.intcodigo==0}"/>
                            <interkont:spacer height="5" />

                            <rich:dataTable id="tablacontratos" rendered="#{Supervisor$IngresarNuevaObra.obranueva.tercero.intcodigo!=0}"
                                            rows="5"
                                            var="currentRow"
                                            rowKeyVar="filaSeleccionada"
                                            onrowmouseover="this.style.backgroundColor='#B4DDEC'"
                                            sortMode="single"
                                            value="#{Supervisor$IngresarNuevaObra.listacontratos}"
                                            >
                                <f:facet name="header">
                                    <rich:columnGroup>
                                        <rich:column colspan="7">
                                            <h:outputText  styleClass="ikont-hot-contratos"   value="#{var.contratos} #{Supervisor$IngresarNuevaObra.totalfilas} #{var.paginaCiu} #{Supervisor$IngresarNuevaObra.pagina}#{var.deCiu}#{Supervisor$IngresarNuevaObra.totalpaginas}" />
                                        </rich:column>
                                        <rich:column  breakRowBefore="true">
                                            <h:outputText  styleClass="ikont-hot-numerocontrato"   value="#{var.numerocontrato}"/>
                                        </rich:column>
                                        <rich:column >
                                            <h:outputText  styleClass="ikont-hot-nombre"   value="#{var.nombre}"/>
                                        </rich:column>
                                        <rich:column >
                                            <h:outputText  styleClass="ikont-hot-valorContrato"   value="Valor Contrato"/>
                                        </rich:column>
                                        <rich:column >
                                            <h:outputText  styleClass="ikont-hot-valordisponible"   value="Valor Disponible"/>
                                        </rich:column>
                                        <rich:column >
                                            <h:outputText  styleClass="ikont-hot-datefechaini"   value="#{var.datefechaini}"/>
                                        </rich:column>
                                        <rich:column >
                                            <h:outputText  styleClass="ikont-hot-datefechafin"   value="#{var.datefechafin}"/>
                                        </rich:column>
                                        <rich:column >
                                            <h:outputText  styleClass="ikont-hot-seleccionar"   value="#{var.seleccionar}"/>
                                        </rich:column>
                                    </rich:columnGroup>
                                </f:facet>
                                <rich:columnGroup id="cuerpoContrato">
                                    <rich:column  breakRowBefore="true">
                                        <h:outputText  styleClass="ikont-hot-txt_contrato"   id="txt_contrato" value="#{currentRow.strnumcontrato}"/>
                                    </rich:column>
                                    <rich:column >
                                        <h:inputTextarea id="otxt_strnombreobra-listado" value="#{currentRow.strnombre}"  disabled="true" cols="35" rows="2"/>
                                    </rich:column>
                                    <rich:column>
                                        <h:outputText  styleClass="ikont-hot-outvlcontrato"   id="outvlcontrato" value="#{currentRow.numvlrcontrato}" >
                                            <f:convertNumber pattern="$#,###.00"/>
                                        </h:outputText>
                                    </rich:column>
                                    <rich:column>
                                        <h:outputText  styleClass="ikont-hot-vlcondis "   id="vlcondis" value="#{currentRow.numvlrcontrato-currentRow.numvlrsumahijos-currentRow.numvlrsumaproyectos}" >
                                            <f:convertNumber pattern="$#,###.00"/>
                                        </h:outputText>
                                    </rich:column>
                                    <rich:column>
                                        <h:outputText  styleClass="ikont-hot-datefechaini1"    value="#{currentRow.datefechaini}"/>
                                    </rich:column>
                                    <rich:column>
                                        <h:outputText  styleClass="ikont-hot-datefechafin1 "    value="#{currentRow.datefechafin}"/>
                                    </rich:column>
                                    <rich:column  >
                                        <a4j:commandButton value="Seleccionar" action="#{Supervisor$IngresarNuevaObra.agregarContrato(filaSeleccionada)}"                                                           
                                                           oncomplete="#{rich:component('panelRelacionContrato')}.show();" render="layoutpanelRelacionContrato"
                                                           execute="@this" immediate="true">
                                    </a4j:commandButton>
                                    </rich:column>
                                </rich:columnGroup>
                                <f:facet name="footer">
                                    <rich:columnGroup>
                                        <rich:column colspan="8" breakRowBefore="true" >
                                            <center>
                                                <h:panelGrid columns="4">
                                                    <a4j:commandButton id="btPriCont" value="#{var.primeroCiu}" disabled="#{!Supervisor$IngresarNuevaObra.veranteriorcontrato}" action="#{Supervisor$IngresarNuevaObra.primeroContratos}" render="tablacontratos,gpTotalCont">
                                                    </a4j:commandButton>
                                                    <a4j:commandButton id="btAntCont" value="#{var.anteriorCiu}" disabled="#{!Supervisor$IngresarNuevaObra.veranteriorcontrato}" action="#{Supervisor$IngresarNuevaObra.anterioresContratos}" render="tablacontratos,gpTotalCont">
                                                    </a4j:commandButton>
                                                    <a4j:commandButton id="btSigCont" value="#{var.siguienteCiu}" disabled="#{!Supervisor$IngresarNuevaObra.verultimoscontrato}" action="#{Supervisor$IngresarNuevaObra.siguienteContratos}" render="tablacontratos,gpTotalCont">
                                                    </a4j:commandButton>
                                                    <a4j:commandButton id="btUltCont" value="#{var.ultimoCiu}" disabled="#{!Supervisor$IngresarNuevaObra.verultimoscontrato}" action="#{Supervisor$IngresarNuevaObra.ultimoContratos}" render="tablacontratos,gpTotalCont">
                                                    </a4j:commandButton>
                                                </h:panelGrid>
                                            </center>
                                        </rich:column>
                                    </rich:columnGroup>
                                </f:facet>
                            </rich:dataTable>
                        </h:panelGrid>
                    </rich:panel>
                </h:panelGroup>
        </center>
    </rich:popupPanel>
</ui:composition>
<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:a4j="http://richfaces.org/a4j" xmlns:interkont="http://www.interkont.com/jsf"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:rich="http://richfaces.org/rich"
                xmlns:ui="http://java.sun.com/jsf/facelets" template="/facelets/template_proyecto.xhtml">


    <ui:define name="head">
        <title>Nuevo #{var.proyecto} - Supervisor"</title>
        <h:outputScript library="js" name="/resources/script_supervisor.js"/>
    </ui:define>
    <ui:define name="title">
        <h:outputText  class="id-jsf- "   value="#{var.ingresarnuevoproyecto} - #{var.veravanceyfinalizar}"/>
    </ui:define>
    <ui:define name="menu">
        <ui:include src="/facelets/menu_gestion.xhtml"/>
    </ui:define>

    <ui:define name="body">

        <table   align="center" border="0" cellspacing="8" cellpadding="0">
            <tr>
                <h:form>
                    <td rowspan="6" valign="top" >
                        <ui:include src="/facelets/menu_lateral_gestion.xhtml"/>
                        <ui:include src="/facelets/menu_lateral_proyecto.xhtml"/>
                    </td>
                </h:form>
                <td valign="top" height="35" >
                    <h:form id="formFinProy">

                        <rich:panel  id="panelFinproy" >
                            <f:facet name="header" >
                                <h:panelGroup >
                                    <h:outputText  class="id-jsf- "   value="#{var.veravanceyfinalizar}" class="id-jsf-"   />
                                </h:panelGroup>
                            </f:facet>
                            <center>
                                <rich:collapsiblePanel  header="#{var.titulofinalizarproyecto}" switchType="client" >

                                    <h:panelGrid id="panelFinalizar" >
                                        <h:outputText  class="id-jsf- "   value="#{var.titulofinalizarproyecto}"/>
                                        <h:panelGrid columns="2" >
                                            <h:outputText  class="id-jsf- "   value="#{var.tipificaciondelproyecto}"/>
                                            <h:graphicImage  url="/resources/imgs/msgerror.png" rendered="#{!Supervisor$IngresarNuevaObra.validacion.tipificacion}"/>
                                            <h:graphicImage  url="/resources/imgs/bt_ok.png" rendered="#{Supervisor$IngresarNuevaObra.validacion.tipificacion}"/>

                                            <h:outputText  class="id-jsf- "   value="#{var.datosbasicos}"/>
                                            <h:graphicImage  url="/resources/imgs/msgerror.png" rendered="#{!Supervisor$IngresarNuevaObra.validacion.datosbasicos}"/>
                                            <h:graphicImage  url="/resources/imgs/bt_ok.png" rendered="#{Supervisor$IngresarNuevaObra.validacion.datosbasicos}"/>

                                            <h:outputText  class="id-jsf- "   value="#{var.ubicaciondelproyecto}"/>
                                            <h:graphicImage  url="/resources/imgs/msgerror.png" rendered="#{!Supervisor$IngresarNuevaObra.validacion.ubicacion}"/>
                                            <h:graphicImage  url="/resources/imgs/bt_ok.png" rendered="#{Supervisor$IngresarNuevaObra.validacion.ubicacion}"/>

                                            <h:outputText  class="id-jsf- "   value="#{var.cronogramavalidacion}"/>
                                            <h:graphicImage  url="/resources/imgs/msgerror.png" rendered="#{!Supervisor$IngresarNuevaObra.validacion.cronograma}"/>
                                            <h:graphicImage  url="/resources/imgs/bt_ok.png" rendered="#{Supervisor$IngresarNuevaObra.validacion.cronograma}"/>

                                            <h:outputText  class="id-jsf- "   value="#{var.totalobra}"/>
                                            <h:graphicImage  url="/resources/imgs/msgerror.png" rendered="#{!Supervisor$IngresarNuevaObra.validacion.presupuesto}"/>
                                            <h:graphicImage  url="/resources/imgs/bt_ok.png" rendered="#{Supervisor$IngresarNuevaObra.validacion.presupuesto}"/>

                                            <h:outputText  class="id-jsf- "   value="#{var.imagenesproyecto}"/>
                                            <h:graphicImage  url="/resources/imgs/msgerror.png" rendered="#{!Supervisor$IngresarNuevaObra.validacion.imagenes}"/>
                                            <h:graphicImage  url="/resources/imgs/bt_ok.png" rendered="#{Supervisor$IngresarNuevaObra.validacion.imagenes}"/>

                                            <h:outputText  class="id-jsf- "   value="#{var.informacioncontractual}"/>
                                            <h:graphicImage  url="/resources/imgs/msgerror.png" rendered="#{!Supervisor$IngresarNuevaObra.validacion.contratos}"/>
                                            <h:graphicImage  url="/resources/imgs/bt_ok.png" rendered="#{Supervisor$IngresarNuevaObra.validacion.contratos}"/>

                                        </h:panelGrid>
                                    </h:panelGrid>
                                    <h:panelGrid >
                                        <h:panelGroup rendered="#{Supervisor$IngresarNuevaObra.estadoguardado==0}">
                                            <h:graphicImage  url="/resources/imgs/msgerror.png" rendered="#{!Supervisor$IngresarNuevaObra.validacion.total}"/>
                                            <h:outputText  class="id-jsf- "   value="#{var.completarinformacionproyecto}" rendered="#{!Supervisor$IngresarNuevaObra.validacion.total}"/>


                                        </h:panelGroup>
                                        <h:panelGroup class="id-jsf-"  >
                                            <a4j:commandButton id="btVolveragenerarFin"  value="#{var.volver}" immediate="true"
                                                               action="datosAsociarContrato" />
                                            <h:commandButton id="btCancelarNuevaObraFin"  value="#{var.cancelar}"
                                                             action="#{Supervisor$IngresarNuevaObra.cancelar_action}" >
                                            </h:commandButton>
                                            <a4j:commandButton id="Finalizar" value="#{var.finalizar}"
                                                               render="layoutGuardar, panelFinproy"
                                                               rendered="#{Supervisor$IngresarNuevaObra.estadoguardado==0 and Supervisor$IngresarNuevaObra.validacion.total}"
                                                               action="#{Supervisor$IngresarNuevaObra.finalizar_action}" execute="@this" immediate="true"
                                                               oncomplete="#{rich:component('panelConfirmaGuardar')}.show();">
                                                <a4j:param value="1" assignTo="#{HomeGestion.filtro.intvista}"/>
                                            </a4j:commandButton>

                                            <h:panelGroup rendered="#{Supervisor$IngresarNuevaObra.estadoguardado==1}">

                                                <!-- <h:outputText  class="id-jsf- "   value="#{var.laobra}"  />-->
                                                <!-- <h:outputText  class="id-jsf- "   value="#{Supervisor$IngresarNuevaObra.obranueva.strnombreobra}"  />-->
                                                <!-- <h:outputText  class="id-jsf- "   value="#{var.hasidoanadidaconexito}"  />-->
                                                <h:commandButton id="BTaceptarDoc" value="#{var.aceptar}" rendered="#{Supervisor$IngresarNuevaObra.estadoguardado==1}"
                                                                 action="#{Supervisor$IngresarNuevaObra.cancelar_action}"   >

                                                </h:commandButton>



                                            </h:panelGroup>
                                        </h:panelGroup>
                                    </h:panelGrid>
                                    <a4j:outputPanel id="panelErrorFin">
                                        <rich:messages id="messagesFin" globalOnly="true"
                                                       class="id-jsf-"   ajaxRendered="true"
                                                       >
                                            <f:facet name="infoMarker">
                                                <h:graphicImage  url="/resources/imgs/msginfo.png" />
                                            </f:facet>
                                            <f:facet name="warnMarker">
                                                <h:graphicImage height="10px" width="20px" url="/resources/imgs/msgwarn.png" />
                                            </f:facet>
                                            <f:facet name="errorMarker">
                                                <h:graphicImage  url="/resources/imgs/msgerror.png" />
                                            </f:facet>
                                            <f:facet name="fatalMarker">
                                                <h:graphicImage   url="/resources/imgs/msgerror.png" />
                                            </f:facet>
                                        </rich:messages>

                                    </a4j:outputPanel>
                                </rich:collapsiblePanel>
                            </center>
                        </rich:panel>
                    </h:form>           
                </td>
            </tr>
        </table>              

        <ui:include src="../NuevoProyecto/modal/panelConfirmaGuardar.xhtml"/>
    </ui:define>
</ui:composition>
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition  
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:a4j="http://richfaces.org/a4j" 
    xmlns:interkont="http://www.interkont.com/jsf"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:fn="http://java.sun.com/jsp/jstl/functions"
    xmlns:m="http://code.google.com/p/gmaps4jsf/"  
    template="/facelets/template_main.xhtml">

    <ui:define name="head">
        <script language="JavaScript">

            function maximaLongitud(texto, maxlong)
            {
                var out_value;

                if (texto.value.length > maxlong)
                {
                    in_value = texto.value;
                    out_value = in_value.substring(0, maxlong);
                    texto.value = out_value;
                    return false;
                }
                return true;
            }

        </script>
    </ui:define>
    <ui:define name="menu">
        <ui:include src="/facelets/menu_gestion.xhtml"/>
    </ui:define>
    <ui:define name="menu_lateral">
        <h:panelGroup  rendered="#{!var.permisonuevodiseno}">
            <ui:include src="/facelets/menu_lateral_gestion.xhtml"/>
            <ui:include src="/facelets/menu_lateral_novedades.xhtml"/>
        </h:panelGroup>
        <h:panelGroup rendered="#{var.permisonuevodiseno}">
            <ui:include src="/facelets/menu_lateral_novedades_zoom.xhtml"/>
        </h:panelGroup>
    </ui:define>
    <ui:define name="menusuperior">
        <h:panelGroup rendered="#{SessionBeanCobra.cobraService.ciu and !var.permisonuevodiseno}">
            <ui:include src="/facelets/menu_superior_detalle_ciudadano.xhtml"/>
        </h:panelGroup>
                <h:panelGroup rendered="#{SessionBeanCobra.cobraService.ciu and var.permisonuevodiseno}">
            <ui:include rendered="#{var.permisonuevodiseno}" src="/facelets/menu_superior_administrar_proyecto.xhtml" />
        </h:panelGroup>
    </ui:define>
    <ui:define name="body">
        <h:panelGrid columns="1"  id="pgPrincipalComentario" columnClasses="panelcenter,panelcenter,panelcenter" >
            <h:panelGrid columns="2" rendered="#{!var.permisonuevodiseno}" >
                <h:panelGrid>
                    <h:outputText  styleClass="ikont-hot-strnombrecompleto"   value="#{SessionBeanCobra.usuarioObra.tercero.strnombrecompleto}"/>
                    <h:outputText  styleClass="ikont-hot-municipiodepartamento"   value="#{SessionBeanCobra.ciudadanoservice.municipio} #{SessionBeanCobra.ciudadanoservice.departamento}" />
                </h:panelGrid>
                <h:graphicImage  styleClass="ikont-hgi-strfoto"  url="#{SessionBeanCobra.usuarioObra.tercero.strfoto}"  />
            </h:panelGrid>
            <h:panelGroup layout="block" styleClass="ikont-div-headercontent-participacion">
                <h:outputText  styleClass="ikont-hot-participacion"   value="#{var.participacion}" />
            </h:panelGroup>
            <h:panelGroup layout="block" styleClass="ikont-ppg-separator">
                <hr class="ikont-hot-contentseparator"></hr>
            </h:panelGroup>
            <h:panelGrid columns="1" styleClass="panelcenter" cellpadding="0" cellspacing="0">
                <h:form>
                    <h:panelGrid columns="4" id="paneltipoopinion"  columnClasses="panelcenter" cellpadding="0" cellspacing="0">
                        <h:panelGrid  styleClass="ikont-"  columnClasses="panelcenter,panelcenter,panelcenter,panelcenter"  >
                            <a4j:commandLink styleClass="ikont-hcl-llenarlistaFelicitacion" action="#{Ciudadano$PerfilCiudadano.llenarlistaFelicitacion}"  oncomplete="#{rich:component('participacionciudadanomodal')}.show();
                                             return false;" render="participacionciudadanomodal"/>
                            <h:outputText  styleClass="ikont-hot-value-participacion"   value="#{Ciudadano$PerfilCiudadano.felicitar}"/>
                            <h:outputText  styleClass="ikont-hot-text-participacion"     value="#{var.felicitacion}"/>
                            <a4j:commandLink id="felicitacion" styleClass="ikont-hot-textver-participacion"  action="#{Ciudadano$PerfilCiudadano.llenarlistaFelicitacion}" oncomplete="#{rich:component('participacionciudadanomodal')}.show();
                                             return false;" value="#{var.ver}"  render="participacionciudadanomodal"/>     
                        </h:panelGrid>
                        <h:panelGrid columns="1" styleClass="ikont-hpg-paneltipoopinion1"   columnClasses="panelcenter,panelcenter,panelcenter,panelcenter" >
                            <a4j:commandLink styleClass="ikont-hcl-llenarlistaOpinion"  action="#{Ciudadano$PerfilCiudadano.llenarlistaOpinion}" oncomplete="#{rich:component('participacionciudadanomodal')}.show();
                                             return false;" render="participacionciudadanomodal"/>
                            <h:outputText  styleClass="ikont-hot-value-participacion"    value="#{Ciudadano$PerfilCiudadano.opinar}"/>
                            <h:outputText  styleClass="ikont-hot-text-participacion"  value="Opiniones"/>
                            <a4j:commandLink id="opinion"  value="#{var.ver}"  render="participacionciudadanomodal" styleClass="ikont-hot-textver-participacion"   action="#{Ciudadano$PerfilCiudadano.llenarlistaOpinion}" oncomplete="#{rich:component('participacionciudadanomodal')}.show();
                                             return false;"/>                        
                        </h:panelGrid>
                        <h:panelGrid columns="1" styleClass="ikont-hpg-paneltipoopinion2"  columnClasses="panelcenter,panelcenter,panelcenter,panelcenter"  >
                            <a4j:commandLink styleClass="ikont-hcl-queja"  action="#{Ciudadano$PerfilCiudadano.llenarlistaQuejas}"  oncomplete="#{rich:component('participacionciudadanomodal')}.show();
                                             return false;" render="participacionciudadanomodal"/>
                            <h:outputText  styleClass="ikont-hot-value-participacion"    value="#{Ciudadano$PerfilCiudadano.quejarse}"/>
                            <h:outputText  styleClass="ikont-hot-text-participacion"   value="#{var.quejas}"/>
                            <a4j:commandLink styleClass="ikont-hot-textver-participacion" id="Queja" value="#{var.ver}"  action="#{Ciudadano$PerfilCiudadano.llenarlistaQuejas}"  oncomplete="#{rich:component('participacionciudadanomodal')}.show();
                                             return false;" render="participacionciudadanomodal"/>
                        </h:panelGrid>
                        <h:panelGrid columns="1" styleClass="ikont-hpg-paneltipoopinion3"   columnClasses="panelcenter,panelcenter,panelcenter,panelcenter" >
                            <a4j:commandLink styleClass="ikont-hcl-llenarlistaTodos"   action="#{Ciudadano$PerfilCiudadano.llenarlistaTodos}"  oncomplete="#{rich:component('participacionciudadanomodal')}.show();
                                             return false;" render="participacionciudadanomodal"/>    
                            <h:outputText  styleClass="ikont-hot-value-participacion"    value="#{Ciudadano$PerfilCiudadano.todos}"/>
                            <h:outputText  styleClass="ikont-hot-text-participacion"  value="#{var.todos}"/>
                            <a4j:commandLink styleClass="ikont-hot-textver-participacion" id="todos" value="#{var.ver}" action="#{Ciudadano$PerfilCiudadano.llenarlistaTodos}"  oncomplete="#{rich:component('participacionciudadanomodal')}.show();
                                             return false;" render="participacionciudadanomodal"/>    
                        </h:panelGrid>
                    </h:panelGrid>
                </h:form>
            </h:panelGrid>
            <h:panelGroup layout="block" styleClass="ikont-ppg-separator">
                <hr class="ikont-hot-contentseparator"></hr>
            </h:panelGroup>
            <h:panelGrid columns="2" rowClasses="rowtop"  >
                <h:form id="frmparticiapcioncomentario">
                    <h:panelGrid columns="2">
                        <h:panelGrid columns="1" styleClass="ikont-table-aling-pasos">
                            <h:outputText  styleClass="ikont-hot-paso-participacion" value="#{var.paso} 1" />
                            <h:outputText  styleClass="ikont-hot-text-paso-participacion" value="#{var.aseguresedeelegir}" />
                        </h:panelGrid>
                        <h:panelGroup id="panelopinion_par" layout="block" styleClass="ikont-hpg-selecione-opinion">
                            <a4j:commandLink  styleClass="ikont-acl-seleccionfelicite" action="#{Ciudadano$PerfilCiudadano.seleccionFelicite}" render="panelopinion_par" rendered="#{SessionBeanCobra.ciudadanoservice.opinionciudadano.tipoopinion.intidtipoopinion != 3}"></a4j:commandLink>
                            <h:commandLink styleClass="ikont-acl-seleccionfelicite seleccionfelicite-buttonactive" rendered="#{SessionBeanCobra.ciudadanoservice.opinionciudadano.tipoopinion.intidtipoopinion == 3}" ></h:commandLink>
                            <a4j:commandLink  styleClass="ikont-acl-seleccionopine"  action="#{Ciudadano$PerfilCiudadano.seleccionopine}" render="panelopinion_par"  rendered="#{SessionBeanCobra.ciudadanoservice.opinionciudadano.tipoopinion.intidtipoopinion != 2}"></a4j:commandLink>
                            <h:commandLink styleClass="ikont-acl-seleccionopine seleccionopine-buttonactive" rendered="#{SessionBeanCobra.ciudadanoservice.opinionciudadano.tipoopinion.intidtipoopinion == 2}"></h:commandLink>
                            <a4j:commandLink  styleClass="ikont-acl-seleccionqueja"  action="#{Ciudadano$PerfilCiudadano.seleccionQueja}" render="panelopinion_par" rendered="#{SessionBeanCobra.ciudadanoservice.opinionciudadano.tipoopinion.intidtipoopinion != 1}"></a4j:commandLink>
                            <h:commandLink styleClass="ikont-acl-seleccionqueja seleccionqueja-buttonactive" rendered="#{SessionBeanCobra.ciudadanoservice.opinionciudadano.tipoopinion.intidtipoopinion == 1}"></h:commandLink>
                        </h:panelGroup>
                        <h:panelGrid columns="1" styleClass="ikont-table-aling-pasos">
                            <h:outputText  styleClass="ikont-hot-paso-participacion" value="#{var.paso} 2" />
                            <h:outputText  styleClass="ikont-hot-text-paso-participacion" value="#{var.ingresesu}. #{var.nota}" />
                        </h:panelGrid>
                        <h:panelGrid columns="2" styleClass="ikont-hpg-selecione-opinion">
                            <h:commandLink  styleClass="ikont-acl-line-coment-ciudadano" ></h:commandLink>
                            <a4j:region id="idregion_par">
                                <h:panelGroup>
                                    <a4j:status id="idstatuscomentario2"/>
                                    <h:outputText  styleClass="ikont-hot-idcontarmensaje2"   id="idcontarmensaje2" value="#{Ciudadano$PerfilCiudadano.contarmensaje}" /><br/>
                                    <h:inputTextarea  id="iacomentario2" styleClass="ikont-hit-iacomentario2"   rows="5" cols="40" onkeydown="return maximaLongitud(this, 400)"  
                                                      value="#{SessionBeanCobra.ciudadanoservice.opinionciudadano.stropinion}"  >
                                        <rich:placeholder value="Escriba Su Comentario..." />
                                        <a4j:ajax listener="#{Ciudadano$PerfilCiudadano.contarcomentario}" event="keyup" render="idcontarmensaje2" status="idstatuscomentario2" />
                                    </h:inputTextarea>
                                </h:panelGroup>
                            </a4j:region>
                        </h:panelGrid>
                        <h:panelGrid columns="1" styleClass="ikont-table-aling-pasos">
                            <h:outputText  styleClass="ikont-hot-paso-participacion" value="#{var.paso} 3" />
                            <h:outputText  styleClass="ikont-hot-text-paso-participacion" value="#{var.contenido}" />
                        </h:panelGrid>
                        <h:panelGroup layout="block">
                            <a4j:commandLink id="btimg"  onclick="#{rich:component('modalImagenCiu')}.show();
                return true;"
                                             styleClass="ikont-acl-seleccionefoto1"   />
                            <a4j:commandLink id="btnacta" onclick="#{rich:component('panelDocCiu')}.show();
                return true;"
                                             styleClass="ikont-acl-seleccionefoto2"  />

                        </h:panelGroup>
                        <h:panelGrid  styleClass="ikont-table-aling-pasos">
                            <h:outputText  styleClass="ikont-hot-paso-participacion" value="#{var.paso} 4" />
                            <h:outputText  styleClass="ikont-hot-text-paso-participacion"     value="#{var.privacidad}" />
                        </h:panelGrid>
                        <h:panelGroup layout="block">
                            <h:commandLink  styleClass="ikont-acl-line-coment-ciudadano" ></h:commandLink>
                            <h:panelGrid columns="2"  styleClass="ikont-hpg-private-coment">
                                <h:outputText  styleClass="ikont-hot-desea"    value="#{var.desea}" />
                                <h:selectOneRadio id="boolcomentario" styleClass="ikont-hot-text-private-coment"  value="#{SessionBeanCobra.ciudadanoservice.opinionciudadano.boolcomentariooculto}"  >
                                    <f:selectItem itemLabel="#{var.publica}" itemValue="false"  />
                                    <f:selectItem itemLabel="#{var.privada}" itemValue="true" />
                                </h:selectOneRadio>
                                <h:outputText  styleClass="ikont-hot-desea"     value="#{var.desea2}" />
                                <h:selectOneRadio id="boolidentidad" styleClass="ikont-hot-text-private-coment"   value="#{SessionBeanCobra.ciudadanoservice.opinionciudadano.boolidentidadoculta}"  >
                                    <f:selectItem itemLabel="#{var.publica}" itemValue="false"  />
                                    <f:selectItem itemLabel="#{var.privada}" itemValue="true" />
                                </h:selectOneRadio>
                            </h:panelGrid>
                        </h:panelGroup>
                        <h:panelGroup layout="block">
                            <a4j:commandButton value="Publicar" styleClass="ikont-acb-publicar-coment"  action="#{Ciudadano$PerfilCiudadano.guardarComentarioOpinion}" render="pgPrincipalComentario, layoutDocCiu, panelImagenCiu">
                            </a4j:commandButton>
                        </h:panelGroup>
                    </h:panelGrid>
                </h:form>
            </h:panelGrid>
        </h:panelGrid>
        <ui:include src="/modal/panelImagenciudadanoModal.xhtml"/>
        <ui:include src="/modal/paneldocumeciudadanoModal.xhtml"/>
        <ui:include src="modalCiudadano/ModalOpinionCiudadanoZoom.xhtml"/>

    </ui:define>

</ui:composition>
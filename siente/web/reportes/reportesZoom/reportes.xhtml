<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="/facelets/template_main.xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:a4j="http://richfaces.org/a4j"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:rich="http://richfaces.org/rich">

    <ui:define name="head">
        <title>Reportes</title>
    </ui:define>

    <ui:define name="menu">
        <h:panelGroup rendered="#{!var.permisonuevodiseno}">
            <ui:include src="/facelets/menu_gestion.xhtml" />
        </h:panelGroup>  
        <h:panelGroup rendered="#{var.permisonuevodiseno}">
            <ui:include src="/facelets/menu_gestion_zoom.xhtml" />
        </h:panelGroup>  
    </ui:define>

    <ui:define name="menu_lateral">
        <h:panelGroup  rendered="#{!var.permisonuevodiseno}">
            <ui:include src="/facelets/menu_lateral_gestion.xhtml" />
            <ui:include src="/facelets/menu_lateral_novedades.xhtml" />
        </h:panelGroup>
        <h:panelGroup rendered="#{var.permisonuevodiseno}">
            <ui:include src="/facelets/menu_lateral_novedades_zoom.xhtml"/>
        </h:panelGroup>
    </ui:define>

    <ui:define name="body">

        <script type='text/javascript'>
            function showRegionMetasUnidad(radio)
            {

                if (radio.value == 'Unidad') {

                    document.getElementById('formRepBody:formRepMetas:selUnidad').style.display = '';
                    document.getElementById('formRepBody:formRepMetas:selEstConvenio').style.display = '';
                    document.getElementById('formRepBody:formRepMetas:outEstConvenio').style.display = '';
                    document.getElementById('formRepBody:formRepMetas:btnUnidad').style.display = '';

                    document.getElementById('formRepBody:formRepMetas:outNumConvenio').style.display = 'none';
                    document.getElementById('formRepBody:formRepMetas:inNumConvenio').style.display = 'none';
                    document.getElementById('formRepBody:formRepMetas:btnConvenio').style.display = 'none';


                } else {
                    document.getElementById('formRepBody:formRepMetas:selUnidad').style.display = 'none';
                    document.getElementById('formRepBody:formRepMetas:selEstConvenio').style.display = 'none';
                    document.getElementById('formRepBody:formRepMetas:outEstConvenio').style.display = 'none';
                    document.getElementById('formRepBody:formRepMetas:btnUnidad').style.display = 'none';

                    document.getElementById('formRepBody:formRepMetas:outNumConvenio').style.display = '';
                    document.getElementById('formRepBody:formRepMetas:inNumConvenio').style.display = '';
                    document.getElementById('formRepBody:formRepMetas:btnConvenio').style.display = '';
                }

            }
            function showRegionAudiUnidad(radio)
            {

                if (radio.value == 'Unidad') {

                    document.getElementById('formRepBody:formRepAuditoria:btnUnidadA').style.display = '';

                    document.getElementById('formRepBody:formRepAuditoria:outNumConvenioA').style.display = 'none';
                    document.getElementById('formRepBody:formRepAuditoria:inNumConvenioA').style.display = 'none';
                    document.getElementById('formRepBody:formRepAuditoria:btnConvenioA').style.display = 'none';


                } else {
                    document.getElementById('formRepBody:formRepAuditoria:btnUnidadA').style.display = 'none';

                    document.getElementById('formRepBody:formRepAuditoria:outNumConvenioA').style.display = '';
                    document.getElementById('formRepBody:formRepAuditoria:inNumConvenioA').style.display = '';
                    document.getElementById('formRepBody:formRepAuditoria:btnConvenioA').style.display = '';
                }

            }
        </script>

        <h:form id="formRepBody">

            <div class="titulos">

                <div class="titulo"><h1 class="titulo_r">#{var.reportes}</h1></div>
                <div class="subtitulo"><p class="subtitulo_t">#{var.reporteSubTile}</p></div>

            </div>

            <h:panelGrid columns="5" width="100%" class="cont_top">
                <h:panelGroup>
                    <h:panelGrid columns="1" class="bl1">
                        <div class="icon_bl1"></div>
                        <div class="bl1_texto_div"><p class="bl1_texto">#{var.reporteGeo}</p>
                        </div>
                        <a4j:commandButton styleClass="bl1_texto" style="margin-left: 46px;" id="btnRepGlobal" value="Generar"
                                           render="gpPopUpGbal" execute="gpPopUpGbal" immediate="true"
                                           oncomplete="#{rich:component('popUprepGeo')}.show();"/>
                    </h:panelGrid>
                </h:panelGroup>
                <h:panelGroup>
                    <h:panelGrid columns="1" class="bl2">
                        <div class="icon_bl2"></div>
                        <div class="bl1_texto_div"><p class="bl1_texto">#{var.reporteImpl}</p></div>
                        <a4j:commandButton styleClass="bl1_texto" style="margin-left: 46px;" id="btnRepImpl" value="Generar"
                                           render="gpPopUpImpl" execute="gpPopUpImpl" immediate="true"
                                           oncomplete="#{rich:component('popUprepImpl')}.show();"/>
                    </h:panelGrid>
                </h:panelGroup>
                <h:panelGroup>
                    <h:panelGrid columns="1" class="bl3">
                        <div class="icon_bl3"></div>
                        <div class="bl1_texto_div"><p class="bl1_texto">#{var.reporteMetas}</p></div>
                        <a4j:commandButton styleClass="bl1_texto" style="margin-left: 46px;" id="btnRepMetas" value="Generar"
                                           render="gpPopUpMetas" execute="gpPopUpMetas" immediate="true"
                                           oncomplete="#{rich:component('popUprepMetas')}.show();"/>
                    </h:panelGrid>
                </h:panelGroup>
                <h:panelGroup>
                    <h:panelGrid columns="1" class="bl4">
                        <div class="icon_bl4"></div>
                        <div class="bl1_texto_div"><p class="bl1_texto">#{var.reporteAuditoria}</p></div>
                        <a4j:commandButton styleClass="bl1_texto" style="margin-left: 46px;" id="btnRepAuditoria" value="Generar"
                                           render="gpPopUpAuditoria" execute="gpPopUpAuditoria" immediate="true"
                                           oncomplete="#{rich:component('popUprepAuditoria')}.show();"/>
                    </h:panelGrid>
                </h:panelGroup>
                <h:panelGroup>
                    <h:panelGrid columns="1" class="bl5">
                        <div class="icon_bl5"></div>
                        <div class="bl1_texto_div"><p class="bl1_texto">#{var.reporteCtas}</p></div>
                        <a4j:commandButton styleClass="ikont-label-menu-estr-sub-titulo" style="margin-left: 46px;" id="btnRepCtas" value="Generar"
                                           render="gpPopUpGcial" execute="gpPopUpGcial" immediate="true"
                                           oncomplete="#{rich:component('popUprepCtas')}.show();"/>
                    </h:panelGrid>
                </h:panelGroup>
                <h:panelGroup>
                    <h:panelGrid columns="1" class="bl1">
                        <div class="icon_bl1"></div>
                        <div class="bl1_texto_div"><p class="bl1_texto">#{var.reportesConsGcialConv}</p>
                        </div>
                        <a4j:commandButton styleClass="bl1_texto" style="margin-left: 46px;" id="btnRepConsGcialConv" value="Generar"
                                           render="gpPopUpConsGcialConv" execute="gpPopUpConsGcialConv" immediate="true"
                                           oncomplete="#{rich:component('popUprepConsGcialConv')}.show();"/>
                    </h:panelGrid>
                </h:panelGroup>
                <h:panelGroup>
                    <h:panelGrid columns="1" class="bl1">
                        <div class="icon_bl5"></div>
                        <div class="bl1_texto_div"><p class="bl1_texto">#{var.reporteMonFacEva}</p></div>
                        <a4j:commandButton styleClass="bl1_texto" style="margin-left: 46px;" id="btnRepMonFacEva" value="Generar"
                                           render="gpPopUprepMonEva" execute="gpPopUprepMonEva" immediate="true"
                                           oncomplete="#{rich:component('popUprepMonEva')}.show();"/>
                    </h:panelGrid>
                </h:panelGroup>
            </h:panelGrid>

            <!--PopUP Reporte Consolidación Geo-->
            <rich:popupPanel id="popUprepGeo" autosized="true" moveable="true" headerClass="rich-panel-header">
                <f:facet name="header" >
                    <h:panelGroup >
                        <h:outputText  styleClass="ikont-hot-seleccioncontratista" value="#{var.reporteGeo}"   />
                    </h:panelGroup>
                </f:facet>
                <f:facet name="controls">
                    <h:form>
                        <h:panelGroup>
                            <a4j:commandLink  id="esconder-mp-listado-contratistas" styleClass="ikont-acl-cerrar closemodal"  
                                              title="#{var.cerrar}" immediate="true" onclick="#{rich:component('popUprepGeo')}.hide();
                return false;"/>
                        </h:panelGroup>
                    </h:form>
                </f:facet>

                <h:form id="formRepGeo">
                    <h:panelGroup layout="block" id="gpPopUpGbal">

                        <div class="cont_bottom">
                            <div class="icon_bot"></div>

                            <div class="cont_central">
                                <div class="seleccione">
                                    <p class="select_texto">#{var.reporteDtpo}</p>
                                </div>

                                <div class="dropdown">

                                    <h:selectOneMenu id="listDpto" value="#{Reportes.dptoSelected}" 
                                                     onclick="this.style.width = 'auto;';">
                                        <f:selectItem itemValue="ALL" itemLabel="Todos" />
                                        <f:selectItems value="#{Reportes.sedeptosah}"/>
                                        <a4j:ajax execute="@this" event="change" render="gpPopUpGbal" listener="#{Reportes.llenarMuniciAh}"/>
                                    </h:selectOneMenu>

                                </div>

                                <div class="descargarbtn">
                                    <h:commandLink styleClass="ikont-label-menu-estr-sub-titulo "   immediate="true" value="#{var.descargar}" rendered="#{var.verreportegeneral and SessionBeanCobra.usuarioObra.renderrecurso.btn_visualizar_reporte_global}"
                                                   onclick="window.open(document.location.href = '#{var.ipserver}/ReportesFonade/Servlet_Reportes?identificador_reporte=1&amp;identificador_departamento=#{Reportes.dptoSelected}&amp;usuario=#{SessionBeanCobra.ciudadanoservice.usuariomostrar.usuLogin}', '_blank');"/>
                                </div>
                            </div>
                        </div>

                    </h:panelGroup>
                </h:form>        
            </rich:popupPanel>

            <!-- PopUP Reporte Rendición de Cuentas -->
            <rich:popupPanel id="popUprepCtas" autosized="true" moveable="true" headerClass="rich-panel-header">
                <f:facet name="header" >
                    <h:panelGroup >
                        <h:outputText  styleClass="ikont-hot-seleccioncontratista" value="#{var.reporteCtas}"   />
                    </h:panelGroup>
                </f:facet>
                <f:facet name="controls">
                    <h:form>
                        <h:panelGroup>
                            <a4j:commandLink  id="esconder-mp-listado-contratistas" styleClass="ikont-acl-cerrar closemodal"  
                                              title="#{var.cerrar}" immediate="true" onclick="#{rich:component('popUprepCtas')}.hide();
                                                           return false;"/>
                        </h:panelGroup>
                    </h:form>
                </f:facet>

                <h:form id="formRepCtas">
                    <h:panelGroup layout="block" id="gpPopUpGcial">


                        <div class="cont_bottom">
                            <div class="icon_bot"></div>

                            <div class="cont_central">

                                <div class="descargarbtn">
                                    <h:commandLink styleClass="ikont-label-menu-estr-sub-titulo "   immediate="true" value="#{var.descargar}" rendered="#{var.verreportegeneral and SessionBeanCobra.usuarioObra.renderrecurso.btn_visualizar_reporte_global}"
                                                   onclick="window.open(document.location.href = '#{var.ipserver}/ReportesFonade/Servlet_Reportes?identificador_reporte=2&amp;usuario=#{SessionBeanCobra.ciudadanoservice.usuariomostrar.usuLogin}', '_blank');"/>
                                </div>
                            </div>
                        </div>

                    </h:panelGroup>
                </h:form>        
            </rich:popupPanel>

            <!-- PopUP Reporte Metas y Compromisos-->
            <rich:popupPanel id="popUprepMetas" autosized="true" moveable="true" headerClass="rich-panel-header">
                <f:facet name="header" >
                    <h:panelGroup >
                        <h:outputText  styleClass="ikont-hot-seleccioncontratista" value="#{var.reporteMetas}"   />
                    </h:panelGroup>
                </f:facet>
                <f:facet name="controls">
                    <h:form>
                        <h:panelGroup>
                            <a4j:commandLink  id="esconder-mp-listado-contratistas" styleClass="ikont-acl-cerrar closemodal"  
                                              title="#{var.cerrar}" immediate="true" onclick="#{rich:component('popUprepMetas')}.hide();
                                                           return false;"/>
                        </h:panelGroup>
                    </h:form>
                </f:facet>

                <h:form id="formRepMetas">
                    <h:panelGroup layout="block" id="gpPopUpMetas">

                        <div class="cont_bottom">
                            <div class="icon_bot"></div>

                            <div class="cont_central">
                                <div class="seleccione">
                                    <h:selectOneRadio id="radioMetas" value="#{var.unidad}" onchange="showRegionMetasUnidad(this);">
                                        <f:selectItem itemValue="#{var.unidad}" itemLabel="#{var.unidad}" />
                                        <f:selectItem itemValue="#{var.convenio}" itemLabel="#{var.convenio}" />
                                    </h:selectOneRadio>
                                </div>

                                <div class="dropdown">

                                    <h:outputText id="outNumConvenio" style="display: none;" value="Número del Convenio" styleClass="hot_n_convenio label_texto_convenio"/>
                                    <h:inputText id="inNumConvenio" value="#{Supervisor$Contrato.contrato.strnumcontrato}" title="#{var.numero} #{var.del} #{var.convenio}" style="height: 32px!important; width: 320px!important;display: none;" maxlength="25" required="true" >
                                        <rich:placeholder value="Ej: 442D5" styleClass="input_num_convenio"/>
                                        <f:validateLength maximum="255"/>
                                        <a4j:ajax execute="@this" event="change" render="gpPopUpMetas" />
                                    </h:inputText>

                                    <h:selectOneMenu id="selUnidad" value="#{Supervisor$Contrato.selectedUnit}" required="true" style="font-style: italic!important; font-size: 12px!important;" >
                                        <f:selectItem itemLabel="Todos" itemValue="0"/>
                                        <f:selectItems value="#{Supervisor$Contrato.lstUnidades}" var="unidad" itemValue="#{unidad.id}" itemLabel="#{unidad.nombre}" />
                                        <a4j:ajax execute="@this" event="change" render="gpPopUpMetas" />
                                    </h:selectOneMenu>

                                </div>
                                <div class="dropdown">

                                    <h:outputText id="outEstConvenio" value="Estado del Convenio" styleClass="hot_n_convenio label_texto_convenio"/>

                                    <h:selectOneMenu id="selEstConvenio" value="#{Supervisor$Contrato.filtrocontrato.estadoConvenio}">
                                        <f:selectItem itemLabel="Todos" itemValue="0"/>
                                        <f:selectItems value="#{Supervisor$Contrato.estadoConvenioOption}" />     
                                        <a4j:ajax execute="@this" event="change" render="gpPopUpMetas" />
                                    </h:selectOneMenu>  

                                </div>

                                <div class="descargarbtn">
                                    <h:commandLink id="btnUnidad" styleClass="ikont-label-menu-estr-sub-titulo "   immediate="true" value="#{var.descargar}" rendered="#{var.verreportegeneral and SessionBeanCobra.usuarioObra.renderrecurso.btn_visualizar_reporte_global}"
                                                   onclick="window.open(document.location.href = '#{var.ipserver}/ReportesFonade/Servlet_Reportes?identificador_reporte=3a&amp;identificador_unidad=#{Supervisor$Contrato.selectedUnit == '0' ? 'ALL' : Supervisor$Contrato.selectedUnit}&amp;estado_convenio=#{Supervisor$Contrato.filtrocontrato.estadoConvenio == '0' ? 'ALL' : Supervisor$Contrato.filtrocontrato.estadoConvenio}&amp;usuario=#{SessionBeanCobra.ciudadanoservice.usuariomostrar.usuLogin}', '_blank');"/>
                                    <h:commandLink id="btnConvenio" style="display: none;" styleClass="ikont-label-menu-estr-sub-titulo "   immediate="true" value="#{var.descargar}" rendered="#{var.verreportegeneral and SessionBeanCobra.usuarioObra.renderrecurso.btn_visualizar_reporte_global}"
                                                   onclick="window.open(document.location.href = '#{var.ipserver}/ReportesFonade/Servlet_Reportes?identificador_reporte=3b&amp;identificador_convenio=#{Supervisor$Contrato.contrato.strnumcontrato}&amp;usuario=#{SessionBeanCobra.ciudadanoservice.usuariomostrar.usuLogin}', '_blank');"/>
                                </div>
                            </div>
                        </div>
                    </h:panelGroup>
                </h:form>        
            </rich:popupPanel>

            <!-- PopUP Reporte Implementacion -->
            <rich:popupPanel id="popUprepImpl" autosized="true" moveable="true" headerClass="rich-panel-header">
                <f:facet name="header" >
                    <h:panelGroup >
                        <h:outputText  styleClass="ikont-hot-seleccioncontratista" value="#{var.reporteImpl}"   />
                    </h:panelGroup>
                </f:facet>
                <f:facet name="controls">
                    <h:form>
                        <h:panelGroup>
                            <a4j:commandLink  id="esconder-mp-listado-contratistas" styleClass="ikont-acl-cerrar closemodal"  
                                              title="#{var.cerrar}" immediate="true" onclick="#{rich:component('popUprepImpl')}.hide();
                                                           return false;"/>
                        </h:panelGroup>
                    </h:form>
                </f:facet>

                <h:form id="formRepImpl">
                    <h:panelGroup layout="block" id="gpPopUpImpl">


                        <div class="cont_bottom">
                            <div class="icon_bot"></div>

                            <div class="cont_central">

                                <div class="descargarbtn">
                                    <h:commandLink styleClass="ikont-label-menu-estr-sub-titulo "   immediate="true" value="#{var.descargar}" rendered="#{var.verreportegeneral and SessionBeanCobra.usuarioObra.renderrecurso.btn_visualizar_reporte_global}"
                                                   onclick="window.open(document.location.href = '#{var.ipserver}/ReportesFonade/Servlet_Reportes?identificador_reporte=5&amp;usuario=#{SessionBeanCobra.ciudadanoservice.usuariomostrar.usuLogin}', '_blank');"/>
                                </div>
                            </div>
                        </div>

                    </h:panelGroup>
                </h:form>        
            </rich:popupPanel>

            <!-- PopUP Reporte Consolidado Gerencial de Convenios -->
            <rich:popupPanel id="popUprepConsGcialConv" autosized="true" moveable="true" headerClass="rich-panel-header">
                <f:facet name="header" >
                    <h:panelGroup >
                        <h:outputText  styleClass="ikont-hot-seleccioncontratista" value="#{var.reporteImpl}"   />
                    </h:panelGroup>
                </f:facet>
                <f:facet name="controls">
                    <h:form>
                        <h:panelGroup>
                            <a4j:commandLink  id="esconder-mp-listado-contratistas" styleClass="ikont-acl-cerrar closemodal"  
                                              title="#{var.cerrar}" immediate="true" onclick="#{rich:component('popUprepConsGcialConv')}.hide();
                                                           return false;"/>
                        </h:panelGroup>
                    </h:form>
                </f:facet>

                <h:form id="formRepConsGcialConv">
                    <h:panelGroup layout="block" id="gpPopUpConsGcialConv">


                        <div class="cont_bottom">
                            <div class="icon_bot"></div>

                            <div class="cont_central">

                                <div class="descargarbtn">
                                    <h:commandLink styleClass="ikont-label-menu-estr-sub-titulo "   immediate="true" value="#{var.descargar}" rendered="#{var.verreportegeneral and SessionBeanCobra.usuarioObra.renderrecurso.btn_visualizar_reporte_global}"
                                                   onclick="window.open(document.location.href = '#{var.ipserver}/ReportesFonade/Servlet_Reportes?identificador_reporte=7a&amp;usuario=#{SessionBeanCobra.ciudadanoservice.usuariomostrar.usuLogin}', '_blank');"/>
                                </div>
                            </div>
                        </div>

                    </h:panelGroup>
                </h:form>        
            </rich:popupPanel>

            <!-- PopUP Reporte Reporte de Auditoria -->
            <rich:popupPanel id="popUprepAuditoria" autosized="true" moveable="true" headerClass="rich-panel-header">
                <f:facet name="header" >
                    <h:panelGroup >
                        <h:outputText  styleClass="ikont-hot-seleccioncontratista" value="#{var.reporteAuditoria}"   />
                    </h:panelGroup>
                </f:facet>
                <f:facet name="controls">
                    <h:form>
                        <h:panelGroup>
                            <a4j:commandLink  id="esconder-mp-listado-contratistas" styleClass="ikont-acl-cerrar closemodal"  
                                              title="#{var.cerrar}" immediate="true" onclick="#{rich:component('popUprepAuditoria')}.hide();
                                                           return false;"/>
                        </h:panelGroup>
                    </h:form>
                </f:facet>

                <h:form id="formRepAuditoria">
                    <h:panelGroup layout="block" id="gpPopUpAuditoria">

                        <div class="cont_bottom_auditoria">
                            <div class="icon_bot"></div>

                            <div class="cont_central">

                                <div class="dropdown">

                                    <div class="seleccione">
                                        <h:selectOneRadio id="radioMetas" value="#{var.unidad}" onchange="showRegionAudiUnidad(this);">
                                            <f:selectItem itemValue="#{var.unidad}" itemLabel="#{var.unidad}" />
                                            <f:selectItem itemValue="#{var.convenio}" itemLabel="#{var.convenio}" />
                                        </h:selectOneRadio>
                                    </div>

                                </div>
                                <div class="dropdown">

                                    <h:outputText value="#{var.unidad}" styleClass="hot_n_convenio label_texto_convenio"/>

                                    <h:selectOneMenu id="selUnidadA" value="#{Supervisor$Contrato.selectedUnit}" required="true" style="font-style: italic!important; font-size: 12px!important;" >
                                        <f:selectItem itemLabel="Todos" itemValue="0"/>
                                        <f:selectItems value="#{Supervisor$Contrato.lstUnidades}" var="unidad" itemValue="#{unidad.id}" itemLabel="#{unidad.nombre}" />
                                        <a4j:ajax execute="@this" event="change" render="gpPopUpAuditoria" />
                                    </h:selectOneMenu>

                                </div>
                                <div class="dropdown">

                                    <h:outputText id="outEstConvenioA" value="Período" styleClass="hot_n_convenio label_texto_convenio"/>

                                    <h:inputText id="periodoA" value="#{Reportes.periodo}" maxlength="6" required="true" >                                        <rich:placeholder value="Ej: 201411 (añoMes)" styleClass="input_num_convenio"/>
                                        <f:validateLength maximum="6"/>
                                        <a4j:ajax execute="@this" event="change" render="gpPopUpAuditoria" />
                                    </h:inputText>
                                </div>
                                <div class="dropdown">

                                    <h:outputText id="outNumConvenioA" style="display: none;" value="Número del Convenio" styleClass="hot_n_convenio label_texto_convenio"/>
                                    <h:inputText id="inNumConvenioA" value="#{Supervisor$Contrato.contrato.strnumcontrato}" title="#{var.numero} #{var.del} #{var.convenio}" style="height: 32px!important; width: 320px!important;display: none;" maxlength="25" required="true" >
                                        <rich:placeholder value="Ej: 442D5" styleClass="input_num_convenio"/>
                                        <f:validateLength maximum="255"/>
                                        <a4j:ajax execute="@this" event="change" render="gpPopUpAuditoria" />
                                    </h:inputText>

                                </div>

                                <div class="descargarbtn">
                                    <h:commandLink id="btnUnidadA" styleClass="ikont-label-menu-estr-sub-titulo "   immediate="true" value="#{var.descargar}" rendered="#{var.verreportegeneral and SessionBeanCobra.usuarioObra.renderrecurso.btn_visualizar_reporte_global}"
                                                   onclick="window.open(document.location.href = '#{var.ipserver}/ReportesFonade/Servlet_Reportes?identificador_reporte=4a&amp;identificador_unidad=#{Supervisor$Contrato.selectedUnit == '0' ? 'ALL' : Supervisor$Contrato.selectedUnit}&amp;periodo_reporte=#{Reportes.periodo}&amp;usuario=#{SessionBeanCobra.ciudadanoservice.usuariomostrar.usuLogin}', '_blank');"/>

                                    <h:commandLink id="btnConvenioA" styleClass="ikont-label-menu-estr-sub-titulo "   immediate="true" value="#{var.descargar}" style="display: none;" rendered="#{var.verreportegeneral and SessionBeanCobra.usuarioObra.renderrecurso.btn_visualizar_reporte_global}"
                                                   onclick="window.open(document.location.href = '#{var.ipserver}/ReportesFonade/Servlet_Reportes?identificador_reporte=4a&amp;identificador_unidad=#{Supervisor$Contrato.selectedUnit == '0' ? 'ALL' : Supervisor$Contrato.selectedUnit}&amp;periodo_reporte=#{Reportes.periodo}&amp;identificador_convenio=#{Supervisor$Contrato.contrato.strnumcontrato}&amp;usuario=#{SessionBeanCobra.ciudadanoservice.usuariomostrar.usuLogin}', '_blank');"/>
                                </div>
                            </div>
                        </div>
                    </h:panelGroup>
                </h:form>        
            </rich:popupPanel>

            <!--PopUP Reporte Monitoreo por Factor de Evaluacion-->
            <rich:popupPanel id="popUprepMonEva" autosized="true" moveable="true" headerClass="rich-panel-header">
                <f:facet name="header" >
                    <h:panelGroup >
                        <h:outputText  styleClass="ikont-hot-seleccioncontratista" value="#{var.reporteGeo}"   />
                    </h:panelGroup>
                </f:facet>
                <f:facet name="controls">
                    <h:form>
                        <h:panelGroup>
                            <a4j:commandLink  id="esconder-mp-listado-contratistas" styleClass="ikont-acl-cerrar closemodal"  
                                              title="#{var.cerrar}" immediate="true" onclick="#{rich:component('popUprepMonEva')}.hide();
                                                           return false;"/>
                        </h:panelGroup>
                    </h:form>
                </f:facet>

                <h:form id="formRepMonEva">
                    <h:panelGroup layout="block" id="gPopUpMonEva">

                        <div class="cont_bottom">
                            <div class="icon_bot"></div>

                            <div class="cont_central">

                                <div class="dropdown">

                                    <h:outputText value="#{var.unidad}" styleClass="hot_n_convenio label_texto_convenio"/>

                                    <h:selectOneMenu id="selUnidadMonEva" value="#{Supervisor$Contrato.selectedUnit}" required="true" style="font-style: italic!important; font-size: 12px!important;" >
                                        <f:selectItem itemLabel="Todos" itemValue="0"/>
                                        <f:selectItems value="#{Supervisor$Contrato.lstUnidades}" var="unidad" itemValue="#{unidad.id}" itemLabel="#{unidad.nombre}" />
                                        <a4j:ajax execute="@this" event="change" render="gPopUpMonEva" />
                                    </h:selectOneMenu>

                                </div>

                                <div class="dropdown">
                                    <h:outputText id="outNumConvenioMonEva" value="Número del Convenio" styleClass="hot_n_convenio label_texto_convenio"/>
                                    <h:inputText id="inNumConvenioMonEva" value="#{Supervisor$Contrato.contrato.strnumcontrato}" title="#{var.numero} #{var.del} #{var.convenio}" maxlength="25" required="true" >
                                        <rich:placeholder value="Ej: 442D5" styleClass="input_num_convenio"/>
                                        <f:validateLength maximum="255"/>
                                        <a4j:ajax execute="@this" event="change" render="gPopUpMonEva" />
                                    </h:inputText>
                                </div>
                                
                                <div class="dropdown">
                                    <h:outputText id="outInicioMonEva" value="#{var.fechadeinicio}" styleClass="hot_n_convenio label_texto_convenio"/>
                                    <rich:calendar id="fcInicioMonEva"  datePattern="#{var.formatofechaReportes2}" direction="bottomRight" currentDate="#{Reportes.fecfinob}" value="#{Supervisor$Contrato.contrato.datefechaini}" style="width: 320px !important;" >
                                        <a4j:ajax execute="@this" event="change" render="gPopUpMonEva" />
                                    </rich:calendar>
                                </div>

                                <div class="dropdown">

                                    <h:outputText value="#{var.departamento}" styleClass="hot_n_convenio label_texto_convenio"/>

                                    <h:selectOneMenu id="listDpto" value="#{Reportes.dptoSelected}" 
                                                     onclick="this.style.width = 'auto;';">
                                        <f:selectItem itemValue="ALL" itemLabel="Todos" />
                                        <f:selectItems value="#{Reportes.sedeptosah}"/>
                                        <a4j:ajax execute="@this" event="change" render="gPopUpMonEva" listener="#{Reportes.llenarMuniciAh}"/>
                                    </h:selectOneMenu>

                                </div>

                                <div class="descargarbtn">
                                    <h:commandLink styleClass="ikont-label-menu-estr-sub-titulo "   immediate="true" value="#{var.descargar}" rendered="#{var.verreportegeneral and SessionBeanCobra.usuarioObra.renderrecurso.btn_visualizar_reporte_global}"
                                                   onclick="window.open(document.location.href = '#{var.ipserver}/ReportesFonade/Servlet_Reportes?identificador_reporte=1&amp;identificador_departamento=#{Reportes.dptoSelected}&amp;usuario=#{SessionBeanCobra.ciudadanoservice.usuariomostrar.usuLogin}', '_blank');"/>
                                </div>
                            </div>
                        </div>

                    </h:panelGroup>
                </h:form>        
            </rich:popupPanel>

        </h:form>

    </ui:define>

</ui:composition>
